{"version":3,"sources":["Auth/MsgBox.js","Auth/TogglePassword.js","Auth/apiCalls.js","Auth/Login.js","Auth/BackToLogin.js","utilComp/Dummy.js","Auth/Register.js","Auth/VerifyEmail.js","Auth/ForgotPassword.js","utilComp/PrivateRoute.js","responsive/utilResponsive.js","responsive/Responsive.js","Home/Header/HeaderLeft.js","Home/Header/Header.js","Home/allChats/ChatSearchBox.js","util/Color.js","util/BinSearch.js","global/requests.js","chatData/apiCalls.js","chatData/user.js","global/globalData.js","Home/chatView/chatContainer/message/File.js","Home/chatView/chatContainer/message/NormalMessage.js","Home/chatView/chatContainer/message/StatusMessage.js","Home/chatView/chatContainer/message/Message.js","chatData/message/statusMessage.js","chatData/message/message.js","util/Event.js","chatData/chat/chat.js","chatData/chat/normalChat.js","chatData/chat/groupChat.js","chatData/tempChatLoader.js","chatData/chatSocket.js","Home/allChats/ChatItem.js","Home/allChats/ChatList.js","Home/chatView/ChatViewLoader.js","Home/chatView/apiCalls.js","Home/chatView/chatContainer/messageForm/FileChooser.js","Home/chatView/chatContainer/messageForm/FileList.js","Home/chatView/chatContainer/messageForm/MessageForm.js","Home/chatView/chatContainer/ChatContainer.js","Home/chatView/TempChatContainer.js","Home/chatView/chatViewErrorMessages.js","Home/chatView/NormalChatView.js","utilComp/Modal.js","Home/selectUsers/UserItem.js","Home/selectUsers/UserList.js","Home/selectUsers/SelectUsers.js","Home/chatView/groupChatInfo/apiCalls.js","Home/chatView/groupChatInfo/AddUsers.js","Home/chatView/groupChatInfo/UserOptions.js","Home/chatView/groupChatInfo/ChatOptions.js","utilComp/EditableLabel.js","Home/chatView/groupChatInfo/edit/editDescription.js","Home/chatView/groupChatInfo/edit/editChatName.js","Home/chatView/groupChatInfo/GroupChatInfo.js","Home/chatView/groupChatInfo/ModalRouterGroupChatInfo.js","Home/chatView/GroupChatView.js","Home/selectChat/SelectChat.js","Home/newChat/apiCalls.js","Home/newChat/chooseUser/UserItem.js","Home/newChat/chooseUser/ChooseUser.js","Home/newChat/chooseGroup/ChatItem.js","Home/newChat/chooseGroup/ChooseGroup.js","img/placeholder.png","Home/newChat/newGroup/GroupInfoForm.js","Home/newChat/newGroup/NewGroup.js","Home/newChat/NewChat.js","Home/userInfo/userInfoApiCalls.js","Home/userInfo/UserOptions.js","Home/userInfo/UserInfo.js","Home/settings/apiCalls.js","global/push.js","Home/settings/Permissions.js","Home/settings/Settings.js","Home/ModalRouterBigScreens.js","Home/GridBigScreens.js","Home/chatView/TypeMsgContainer.js","Home/ModalRouterSmallScreens.js","Home/RouterSmallScreens.js","Home/Home.js","About/About.js","global/apiCalls.js","global/authTokens.js","Auth/ResetPassword.js","App.js","global/global.js","global/initChats.js","global/chats.js","index.js"],"names":["ErrorMsg","className","this","props","children","Component","SuccessMsg","TogglePassword","state","showPassword","onClick","setState","type","login","username","password","a","config","method","headers","body","JSON","stringify","fetch","register","email","verifyEmail","verificationCode","requestPasswordResetLink","isVerificationCodeValid","setPassword","code","Login","changeHandler","event","nam","target","name","val","value","submitHandler","preventDefault","errorMessage","valConstraints","presence","length","minimum","tooShort","maximum","tooLong","format","pattern","RegExp","message","valResult","validate","replace","error","valid","uNameErr","pwErr","then","response","status","json","data","dispatch","setUserSelf","uid","setAuthTokens","tokens","history","push","catch","err","redirect","style","display","overflowY","maxWidth","onSubmit","htmlFor","placeholder","onChange","to","withRouter","BackToLogin","Dummy","didMount","prevProps","prevState","snapshot","didUpdate","Register","passwordRepeat","equality","usernameTaken","accountCreated","emailSet","goToChatHome","VerifyEmail","componentDidMount","loading","success","ForgotPassword","sentMail","successMessage","PrivateRoute","component","rest","useGlobal","global","render","loaded","authTokens","pathname","referer","location","IdDeviceBreakpointsByWidth","IdMobileHeight","getWindowDimension","width","window","innerWidth","document","documentElement","clientWidth","height","innerHeight","clientHeight","initialState","Responsive","displayIn","shouldRenderChildren","shouldRender","Fragment","handleResize","indexOf","addEventListener","removeEventListener","React","PureComponent","infoHeaderCenter","HeaderLeft","id","goBack","newMessages","HeaderCenter","ihcData","data-toggle","title","gcid","renderChatInfo","Header","clickCheckBox","checkBoxClicked","stopPropagation","setTimeout","clickDocument","changeChecked","logout","deleteAuthTokens","checked","userSelf","BottomToolTip","text","placement","trigger","overlay","ChatSearchBox","searchChanged","onSearch","Colors","aqua","black","blue","brown","cyan","darkblue","darkcyan","darkgrey","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkviolet","fuchsia","gold","green","indigo","khaki","lightblue","lightgreen","lightgrey","lightpink","lime","magenta","maroon","navy","olive","orange","pink","purple","violet","red","silver","result","count","prop","names","Math","random","BinSearchArray","key","left","right","k","floor","i","getIndex","splice","getNearestKey","Array","makeRequest","tokensP","getGlobal","configI","getDispatch","Error","selectChats","createNormalChat","selectUser","loadMessages","UserErrorCode","chatSocket","users","get","normalChat","user","temporaryChat","createNew","doesExist","ok","userExists","blocked","User","_normalChat","_groupChats","color","groupChats","add","remove","userInfo","chats","normal","chat","blockedByOther","blockedBySelf","updateChat","r","_uid","_username","_color","globalData","fetchData","File","getFile","file","fid","fileName","blob","url","URL","createObjectURL","createElement","href","download","appendChild","click","NormalMessage","msg","bySelf","userTop","UsernameSpan","content","files","map","item","index","MessageText","mDateString","linkRegex","httpRegex","getHref","word","test","words","split","rel","StatusMessage","StatusMsgContent","getStatusMessageString","Message","messageTypes","normalMessage","statusMessage","middleStringD","statusMessagesD","useReact","passiveUsers","statusMessageTypes","chatCreated","renderStringD","usersAdded","usersRemoved","usersJoined","usersLeft","usersMadeAdmin","usersRemovedAdmin","userResignedAdmin","chatNameChanged","descriptionChanged","isPublicChanged","getStatusMessageStringD","middle","getMiddleString","getPassiveUsers","uidSelfInPassiveUsers","getTString","mid","date","Date","now","userTopShown","getMessageViewDateString","dateString","getDateString","getUserTop","isBySelf","isDateToday","getTimeString","isDateYesterday","msgString","substr","getMessageObject","dateNow","getDate","getMonth","getFullYear","ds","d","ms","m","y","hs","h","getHours","getMinutes","date2","_mid","_date","_chat","_type","_content","EventHandler","events","Map","fn","has","set","e","_events","Chat","chatName","_messages","_event","_unreadMessages","_reachedTopMessages","isBlockedBySelf","isBlockedByOther","messageData","undefined","canBeShown","empty","messages","latestMsgDate","reachedTopMessages","num","getLastMsgId","getLastMessage","chatType","chatId","lastMsgId","lMessages","showUserInfoMessage","rMessages","newMsg","unreadMessages","latestMessage","getLatestMessageObject","isStillMember","lm","getFirstMessage","getChatViewMsgString","getChatViewDateString","isCurrentChat","selectNoChat","reloadMessages","selectChat","_id","_chatName","_latestMsgDate","NormalChat","_isTyping","otherUser","isTyping","_otherUser","_blockedBySelf","_blockedByOther","GroupChat","uids","_users","_usersTyping","usersTyping","rc","isMember","getIndexOfTyping","find","findIndex","_isStillMember","TempChatLoader","_isShown","chatNow","isShown","showTempChat","updateTempChat","hideTempChat","messageContentSelf","messageContentSend","otherUid","otherUsername","newChat","ncid","addChat","hide","_chatNow","ChatSocket","_userSelf","_chats","group","_finishedLoading","_temporaryChat","_initCalled","socket","removeAllListeners","disconnect","initCalled","io","connect","secure","emit","on","initChats","getChat","addMessage","hasNewMsg","startedTyping","stoppedTyping","addNewChat","removedGroupChat","members","member","alert","reload","addNewNormalChat","addNewGroupChat","finishedLoading","getChatArraySortedByDate","getMessageTime","c","getTime","getMaxDate","iFrom","max","swap","items","firstIndex","secondIndex","temp","getSorted","sorted","arr","clone","getChatObject","cloneArr","arr1","arr2","merged","p1","p2","mergeArr","currentChat","initFirstMessage","firstMessage","addGroupChat","_socket","ChatItem","isSelected","typeStateChanged","typeMsg","userTyping","getLatestUserTyping","lastMsg","renderMsg","renderDate","rm","ChatList","searchValue","found","tempChat","includes","ChatViewLoader","borderWidth","role","loadGroupChat","sendMessage","joinGroupChat","FileChooser","assignFilesRef","uploadFiles","fileArray","mimeType","console","log","onFileUpload","bind","multiple","ref","FileList","deleteFile","MessageForm","_userTyping","_typeEventEmitted","onTyping","handleTypeMessage","isTempChat","clearTimeout","typeTimeout","typeEventEmitted","getFileIds","createNewNormalChat","msgContent","onEmojiInput","emoji","native","toggleEmoji","showEmoji","addFiles","tooManyFiles","filesClone","slice","fileIds","autoComplete","position","bottom","onSelect","_typeTimeout","_isTempChat","ChatContainer","_isMounted","scrollHandler","scrollToBottom","getScrollToBottom","messagesNode","scrollTop","isChatSelected","setScrollToBottom","scrollHeight","offsetHeight","assignMessagesRef","msgLoading","addLoadedMessages","chatChanged","ReactDOM","findDOMNode","isMounted","setGlobal","lastDate","renderDateContainer","date1","getDay","onScroll","_messagesNode","TempChatContainer","show","update","AddressNotValid","CannotWriteYourself","BlockedByThisUser","UserNotExisting","NoMemberInPublicChat","onJoined","NoAuthorization","ChatNotExisting","GeneralError","NormalChatView","userChanged","parseInt","getUserNormalChat","res","selectNormalChat","selectTempChat","renderLoader","isNaN","Modal","ModalHeader","ModalMain","UserItem","clicked","deselectUser","errorCode","lastRequest","searchResult","hasMore","loadUsers","concat","scrollParentRef","pageStart","loadMore","loader","useWindow","getScrollParent","isUserSelected","SelectUsers","selectedUsers","arrClone","deselectIndex","btnNextClicked","onNext","showOnlySelected","addMembers","fetchUsersNotInGroup","leaveChat","removeSelfAdmin","AddUsers","useHistory","submitUsers","numAlreadyLoaded","search","limit","start","UserOptions","isSelfAdmin","memberSelf","isAdmin","removeMemberFromChat","makeMemberAdmin","removeMemberAdmin","isMemberSelf","ChatOptions","useLocation","EditableLabel","startEdit","isEditing","cancelEdit","submitEdit","onDoubleClick","DescriptionEdit","description","ChatNameEdit","GroupChatInfo","uidSelf","animation","alignPoint","ModalRouterGroupChatInfo","path","useRouteMatch","groupChatInfo","groupChatErrorCode","groupChatTabs","GroupChatView","loadGroupChatInfo","chatData","public","chatExists","selectGroupChat","reloadChatInfo","setChatUpdated","removeChatUpdated","tab","renderChat","SelectChat","loadChats","showOptions","showSearchBar","renderItem","requestUsersNoChat","createGroupChat","fetchUsers","fetchPublicGroups","elementClicked","ChooseUser","newGroupClick","setCurrentTab","tabs","newGroup","joinGroupClick","chooseGroup","searchValid","options","ChooseGroup","isNotPart","GroupInfoForm","groupNameChanged","groupName","isPublic","formSubmitted","submitGroup","src","alt","minLength","rows","NewGroup","showEnterChatInfo","currentTab","chooseUser","NewChat","newTab","getHeader","router","fetchUserInfo","blockUser","unblockUser","onBlockedBySelfChanged","UserInfo","isBlocked","updateChatBlockInfo","setUser","groups","getUserSelf","setEmail","subscribePush","vapidPublicKey","convertedVapidKey","urlBase64ToUint8Array","navigator","serviceWorker","ready","registration","pushManager","subscribe","userVisibleOnly","applicationServerKey","subscription","unsubscribePush","getSubscription","unsubscribe","base64String","base64","repeat","rawData","atob","outputArray","Uint8Array","charCodeAt","Permissions","setNotifications","permissions","notifications","Notification","requestPermission","permiss","setPermissions","subscribed","localStorage","setItem","permissionsString","getItem","parse","Settings","changeEmail","userDataSelf","emailTaken","emailChangeRequested","setEmailError","setEmailErrorMessage","ModalRouterBigScreens","routeProps","match","params","uidInfo","GridBigScreens","TypeMsgContainer","getUsersTyping","ModalRouterSmallScreens","RouterSmallScreens","renderTypeMsgContainer","modal","modalInfo","init","About","reqUserSelf","addReducer","removeItem","deleteUserSelf","resetGlobal","destruct","existingTokens","ResetPassword","passwordResetSuccess","linkValid","App","useDispatch","useEffect","initAuthTokens","exact","NoMatch","chatsLoaded","element","chatsClone","chatObject","unshift","getMessages","chat1","chat2","added","initChatReducers","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.bf28109d.chunk.js","sourcesContent":["import React,{Component} from \"react\";\n\nclass ErrorMsg extends Component{\n    render() {\n        return(\n            <small className=\"alert alert-danger p-1 message d-block\">\n                {this.props.children}\n            </small>\n        )\n    }\n}\nclass SuccessMsg extends Component{\n    render() {\n        return(\n            <small className=\"alert alert-success p-1 message d-block\">\n                {this.props.children}\n            </small>\n        )\n    }\n}\n\nexport {ErrorMsg,SuccessMsg};","import React,{Component} from \"react\";\n\nimport \"./TogglePassword.scss\"\n\nexport default class TogglePassword extends Component{\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            showPassword: false\n        }\n    }\n    render() {\n        return(\n            <div className=\"psw-group\">\n                <i className={(this.state.showPassword ? \"fa-eye-slash\" : \"fa-eye\") + \" fas psw-toggle-icon\"}\n                   onClick={() => this.setState(state => ({showPassword: !state.showPassword}))}\n                />\n                <input type={this.state.showPassword ? \"text\" : \"password\"}\n                       {...this.props}\n                />\n            </div>\n        )\n    }\n\n\n}","export const login = async (username,password) => {\n    const config = {\n        method: 'POST',\n        headers: {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n            username: username,\n            password: password\n        })\n    };\n    return  await fetch('/auth/login', config);\n};\n\nexport const register = async(username,password,email) => {\n    let body;\n    if(email === '')\n        body = {\n            username: username,\n            password: password\n        };\n    else\n        body = {\n            username: username,\n            password: password,\n            email: email\n        };\n    const config = {\n        method: 'POST',\n        headers: {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(body)\n    };\n    return await fetch('/auth/register', config);\n};\n\nexport const verifyEmail = async(verificationCode) => {\n    const config = {\n        method: 'GET',\n        headers: {\n            'Accept': 'application/json',\n        }\n    };\n    return await fetch('/user/verifyEmail/' + verificationCode, config);\n};\n\nexport const requestPasswordResetLink = async (username,email) => {\n    const config = {\n        method: 'POST',\n        headers: {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n            username: username,\n            email: email\n        })\n    };\n    return await fetch('/pwReset/requestLink',config);\n}\n\nexport const isVerificationCodeValid = async(verificationCode) => {\n    const config = {\n        method: 'GET',\n        headers: {\n            'Accept': 'application/json',\n        }\n    };\n    return await fetch('/pwReset/isValid/' + verificationCode, config);\n};\n\nexport const setPassword = async (code,password) => {\n    const config = {\n        method: 'POST',\n        headers: {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n            code: code,\n            password: password\n        })\n    };\n    return await fetch('/pwReset/set',config);\n}","import React,{Component} from \"reactn\";\nimport {\n    Link,\n    withRouter\n} from \"react-router-dom\";\nimport validate from \"validate.js\";\nimport {ErrorMsg} from \"./MsgBox\";\nimport TogglePassword from \"./TogglePassword\";\nimport {login} from \"./apiCalls\";\n\nclass Login extends Component{\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            error: false,\n            errorMessage: '',\n            username: '',\n            password: '',\n            redirect: false\n        };\n    }\n    changeHandler = event => {\n        let nam = event.target.name;\n        let val = event.target.value;\n        this.setState({[nam]: val});\n    };\n    submitHandler = event => {\n        event.preventDefault();\n        /*\n            constraints für validation\n         */\n        const  valConstraints = {\n            username: {\n                presence: true,\n                length: {\n                    minimum: 3,\n                    tooShort: 'Benutzername zu kurz',\n                    maximum: 30,\n                    tooLong: 'Benutzername zu lang'\n                },\n                format: {\n                    pattern: new RegExp(/^\\w[\\w ]*$$/),\n                    message: 'ungültiges Format'\n                }\n            },\n            password: {\n                presence: true,\n                length: {\n                    minimum: 8,\n                    tooShort: 'Passwort muss mindestens 8 Zeichen lang sein',\n                    maximum: 50,\n                    tooLong: 'Passwort darf höchstens 50 Zeichen lang sein'\n                }\n            },\n        };\n        /*\n            validate\n         */\n        const valResult = validate({\n            username: this.state.username,\n            password: this.state.password\n        },valConstraints);\n\n        if(typeof(valResult) != \"undefined\"){\n\n            let errorMessage;\n\n            if(typeof(valResult.username) != \"undefined\") {\n                errorMessage = valResult.username[0];\n            }else if(typeof(valResult.password) != \"undefined\") {\n                errorMessage = valResult.password[0];\n            }\n            errorMessage = errorMessage.replace(\"Username \",\"\").replace(\"Password \",\"\");\n\n            this.setState({\n                error: true,\n                errorMessage: errorMessage\n            });\n\n        }else {\n            this.setState({\n                valid: true,\n                uNameErr: '',\n                pwErr: ''\n            });\n           /*\n                request to server\n            */\n           login(this.state.username,this.state.password)\n               .then(async response => {\n                   // success\n                   if(response.status === 200){\n                       const data = await response.json();\n                       await this.dispatch.setUserSelf(data.uid,this.state.username);\n                       // set auth tokens\n                       await this.dispatch.setAuthTokens(data.tokens);\n                       // go to chat home\n                       this.props.history.push('/chat');\n                   // wrong password\n                   }else if(response.status === 403){\n                       this.setState({\n                           error: true,\n                           errorMessage: 'Falsches Passwort!'\n                       });\n                   // user does not exit\n                   }else if(response.status === 404){\n                       this.setState({\n                           error: true,\n                           errorMessage: 'Falscher Benutzername E-Mail Addresse'\n                       });\n                   }else {\n                       this.setState({\n                           error: true,\n                           errorMessage: 'ein Fehler ist aufgetreten'\n                       });\n                   }\n               })\n               .catch(err => {\n                   this.setState({\n                       error: true,\n                       errorMessage: 'ein Fehler ist aufgetreten'\n                   });\n               });\n        }\n\n    };\n    errorMessage = () => {\n        if(this.state.error)\n            return (\n                <ErrorMsg>\n                    {this.state.errorMessage}\n                </ErrorMsg>\n            )\n    };\n\n    render(){\n\n        return(\n            <div className=\"h-100\" style={{display: \"flex\",overflowY: \"auto\"}}>\n                <div className=\"col-sm-12 my-auto\">\n                    <div className=\"container border rounded p-3\" style={{maxWidth: \"800px\"}}>\n                        <h1>Login</h1>\n                        {this.errorMessage()}\n                        <form onSubmit={this.submitHandler}>\n                            <div className=\"form-group\">\n                                <label htmlFor=\"username\">Benutzername:</label>\n                                <input type=\"text\"\n                                       name=\"username\"\n                                       className=\"form-control\"\n                                       placeholder=\"Benutzernamen eingeben\"\n                                       onChange={this.changeHandler}\n                                />\n                            </div>\n                            <div className=\"form-group\">\n                                <label htmlFor=\"password\">Passwort:</label>\n                                <TogglePassword\n                                       name=\"password\"\n                                       className=\"form-control\"\n                                       placeholder=\"Passwort eingeben\"\n                                       onChange={this.changeHandler}\n                                />\n                            </div>\n                            <div className=\"form-group\">\n                                haben Sie noch keinen Account? <Link to=\"/register\">Jetzt registrieren</Link>\n                            </div>\n                            <div className=\"form-group\">\n                                Passwort vergessen? <Link to=\"/forgotPassword\">Jetzt zurücksetzen</Link>\n                            </div>\n                            <input\n                                type=\"submit\"\n                                className=\"btn btn-primary\"\n                                value=\"Login\"\n                            />\n                        </form>\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default withRouter(Login);","import React from \"react\";\nimport {Link} from \"react-router-dom\";\n\nimport \"./BackToLogin.scss\";\n\nexport default function BackToLogin(){\n    return(\n        <h5 className={\"back-to-login\"}>\n            <Link to={\"/login\"}>\n                <i className=\"fas fa-arrow-left\"/>\n                &nbsp;\n                zurück zu login\n            </Link>\n        </h5>\n    )\n}","import {Component} from \"react\";\n\nexport default class Dummy extends Component {\n\n    componentDidMount() {\n        if(typeof(this.props.didMount) === 'function')\n            this.props.didMount();\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        if(typeof(this.props.didUpdate) === 'function')\n            this.props.didUpdate();\n    }\n\n    render() {\n        if(this.props.children)\n            return this.props.children;\n        return null;\n    }\n}","import React,{Component} from \"reactn\";\nimport validate from \"validate.js\";\nimport {ErrorMsg, SuccessMsg} from \"./MsgBox\";\nimport {withRouter} from \"react-router-dom\";\nimport TogglePassword from \"./TogglePassword\";\nimport {register} from \"./apiCalls\";\nimport BackToLogin from \"./BackToLogin\";\nimport Dummy from \"../utilComp/Dummy\";\n\nclass Register extends Component{\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            error: false,\n            errorMessage: '',\n            username: '',\n            email: '',\n            password: '',\n            passwordRepeat: '',\n            redirect: false,\n            emailSet: false,\n            accountCreated: false\n        }\n    }\n    changeHandler = event => {\n        let nam = event.target.name;\n        let val = event.target.value;\n        this.setState({[nam]: val});\n    };\n    submitHandler = event => {\n        event.preventDefault();\n        /*\n            constraints für validation\n         */\n        const  valConstraints = {\n            username: {\n                presence: true,\n                length: {\n                    minimum: 3,\n                    tooShort: 'Benutzername zu kurz',\n                    maximum: 30,\n                    tooLong: 'Benutzername zu lang'\n                },\n                format: {\n                    pattern: new RegExp(/^\\w[\\w ]*$$/),\n                    message: 'ungültiges Format'\n                }\n            },\n            password: {\n                presence: true,\n                length: {\n                    minimum: 8,\n                    tooShort: 'Passwort muss mindestens 8 Zeichen lang sein',\n                    maximum: 50,\n                    tooLong: 'Passwort darf höchstens 50 Zeichen lang sein'\n                }\n            },\n            passwordRepeat: {\n                presence: true,\n                equality: \"password\",\n                length: {\n                    minimum: 8,\n                    tooShort: 'Passwort muss mindestens 8 Zeichen lang sein',\n                    maximum: 50,\n                    tooLong: 'Passwort darf höchstens 50 Zeichen lang sein'\n                }\n            }\n        };\n        /*\n            validate\n         */\n        const valResult = validate({\n            username: this.state.username,\n            password: this.state.password,\n            passwordRepeat: this.state.passwordRepeat\n        },valConstraints);\n\n        if(typeof(valResult) != \"undefined\"){\n\n            let errorMessage;\n\n            if(typeof(valResult.username) != \"undefined\") {\n                errorMessage = valResult.username[0];\n            }else if(typeof(valResult.password) != \"undefined\") {\n                errorMessage = valResult.password[0];\n            }else if(typeof(valResult.passwordRepeat)!=\"undefined\") {\n                errorMessage = \"Passwörter stimmen nicht überein!\"\n            }\n            errorMessage = errorMessage.replace(\"Username \",\"\").replace(\"Password \",\"\");\n\n            this.setState({\n                error: true,\n                errorMessage: errorMessage\n            });\n\n        }else {\n            this.setState({\n                error: false,\n                errorMessage: ''\n            });\n            /*\n                request to server\n             */\n            register(this.state.username,this.state.password,this.state.email)\n                .then(async response => {\n                    if(response.status === 200){\n\n                        const data = await response.json();\n                        // if username taken --> show error message\n                        if(data.usernameTaken){\n                            this.setState({\n                                error: true,\n                                errorMessage: 'Benutzername bereits vergeben'\n                            });\n                        }else{\n                            await this.dispatch.setUserSelf(data.uid,this.state.username);\n                            // set auth tokens\n                            await this.dispatch.setAuthTokens(data.tokens);\n                            // account created\n                            this.setState({\n                                accountCreated: true,\n                                emailSet: this.state.email !== ''\n                            })\n                        }\n                    }else {\n                        this.setState({\n                            error: true,\n                            errorMessage: 'ein Fehler ist aufgetreten'\n                        });\n                    }\n                })\n                .catch(err => {\n                    this.setState({\n                        error: true,\n                        errorMessage: 'ein Fehler ist aufgetreten'\n                    });\n                });\n        }\n    };\n    goToChatHome = () => {\n        // go to chat home\n        this.props.history.push('/chat');\n    }\n    errorMessage = () => {\n        if(this.state.error)\n            return (\n                <ErrorMsg>\n                    {this.state.errorMessage}\n                </ErrorMsg>\n            )\n    };\n\n    render(){\n\n        return (\n            <div className=\"h-100\" style={{display: \"flex\",overflowY: \"auto\"}}>\n                <div className=\"col-sm-12 my-auto\">\n                    <div className=\"container border rounded p-3\" style={{maxWidth: \"800px\"}}>\n                        <BackToLogin/>\n                        {!this.state.accountCreated ?\n                            <Dummy>\n                                <h1>Registrieren</h1>\n                                {this.errorMessage()}\n                                <form onSubmit={this.submitHandler}>\n                                    <div className=\"form-group\">\n                                        <label htmlFor=\"username\">Benutzername: *</label>\n                                        <input type=\"text\"\n                                               name=\"username\"\n                                               className=\"form-control\"\n                                               placeholder=\"Benutzernamen eingeben\"\n                                               onChange={this.changeHandler}\n                                        />\n                                    </div>\n                                    <div className=\"form-group\">\n                                        <label htmlFor=\"email\">E-Mail Addresse: (nicht verpflichtend)</label>\n                                        <input type=\"email\"\n                                               name=\"email\"\n                                               className=\"form-control\"\n                                               placeholder=\"E-Mail Addresse eingeben\"\n                                               onChange={this.changeHandler}\n                                        />\n                                    </div>\n                                    <div className=\"form-group\">\n                                        <label htmlFor=\"password\">Passwort: *</label>\n                                        <TogglePassword\n                                               name=\"password\"\n                                               className=\"form-control\"\n                                               placeholder=\"Passwort eingeben\"\n                                               onChange={this.changeHandler}\n                                        />\n                                    </div>\n                                    <div className=\"form-group\">\n                                        <label htmlFor=\"passwordRepeat\">Passwort wiederholen: *</label>\n                                        <TogglePassword\n                                            name=\"passwordRepeat\"\n                                            className=\"form-control\"\n                                            placeholder=\"Passwort eingeben\"\n                                            onChange={this.changeHandler}\n                                        />\n                                    </div>\n                                    <input type=\"submit\" className=\"btn btn-primary\" value=\"Registrieren\"/>\n                                </form>\n                            </Dummy>\n                            :\n                            <Dummy>\n                                <SuccessMsg>\n                                    Benutzer {this.state.username} wurde erfolgreich angelegt\n                                    {this.state.emailSet ?\n                                        <Dummy>\n                                            <br/>\n                                            E-Mail mit Verifizierungslink wurde versendet!\n                                        </Dummy>\n                                        : null\n                                    }\n                                </SuccessMsg>\n                                <button\n                                    className=\"btn btn-primary\"\n                                    onClick={this.goToChatHome}\n                                >\n                                    weiter\n                                </button>\n                            </Dummy>\n                        }\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default withRouter(Register);","import React,{Component} from \"reactn\";\nimport {verifyEmail} from \"./apiCalls\";\nimport \"./VerifyEmail.scss\";\n\nexport default class VerifyEmail extends Component{\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            loading: true,\n            error: false,\n            success: false\n        }\n    }\n\n    render(){\n        if(this.state.loading){\n            return null;\n        } else if(this.state.error){\n            return(\n                <div className=\"h-100 verifyEmail error\">\n                    <h3>\n                        Fehler!\n                    </h3>\n                </div>\n            )\n        } else if(!this.state.success){\n            return(\n                <div className=\"h-100 verifyEmail\">\n                    <h3>\n                        Ungültiger Verifizierungscode!\n                    </h3>\n                </div>\n            )\n        } else{\n            return(\n                <div className=\"h-100 verifyEmail\">\n                    <h3>\n                    E-Mail Addresse erfolgreich verifiziert!\n                    </h3>\n                </div>\n            )\n        }\n    }\n\n    componentDidMount = () => {\n        verifyEmail(this.props.verificationCode)\n            .then(response => {\n                this.setState({\n                    loading: false,\n                    success: response.status === 200\n                });\n            })\n            .catch(err => {\n                this.setState({\n                    loading: false,\n                    error: true\n                });\n            });\n    }\n}","import React,{Component} from \"reactn\";\nimport {requestPasswordResetLink} from \"./apiCalls\";\nimport {ErrorMsg, SuccessMsg} from \"./MsgBox\";\nimport validate from \"validate.js\";\nimport BackToLogin from \"./BackToLogin\";\n\nexport default class ForgotPassword extends Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            error: false,\n            errorMessage: '',\n            username: '',\n            email: '',\n            sentMail: false\n        };\n    }\n    changeHandler = event => {\n        let nam = event.target.name;\n        let val = event.target.value;\n        this.setState({[nam]: val});\n    };\n    submitHandler = event => {\n        event.preventDefault();\n        /*\n            constraints für validation\n         */\n        const  valConstraints = {\n            username: {\n                presence: true,\n                length: {\n                    minimum: 3,\n                    tooShort: 'Benutzername zu kurz',\n                    maximum: 30,\n                    tooLong: 'Benutzername zu lang'\n                },\n                format: {\n                    pattern: new RegExp(/^\\w[\\w ]*$$/),\n                    message: 'ungültiges Format'\n                }\n            },\n            email: {\n                presence: true,\n                length: {\n                    minimum: 1,\n                    tooShort: 'E-Mail Addresse benötigt'\n                }\n            }\n        };\n        /*\n            validate\n         */\n        const valResult = validate({\n            username: this.state.username,\n            email: this.state.email\n        },valConstraints);\n\n        if(typeof(valResult) != \"undefined\") {\n\n            let errorMessage;\n\n            if (typeof (valResult.username) != \"undefined\")\n                errorMessage = valResult.username[0];\n            else if (typeof (valResult.email) != \"undefined\")\n                errorMessage = valResult.email[0];\n            errorMessage = errorMessage.replace(\"Username \",\"\").replace(\"Email \",\"\");\n\n            this.setState({\n                error: true,\n                errorMessage: errorMessage\n            });\n        }else {\n\n            const {username, email} = this.state;\n\n            requestPasswordResetLink(username, email)\n                .then(response => {\n                    if (response.status === 200)\n                        this.setState({\n                            error: false,\n                            sentMail: true\n                        });\n                    else if(response.status === 404)\n                        this.setState({\n                            error: true,\n                            errorMessage: 'Dieser Benutzer scheint nicht zu existieren'\n                        })\n                    else\n                        this.setState({\n                            error: true,\n                            errorMessage: 'ein Fehler ist aufgetreten'\n                        });\n                })\n                .catch(err => {\n                    this.setState({\n                        error: true,\n                        errorMessage: 'ein Fehler ist aufgetreten'\n                    });\n                });\n        }\n    }\n    errorMessage = () => {\n        if(this.state.error)\n            return (\n                <ErrorMsg>\n                    {this.state.errorMessage}\n                </ErrorMsg>\n            )\n    };\n    successMessage = () => {\n        if(this.state.sentMail)\n            return (\n                <SuccessMsg>\n                    E-Mail zum zurücksetzen des Passwortes wurde versendet!\n                </SuccessMsg>\n            )\n    }\n    render() {\n        return (\n            <div className=\"h-100\" style={{display: \"flex\",overflowY: \"auto\"}}>\n                <div className=\"col-sm-12 my-auto\">\n                    <div className=\"container border rounded p-3\" style={{maxWidth: \"800px\"}}>\n                        <BackToLogin/>\n                        <h1>Passwort zurücksetzen</h1>\n                        {this.errorMessage()}\n                        <form onSubmit={this.submitHandler}>\n                            <div className=\"form-group\">\n                                <label htmlFor=\"username\">Benutzername:</label>\n                                <input type=\"text\"\n                                       name=\"username\"\n                                       className=\"form-control\"\n                                       placeholder=\"Benutzernamen eingeben\"\n                                       onChange={this.changeHandler}\n                                />\n                            </div>\n                            <div className=\"form-group\">\n                                <label htmlFor=\"email\">E-Mail Addresse:</label>\n                                <input type=\"email\"\n                                       name=\"email\"\n                                       className=\"form-control\"\n                                       placeholder=\"E-Mail Addresse eingeben\"\n                                       onChange={this.changeHandler}\n                                />\n                            </div>\n                            {this.successMessage()}\n                            <input\n                                type=\"submit\"\n                                className=\"btn btn-primary\"\n                                value=\"Passwort zurücksetzen\"\n                            />\n                        </form>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}","import React from \"react\";\nimport { Route, Redirect } from \"react-router-dom\";\nimport {useGlobal} from \"reactn\";\n\nfunction PrivateRoute({ component: Component, ...rest }) {\n\n    const [global,setGlobal] = useGlobal();\n\n    return (\n        <Route\n            {...rest}\n            render={props =>\n                global.loaded ? (\n                    global.authTokens ?\n                    (\n                        <Component {...props} />\n                    )\n                    : (\n                        <Redirect\n                            to={{\n                                pathname: \"/login\",\n                                state: {\n                                    referer: props.location\n                                }\n                            }}\n                        />\n                    )\n                ) : null\n            }\n        />\n    );\n}\n\nexport default PrivateRoute;","//https://medium.com/applike/https-medium-com-applike-react-responsive-conditional-rendering-of-component-c97ab247097d\n\nexport const DeviceWidthObject = {\n\n    MobileSmall      : { max: 320, min: 0 },\n    MobileMedium     : { max: 375, min: 321 },\n    MobileLarge      : { max: 767, min: 376 },\n\n    Tablet           : { max: 991, min: 768 },\n\n    LaptopSmall      : { max: 1024, min: 992 },\n    LaptopLarge      : { max: 1440, min: 1025 },\n\n    LargerThanLaptop : { max: 2560, min: 1441 },\n    LargeScreenMax   : { max: 999999, min: 2561 }\n\n};\n\nexport const IdDeviceBreakpointsByWidth = {\n\n    laptop_max : 1440,\n    laptop_min : 992,\n    tablet_min : 768,\n    tablet_max : 991,\n    mobile_max : 767,\n    default_min : 768 // Unrecognized device\n};\n\nexport const IdMobileHeight = {\n    mobileLandscape_min : 320,\n    mobileLandscape_max : 425\n};\n\nexport const getWindowDimension = () => {\n\n    const width = window.innerWidth\n        || document.documentElement.clientWidth\n        || document.body.clientWidth;\n\n    const height = window.innerHeight\n        || document.documentElement.clientHeight\n        || document.body.clientHeight;\n\n    return {width, height}\n\n};\n\nexport const getDeviceTypeInfo = () => {\n    const { width, height } = getWindowDimension();\n    const buildDeviceDetails = {\n        deviceType: '',\n        deviceTypeVariant: '',\n        orientation: 'Portrait',\n        width,\n        height,\n        isFallback: false\n    };\n//  Edge case\n    const hasEdgeCase = handleExceptions(buildDeviceDetails, width, height);\n    if (hasEdgeCase) {\n        return hasEdgeCase\n    }\n    if (height < width) {\n        // Orientation is landscape\n        buildDeviceDetails.orientation = 'Landscape';\n\n        if (height <= IdMobileHeight.mobileLandscape_max) {\n            // Mobile (landscape)\n            buildDeviceDetails.deviceType = 'Mobile';\n            for (const devc in DeviceWidthObject) {\n                if (\n                    height <= DeviceWidthObject[devc].max &&\n                    height >= DeviceWidthObject[devc].min\n                ) {\n                    buildDeviceDetails.deviceTypeVariant = devc;\n                    break\n                }\n            }\n        } else if (\n            width <= IdDeviceBreakpointsByWidth.tablet_max &&\n            width >= IdDeviceBreakpointsByWidth.tablet_min\n        ) {\n            // Tablet (landscape)\n            buildDeviceDetails.deviceType = 'Tablet';\n            buildDeviceDetails.deviceTypeVariant = 'Tablet';\n        } else if (\n            width <= IdDeviceBreakpointsByWidth.laptop_max &&\n            width >= IdDeviceBreakpointsByWidth.laptop_min\n        ) {\n            // Laptop (landscape)\n            buildDeviceDetails.deviceType = 'Laptop';\n\n            for (const devc in DeviceWidthObject) {\n                if (\n                    width <= DeviceWidthObject[devc].max &&\n                    width >= DeviceWidthObject[devc].min\n                ) {\n                    buildDeviceDetails.deviceTypeVariant = devc;\n                    break\n                }\n            }\n        } else if (width > IdDeviceBreakpointsByWidth.laptop_max) {\n            // Larger than Laptop (landscape)\n            buildDeviceDetails.deviceType = 'LargerThanLaptop';\n\n            for (const devc in DeviceWidthObject) {\n                if (\n                    width <= DeviceWidthObject[devc].max &&\n                    width >= DeviceWidthObject[devc].min\n                ) {\n                    buildDeviceDetails.deviceTypeVariant = devc\n                    break\n                }\n            }\n        } else {\n\n            buildDeviceDetails.deviceType = 'Mobile';\n            buildDeviceDetails.deviceTypeVariant = 'MobileLarge';\n            buildDeviceDetails.isFallback = true\n        }\n\n        return buildDeviceDetails\n    } else {\n        // Orientation is portrait\n        buildDeviceDetails.orientation = 'Portrait';\n\n        for (const devc in DeviceWidthObject) {\n            if (\n                width <= DeviceWidthObject[devc].max &&\n                width >= DeviceWidthObject[devc].min\n            ) {\n                buildDeviceDetails.deviceTypeVariant = devc;\n                break\n            }\n        }\n\n        if (\n            width <= IdDeviceBreakpointsByWidth.laptop_max &&\n            width >= IdDeviceBreakpointsByWidth.laptop_min\n        ) {\n            buildDeviceDetails.deviceType = 'Laptop'\n        }\n\n        if (\n            width <= IdDeviceBreakpointsByWidth.tablet_max &&\n            width >= IdDeviceBreakpointsByWidth.tablet_min\n        ) {\n            buildDeviceDetails.deviceType = 'Tablet'\n        }\n        if (width <= IdDeviceBreakpointsByWidth.mobile_max) {\n            buildDeviceDetails.deviceType = 'Mobile'\n        }\n\n        if (width > IdDeviceBreakpointsByWidth.laptop_max) {\n            buildDeviceDetails.deviceType = 'LargerThanLaptop'\n        }\n\n        return buildDeviceDetails\n    }\n};\n\nconst handleExceptions = (buildDeviceDetails, width, height) => {\n    //  iPadPro\n    if (width === 1024 && height === 1366) {\n        buildDeviceDetails.deviceType = 'Tablet';\n        buildDeviceDetails.deviceTypeVariant = 'iPadPro';\n        buildDeviceDetails.orientation = 'Portrait';\n\n        return buildDeviceDetails\n    } else if (width === 1366 && height === 1024) {\n        //  Edge case\n        buildDeviceDetails.deviceType = 'Tablet';\n        buildDeviceDetails.deviceTypeVariant = 'iPadPro';\n        buildDeviceDetails.orientation = 'Landscape';\n\n        return buildDeviceDetails\n    }\n\n    return undefined\n};","import React from 'react'\nimport {\n    getWindowDimension,\n    IdDeviceBreakpointsByWidth,\n    IdMobileHeight\n} from './utilResponsive';\n\nconst { width, height } = getWindowDimension();\nconst initialState = { width, height };\n\nexport default class Responsive extends React.PureComponent {\n\n    state = initialState;\n    componentDidMount () {\n        window.addEventListener('resize', this.handleResize, false)\n    }\n    componentWillUnmount () {\n        window.removeEventListener('resize', this.handleResize, false)\n    }\n    render = () => {\n        const { children, displayIn } = this.props;\n        const { width, height } = this.state;\n        const shouldRenderChildren = this.shouldRender(displayIn, width, height);\n        return (\n            <React.Fragment>\n                {shouldRenderChildren ? children : null}\n            </React.Fragment>\n        )\n    };\n    handleResize = () => {\n        const { width, height } = getWindowDimension();\n        this.setState({ width, height })\n    };\n    shouldRender = (display, width, height) => {\n        if (\n            display.indexOf('Laptop') !== -1 &&\n            width >= IdDeviceBreakpointsByWidth.laptop_min\n        ) {\n            return true\n        }\n        if (\n            display.indexOf('Tablet') !== -1 &&\n            (width <= IdDeviceBreakpointsByWidth.tablet_max &&\n                width >= IdDeviceBreakpointsByWidth.tablet_min)\n        ) {\n            return true\n        }\n        // For mobile regardless of orientation\n        if (\n            display.indexOf('Mobile') !== -1 &&\n            width <= IdDeviceBreakpointsByWidth.mobile_max\n        ) {\n            return true\n        }\n        if (\n            display.indexOf('MobilePortrait') !== -1 &&\n            (width <= IdDeviceBreakpointsByWidth.mobile_max &&\n                height >= IdMobileHeight.mobileLandscape_max)\n        ) {\n            return true\n        }    return !!(\n            display.indexOf('MobileLandScape') !== -1 &&\n            (width <= IdDeviceBreakpointsByWidth.mobile_max &&\n                height <= IdMobileHeight.mobileLandscape_min)\n        )\n    }\n}","import React,{Component} from \"reactn\";\nimport Responsive from \"../../responsive/Responsive\";\nimport {Link,withRouter} from \"react-router-dom\";\nimport Dummy from \"../../utilComp/Dummy\";\n\nimport \"./headerLeft.scss\";\n\nexport const infoHeaderCenter = {\n    none: 0,\n    normalChat: 1,\n    groupChat: 2\n};\n\nclass HeaderLeft extends Component{\n\n    render() {\n\n        const {pathname} = this.props.location;\n        /*\n            renders number of new messages\n         */\n        const renderNewMsgNumber = () => {\n            if(this.global.newMessages > 0){\n                return (\n                    <div className=\"btnBack-number\">\n                        {this.global.newMessages}\n                    </div>\n                )\n            }\n            return null;\n        };\n\n        const renderBtnBack = () => {\n            /*\n                only small screens\n             */\n            return (\n                <div className=\"float-left left\">\n                    <i id=\"btnBackToChatList\"\n                       className=\"fas fa-arrow-left fa-2x d-block d-md-none\"\n                       onClick={() => {this.props.history.goBack()}}\n                    />\n                    {renderNewMsgNumber()}\n                </div>\n            );\n        };\n\n        const renderChatInfo = () => {\n            /*\n                if there is a normal chat open, this info gets displayed\n             */\n            switch(this.global.infoHeaderCenter){\n\n                case infoHeaderCenter.normalChat:\n                    return (\n                        <HeaderCenter>\n                            <h3 id=\"chat-info-name\">\n                                {this.global.ihcData.name}\n                            </h3>\n                            <Link to={pathname + \"/userInfo/\" + this.global.ihcData.uid}>\n                                <i className=\"fas fa-info-circle fa-2x\"\n                                   data-toggle=\"tooltip\"\n                                   title=\"chat info\"\n                                />\n                            </Link>\n                        </HeaderCenter>\n                    );\n\n                case infoHeaderCenter.groupChat:\n                    return(\n                        <HeaderCenter>\n                            <h3 id=\"chat-info-name\">\n                                {this.global.ihcData.name}\n                            </h3>\n                            <Link to={\"/chat/groupInfo/\" + this.global.ihcData.gcid}>\n                                <i className=\"fas fa-info-circle fa-2x\"\n                                   data-toggle=\"tooltip\"\n                                   title=\"chat info\"\n                                />\n                            </Link>\n                        </HeaderCenter>\n                    );\n\n                default:\n                    return(\n                        <Responsive displayIn={[\"Laptop\",\"Tablet\"]}>\n                            <h3 className=\"pt-2 pl-2\">chat</h3>\n                        </Responsive>\n                    );\n            }\n        };\n\n        return(\n            <Dummy>\n                <Responsive displayIn={[\"Mobile\"]}>\n                    {renderBtnBack()}\n                </Responsive>\n                {renderChatInfo()}\n            </Dummy>\n        )\n    }\n}\nexport default withRouter(HeaderLeft);\n\nfunction HeaderCenter(props){\n    return(\n        <div id=\"chat-info\" className=\"center pt-2\">\n            {props.children}\n        </div>\n    )\n}","import React,{Component} from \"reactn\";\nimport HeaderLeft from \"./HeaderLeft\";\nimport {Link,withRouter} from \"react-router-dom\";\nimport Tooltip from \"rc-tooltip\";\n\nimport 'rc-tooltip/assets/bootstrap_white.css';\n\nimport './header.scss';\n\nclass Header extends Component{\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            checkBoxClicked: false\n        };\n    }\n    clickCheckBox = event => {\n        if(this.state.checkBoxClicked)\n            event.stopPropagation();\n        else {\n            setTimeout(() => {\n                this.setState(state => ({\n                    checkBoxClicked: true\n                }));\n            }, 20);\n        }\n    };\n    clickDocument = event => {\n        if (this.state.checkBoxClicked)\n            this.changeChecked(event);\n    };\n    changeChecked = event => {\n        this.setState(state => ({\n            checkBoxClicked: !state.checkBoxClicked\n        }));\n    };\n\n    logout = () => {\n        /*\n            authTokens are deleted\n         */\n        this.dispatch.deleteAuthTokens();\n    };\n\n    render() {\n\n        const {pathname} = this.props.location;\n\n        return(\n            <div className=\"c-header\">\n\n                <HeaderLeft />\n\n                <div id=\"top-right\" className=\"right\" onClick={this.clickCheckBox}>\n\n                    <div className=\"right-l\" />\n\n                    <input type=\"checkbox\"\n                           id=\"btnControlTopRight\"\n                           className=\"btnControl\"\n                           checked={this.state.checkBoxClicked}\n                           onChange={this.changeChecked}\n                    />\n                    <label htmlFor=\"btnControlTopRight\">\n\n                        <div className=\"right-c\">\n                            <div className=\"d-only-when-small\">\n                                <i  id=\"user-info\"\n                                    className=\"fas fa-user fa-2x user-icon\"\n                                    data-toggle=\"tooltip\"\n                                    title=\"Benutzer-Info\"\n                                />\n                            </div>\n                            <div className=\"d-only-when-big top-2right\">\n\n                                <Link to={pathname + \"/userInfo/\" + this.global.userSelf.uid}>\n                                    <BottomToolTip text=\"Benutzer-Info\">\n                                        <h4 id=\"username\"\n                                            className=\"p-2 username\"\n                                        >\n                                                {this.global.userSelf.username}\n                                        </h4>\n                                    </BottomToolTip>\n                                </Link>\n                                <div className=\"float-right\">\n                                    <Link to={pathname + \"/settings\"}>\n                                        <BottomToolTip text=\"Einstellungen\">\n                                            <i className=\"fas fa-user-cog fa-2x\"/>\n                                        </BottomToolTip>\n                                    </Link>\n                                    &nbsp;\n                                    <BottomToolTip text=\"logout\">\n                                        <i id=\"user-logout\"\n                                           className=\"fas fa-sign-out-alt fa-2x logout\"\n                                           onClick={this.logout}\n                                        />\n                                    </BottomToolTip>\n                                </div>\n\n                            </div>\n                        </div>\n                    </label>\n                </div>\n            </div>\n        )\n    }\n    componentDidMount() {\n        document.addEventListener('click',this.clickDocument,false);\n    }\n    componentWillUnmount() {\n        document.removeEventListener('click',this.clickDocument,false);\n    }\n}\n\nfunction BottomToolTip(props){\n    return(\n        <Tooltip placement=\"bottom\"\n                 trigger={['hover']}\n                 overlay={\n                     <span>{props.text}</span>\n                 }>\n            {props.children}\n        </Tooltip>\n    )\n}\nexport default withRouter(Header);","import React,{Component} from \"react\";\nimport {Link,withRouter} from \"react-router-dom\";\n\nimport \"./chatSearchBox.scss\";\n\nclass ChatSearchBox extends Component{\n\n    searchChanged = event => {\n        this.props.onSearch(event.target.value);\n    };\n\n    render() {\n\n        const {pathname} = this.props.location;\n\n        return(\n            <div className=\"chatSearchBox\">\n                <div className=\"chat-select-form\">\n                    <input\n                        type=\"text\"\n                        name=\"chat-search\"\n                        className=\"chat-search\"\n                        placeholder=\"Chat suchen\"\n                        onChange={this.searchChanged}\n                    />\n                    <Link to={pathname + \"/newChat\"}>\n                        <button id=\"btn-newChat\"\n                                className=\"btn-newChat\"\n                        >\n                            <i className=\"fas fa-plus fa-lg\" />\n                        </button>\n                    </Link>\n                </div>\n            </div>\n        )\n    }\n}\nexport default withRouter(ChatSearchBox);","let Colors = {};\nColors.names = {\n    aqua: \"#00ffff\",\n    black: \"#000000\",\n    blue: \"#0000ff\",\n    brown: \"#a52a2a\",\n    cyan: \"#00ffff\",\n    darkblue: \"#00008b\",\n    darkcyan: \"#008b8b\",\n    darkgrey: \"#a9a9a9\",\n    darkgreen: \"#006400\",\n    darkkhaki: \"#bdb76b\",\n    darkmagenta: \"#8b008b\",\n    darkolivegreen: \"#556b2f\",\n    darkorange: \"#ff8c00\",\n    darkorchid: \"#9932cc\",\n    darkred: \"#8b0000\",\n    darksalmon: \"#e9967a\",\n    darkviolet: \"#9400d3\",\n    fuchsia: \"#ff00ff\",\n    gold: \"#ffd700\",\n    green: \"#008000\",\n    indigo: \"#4b0082\",\n    khaki: \"#f0e68c\",\n    lightblue: \"#add8e6\",\n    lightgreen: \"#90ee90\",\n    lightgrey: \"#d3d3d3\",\n    lightpink: \"#ffb6c1\",\n    lime: \"#00ff00\",\n    magenta: \"#ff00ff\",\n    maroon: \"#800000\",\n    navy: \"#000080\",\n    olive: \"#808000\",\n    orange: \"#ffa500\",\n    pink: \"#ffc0cb\",\n    purple: \"#800080\",\n    violet: \"#800080\",\n    red: \"#ff0000\",\n    silver: \"#c0c0c0\"\n};\nColors.random = function() {\n    let result;\n    let count = 0;\n    for (let prop in this.names)\n        if (Math.random() < 1/++count)\n            result = prop;\n    return result;\n};\nexport default Colors;","\nexport default class BinSearchArray extends Array{\n\n    getIndex(key){\n\n        let left = 0;\n        let right = this.length-1;\n\n        while(left<=right){\n            let k= Math.floor((left+right)/2);\n            if(this[k].key === key)\n                return k;\n            else if(this[k].key < key)\n                left = k+1;\n            else //a[k]>v\n                right = k-1;\n        }\n        return -1;\n    }\n\n    getNearestKey(key){\n        /*\n            besseren Algorithmus finden\n         */\n        let i;\n        ++key;\n\n        while((i = this.getIndex(--key)) === -1){\n            /*\n                wenn key 0 ist, wird vorne eingefügt\n             */\n            if(key === 0) return -1;\n        }\n\n        return i;\n    }\n\n    get(key){\n\n        let i = this.getIndex(key);\n\n        if(i !== -1)\n            return this[i].value;\n\n        return undefined;\n    }\n\n    add(key,value){\n        /*\n            key darf noch nicht vorhanden sein\n         */\n        if(this.getIndex(key) === -1) {\n\n            this.splice(this.getNearestKey(key) + 1, 0, {\n                key: key,\n                value: value\n            });\n        }\n    }\n\n    remove(key){\n\n        let i = this.getIndex(key);\n\n        if(i !== -1)\n            this.splice(i,1);\n    }\n}","import {getGlobal,getDispatch} from 'reactn';\n\nexport async function makeRequest(target,config,tokensP){\n    /*\n        if parameter tokens is defined, this is taken\n        else the one from global\n     */\n    const tokens = tokensP ? tokensP : getGlobal().authTokens;\n\n    const configI = {\n        ...config,\n        method: config.method,\n        headers: {\n            ...config.headers,\n            /*\n                jwt\n             */\n            'Authorization': tokens\n        }\n    };\n\n    const response = await fetch(target,configI);\n    /*\n        http-status 401: jwt timeout\n     */\n    if(response.status === 401){\n        /*\n            autToken is deleted\n         */\n        getDispatch().deleteAuthTokens();\n        /*\n            error is thrown\n         */\n        throw new Error('jwt expired');\n    }\n    return response;\n}","import {makeRequest} from \"../global/requests\";\n\nexport async function selectChats(){\n\n    const config = {\n        method: 'GET',\n        headers: {\n            'Accept': 'application/json'\n        }\n    };\n    /*\n        chats are requested\n     */\n    return await makeRequest('/chats', config);\n}\nexport async function createNormalChat(body){\n\n    const config = {\n        method: 'PUT',\n        headers: {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(body)\n    };\n    return  await makeRequest('/user/chat', config);\n}\nexport async function selectUser(uid){\n\n    const config = {\n        method: 'GET',\n        headers: {\n            'Accept': 'application/json'\n        }\n    };\n    return await makeRequest('/user/' + uid, config);\n}\nexport async function loadMessages(body){\n\n    const config = {\n        method: 'POST',\n        headers: {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(body)\n    };\n    return  await makeRequest('/message/load', config);\n}","import Colors from \"../util/Color\";\nimport BinSearchArray from \"../util/BinSearch\";\nimport chatSocket from \"./chatSocket\";\nimport {selectUser} from \"./apiCalls\";\nimport {getDispatch} from 'reactn';\n\nexport const UserErrorCode = {\n    none: 0,\n    nan: 1,\n    tempChat: 2,\n    userNotExisting: 3,\n    blocked: 4,\n    isSelf: 5,\n    error: 6\n};\n\nexport async function getUserNormalChat(uid){\n    /*\n        does the user exist & does normal chat exist\n     */\n    if(chatSocket.users.getIndex(uid) !== -1){\n        /*\n            does a normalChat exist at the user\n         */\n        if(chatSocket.users.get(uid).normalChat !== 0) {\n\n            return UserErrorCode.none;\n        }else{\n            /*\n                chat does not exist in server\n                it gets created\n             */\n            const user = chatSocket.users.get(uid);\n            chatSocket.temporaryChat.createNew(uid,user.username);\n\n            return UserErrorCode.tempChat;\n        }\n        /*\n            does there exist a temporary chat with this user\n        */\n    }else if(chatSocket.temporaryChat.doesExist(uid)){\n        /*\n            user and chat does not exist in server\n         */\n        return UserErrorCode.tempChat;\n\n    }else{\n        /*\n            request user from server\n         */\n        try {\n            const response = await selectUser(uid);\n            /*\n                if ok, modal is closed\n             */\n            if(response.ok) {\n\n                const data = await response.json();\n\n                if(data.userExists && !data.blocked) {\n\n                    chatSocket.temporaryChat.createNew(uid,data.username);\n                    return UserErrorCode.tempChat;\n\n                }else{\n\n                    if(!data.userExists)\n\n                        return UserErrorCode.userNotExisting;\n\n                    else\n\n                        return UserErrorCode.blocked;\n                }\n\n            }else\n                return UserErrorCode.error;\n\n        }catch(error){\n            return UserErrorCode.error;\n        }\n    }\n}\n\nexport default class User{\n\n    _uid;\n    _username;\n    _color;\n    //ids der chats des Users\n    _normalChat = 0;\n    //ids of the groupchats\n    _groupChats = new BinSearchArray();\n\n    constructor(uid,username) {\n        this.uid = uid;\n        this.username = username;\n        this.color = Colors.random();\n    }\n    /*\n        groupChat is added\n     */\n    addGroupChat(gcid){\n        this.groupChats.add(gcid,gcid);\n    }\n\n    removeGroupChat(gcid){\n        this.groupChats.remove(gcid);\n    }\n\n    updateChatBlockInfo(userInfo){\n        const index = chatSocket.chats.normal.getIndex(this.normalChat);\n        if(index !== -1) {\n            const chat = chatSocket.chats.normal.get(this.normalChat);\n            chat.blockedByOther = userInfo.blockedByOther;\n            chat.blockedBySelf = userInfo.blockedBySelf;\n            getDispatch().updateChat(chat).then(r => {});\n        }\n    }\n\n    get uid() {\n        return this._uid;\n    }\n\n    set uid(value) {\n        this._uid = value;\n    }\n\n    get username() {\n        return this._username;\n    }\n\n    set username(value) {\n        this._username = value;\n    }\n\n    get color() {\n        return this._color;\n    }\n\n    set color(value) {\n        this._color = value;\n    }\n\n    get normalChat() {\n        return this._normalChat;\n    }\n\n    set normalChat(value) {\n        this._normalChat = value;\n    }\n\n    get groupChats() {\n        return this._groupChats;\n    }\n\n    set groupChats(value) {\n        this._groupChats = value;\n    }\n}","\nexport let globalData = {};\n\n/*\n    is called in isLoggedIn in App.js\n */\nexport async function fetchData(){\n\n    const config = {\n        method: 'GET',\n        headers: {\n            'Accept': 'application/json'\n        }\n    };\n    const response = await fetch('/data.json', config);\n\n    if(response.ok){\n\n        globalData = await response.json();\n    }else{\n        throw new Error();\n    }\n}","import React from \"react\";\nimport {makeRequest} from \"../../../../global/requests\";\n\nexport default function File(props){\n\n    const getFile = async () => {\n        const response = await makeRequest('/message/file/' + props.file.fid + '/' + props.file.fileName, {\n            method: 'GET'\n        })\n        // https://stackoverflow.com/a/42274086/12913973\n        const blob = await response.blob()\n        const url = window.URL.createObjectURL(blob);\n        const a = document.createElement('a');\n        a.href = url;\n        a.download = props.file.fileName;\n        document.body.appendChild(a); // we need to append the element to the dom -> otherwise it will not work in firefox\n        a.click();\n        a.remove();  //afterwards we remove the element again\n    }\n\n    return(\n        <div className=\"file\">\n            <i className=\"far fa-lg fa-file\"/>\n            &nbsp;\n            {props.file.fileName}\n            &nbsp;\n            <div\n                className=\"download\"\n                onClick={getFile}\n            >\n                <i className=\"fas fa-arrow-down\"/>\n            </div>\n        </div>\n    )\n}","import React from \"react\";\nimport {UsernameSpan} from \"./Message\";\nimport File from \"./File\";\n\nexport default function NormalMessage(props){\n\n    const msg = props.msg;\n\n    return(\n        <div className={\n            (msg.bySelf ? \"self \" : \"other \") +\n            \"msg-container\"\n        }>\n            {msg.userTop ?\n                <div className=\"w-100\">\n                    <strong className=\"header\">\n                        <UsernameSpan user={msg.userTop}/>\n                    </strong>\n                </div>\n                : null}\n            <div className=\"content\">\n                {msg.content.files.map((item,index) => (\n                    <File key={index} file={item}/>\n                ))}\n                <MessageText\n                    text={msg.content.text}\n                />\n            </div>\n            <div className=\"date-outer\">\n                <div className=\"date\">\n                    {msg.mDateString}\n                </div>\n            </div>\n        </div>\n    )\n}\nfunction MessageText(props){\n\n    const linkRegex = new RegExp(/(\\b(?:https?:\\/\\/)?(?:(?:[a-z]+\\.)+)[^\\s,]+\\b)/g)\n    const httpRegex = new RegExp(/(https?:\\/\\/)/igm);\n\n    function getHref(word){\n        if(httpRegex.test(word))\n            return word;\n        else {\n            return \"https://\" + word\n        }\n    }\n    // split text\n    const words = props.text.split(linkRegex)\n\n    return (\n        <p>\n            {words.map((word) => {\n                if(linkRegex.test(word))\n                    return <a href={getHref(word)} target={\"_blank\"} rel={\"noreferrer\"}>{word}</a>\n                else\n                    return word\n            })}\n        </p>\n    )\n}","import React from \"react\";\nimport Dummy from \"../../../../utilComp/Dummy\";\nimport {getStatusMessageString} from \"../../../../chatData/message/statusMessage\";\n\nexport default function StatusMessage(props){\n\n    const msg = props.msg;\n\n    return(\n        <div className={\n            (msg.bySelf ? \"self \" : \"other \") +\n            \"msg-container\"\n        }>\n            <StatusMsgContent msg={msg}/>\n            <div className=\"date-outer\">\n                <div className=\"date\">\n                    {msg.mDateString}\n                </div>\n            </div>\n        </div>\n    );\n}\nfunction StatusMsgContent(props) {\n\n    const msg = props.msg;\n\n    return(\n        <Dummy>\n            {getStatusMessageString(msg,true)}\n        </Dummy>\n    );\n}","import React from \"react\";\nimport {globalData} from \"../../../../global/globalData\";\nimport NormalMessage from \"./NormalMessage\";\nimport StatusMessage from \"./StatusMessage\";\nimport Colors from \"../../../../util/Color\";\n\nimport './message.scss'\n\nexport default function Message(props){\n\n    const msg = props.msg;\n\n    switch (msg.type) {\n\n        case globalData.messageTypes.normalMessage: {\n\n            return (\n                <div className={\"msg-container-outer\"}>\n                    <NormalMessage msg={msg}/>\n                </div>\n            )\n        }\n\n        case globalData.messageTypes.statusMessage: {\n\n            return (\n                <div className={\"msg-container-outer\"}>\n                    <StatusMessage msg={msg}/>\n                </div>\n            );\n        }\n\n        default:\n            return <span />;\n    }\n}\n\nexport function UsernameSpan(props){\n\n    return(\n        <span\n            style={{\n                color: Colors.names[props.user.color]\n            }}>\n                {props.user.username}\n        </span>\n    );\n}","import {UsernameSpan} from \"../../Home/chatView/chatContainer/message/Message\";\nimport {globalData} from \"../../global/globalData\";\nimport React from \"react\";\nimport chatSocket from \"../chatSocket\";\n\nexport const middleStringD = {\n    hatHast: 0,\n    ist: 1\n};\n\nexport const statusMessagesD = [\n    \"den Chat erstellt\",            //0\n    \"zum Chat hinzugefügt\",         //1\n    \"aus dem Chat entfernt\",        //2\n    \"dem Chat beigetreten\",         //3\n    \"den Chat verlassen\",           //4\n    \"zum Admin befördert\",          //5\n    \"den Admin-Status entfernt\",    //6\n    \"nicht mehr Admin\",             //7\n    \"den Chatnamen geändert\",       //8\n    \"die Chat-Beschreibung geändert\",    //9\n    \"Sichtbarkeit des Chats geändert\", //10\n];\n\nexport function getStatusMessageString(msg,useReact){\n\n    return getStatusMessageStringD();\n\n    function getStatusMessageStringD() {\n\n        const userTop = msg.userTop;\n        const passiveUsers = msg.content.passiveUsers;\n\n        switch (msg.content.type) {\n\n            case globalData.statusMessageTypes.chatCreated:\n                return renderStringD(\n                    userTop,\n                    middleStringD.hatHast,\n                    passiveUsers,\n                    globalData.statusMessageTypes.chatCreated\n                );\n\n            case globalData.statusMessageTypes.usersAdded:\n                return renderStringD(\n                    userTop,\n                    middleStringD.hatHast,\n                    passiveUsers,\n                    globalData.statusMessageTypes.usersAdded\n                );\n\n            case globalData.statusMessageTypes.usersRemoved:\n                return renderStringD(\n                    userTop,\n                    middleStringD.hatHast,\n                    passiveUsers,\n                    globalData.statusMessageTypes.usersRemoved\n                );\n\n            case globalData.statusMessageTypes.usersJoined:\n                return renderStringD(\n                    userTop,\n                    middleStringD.ist,\n                    [],\n                    globalData.statusMessageTypes.usersJoined\n                );\n\n            case globalData.statusMessageTypes.usersLeft:\n                return renderStringD(\n                    userTop,\n                    middleStringD.hatHast,\n                    [],\n                    globalData.statusMessageTypes.usersLeft\n                );\n\n            case globalData.statusMessageTypes.usersMadeAdmin:\n                return renderStringD(\n                    userTop,\n                    middleStringD.hatHast,\n                    passiveUsers,\n                    globalData.statusMessageTypes.usersMadeAdmin\n                );\n\n            case globalData.statusMessageTypes.usersRemovedAdmin:\n                return renderStringD(\n                    userTop,\n                    middleStringD.ist,\n                    [],\n                    globalData.statusMessageTypes.usersRemovedAdmin\n                );\n\n            case globalData.statusMessageTypes.userResignedAdmin:\n                return renderStringD(\n                    userTop,\n                    middleStringD.ist,\n                    [],\n                    globalData.statusMessageTypes.userResignedAdmin\n                )\n\n            case globalData.statusMessageTypes.chatNameChanged:\n                return renderStringD(\n                    userTop,\n                    middleStringD.hatHast,\n                    [],\n                    globalData.statusMessageTypes.chatNameChanged\n                )\n\n            case globalData.statusMessageTypes.descriptionChanged:\n                return renderStringD(\n                    userTop,\n                    middleStringD.hatHast,\n                    [],\n                    globalData.statusMessageTypes.descriptionChanged\n                )\n\n            case globalData.statusMessageTypes.isPublicChanged:\n                return renderStringD(\n                    userTop,\n                    middleStringD.hatHast,\n                    [],\n                    globalData.statusMessageTypes.isPublicChanged\n                )\n\n            default:\n                break;\n        }\n    }\n\n    function renderStringD(userTop,middle,passiveUsers,statusMessage){\n\n        function getMiddleString(){\n\n            // eslint-disable-next-line default-case\n            switch (middle) {\n\n                case middleStringD.hatHast:\n                    return msg.bySelf ? ' hast ' : ' hat ';\n\n                case middleStringD.ist:\n                    return msg.bySelf ? ' bist ' : ' ist ';\n            }\n        }\n\n        function getPassiveUsers(){\n\n            if(passiveUsers.length < 1 ){\n                return \"\";\n            }else if(passiveUsers.length === 1){\n\n                if(uidSelfInPassiveUsers())\n                    return \"dich \";\n                else {\n                    const user = chatSocket.users.get(passiveUsers[0]);\n\n                    if (user)\n                        if (useReact)\n                            return (\n                                <UsernameSpan user={user}/>\n                            );\n                        else\n                            return user.username;\n                    else\n                        return \"1 Benutzer\";\n                }\n            }else{\n                if(passiveUsers.length === 2 && uidSelfInPassiveUsers())\n                    return \"dich und einen weiteren Benutzer\";\n                else if(uidSelfInPassiveUsers())\n                    return \"dich und \" + (passiveUsers.length - 1) + \" weitere Benutzer \"\n                else\n                    return passiveUsers.length + \" Benutzer\";\n            }\n        }\n\n        function uidSelfInPassiveUsers() {\n            for(const passiveUser of passiveUsers){\n                if(passiveUser === chatSocket.userSelf.uid)\n                    return true;\n            }\n            return false;\n        }\n\n        function getTString(){\n            return \" \" + statusMessagesD[statusMessage];\n        }\n\n        if(useReact)\n            return(\n                <span>\n                    <UsernameSpan user={msg.userTop}/>\n                    {getMiddleString()}\n                    {getPassiveUsers()}\n                    {getTString()}\n                </span>\n            );\n        else\n            return msg.userTop.username + getMiddleString() + getPassiveUsers() + getTString();\n    }\n\n}","import chatSocket from \"../chatSocket\";\nimport {globalData} from \"../../global/globalData\";\nimport {getStatusMessageString} from \"./statusMessage\";\n\nexport function isDifferentDay(date1,date2){\n    return date1.getDay() !== date2.getDay()\n        || date1.getMonth() !== date2.getMonth()\n        || date1.getFullYear() !== date2.getFullYear();\n}\n\nexport default class Message {\n\n    _mid;\n    _uid;\n    _date;\n    _chat;\n    _type;\n    _content;\n\n    constructor(\n        mid,\n        uid,\n        chat,\n        date = new Date(Date.now()),\n        type,\n        content\n    ) {\n        this.mid = mid;\n        this.uid = uid;\n        this.date = date;\n        //type: object of Chat\n        this.chat = chat;\n        this.type = type;\n        this.content = content;\n    }\n    /*\n        a object representing the message is returned\n     */\n    getMessageObject(userTopShown){\n\n        const message = {\n            mDateString: this.getMessageViewDateString(),\n            dateString: this.getDateString(),\n            date: this.date,\n            bySelf: this.uid === chatSocket.userSelf.uid,\n            type: this.type,\n            content: this.content\n        };\n        /*\n            if the user top should be shown, the property is added\n         */\n        if(userTopShown)\n            message.userTop = this.getUserTop();\n\n        return message;\n    }\n    /*\n        a object for the userinfo at the top of the message is returned\n     */\n    getUserTop(){\n        /*\n            is the message written by the user self?\n         */\n        if(this.isBySelf())\n            return {\n                uid: this.uid,\n                username: 'Du',\n                color: chatSocket.userSelf.color\n            };\n        /*\n            if the user is not self\n         */\n        const user = chatSocket.users.get(this.uid);\n        return {\n            uid: this.uid,\n            username: user.username,\n            color: user.color\n        };\n    }\n    /*\n        is the message by the client self?\n     */\n    isBySelf(){\n        return this.uid === chatSocket.userSelf.uid;\n    }\n\n    getChatViewDateString(){\n        /*\n            Wenn weniger als 1 Tag her: Uhrzeit\n         */\n        if(this.isDateToday()){\n\n            return 'heute ' + this.getTimeString();\n        }\n        /*\n            Wenn gestern: gestern\n         */\n        else if(this.isDateYesterday()){\n\n            return 'gestern';\n        }\n        /*\n            sonst: Datum\n         */\n        else{\n            return this.getDateString();\n        }\n    }\n\n    getChatViewMsgString(){\n\n        // eslint-disable-next-line default-case\n        switch(this.type) {\n\n            case globalData.messageTypes.normalMessage: {\n\n                let msgString = this.content.text;\n                /*\n                    Wenn string länger als 18 Zeichen, wird verkürzt\n                 */\n                if(msgString.length > 18)\n                msgString = msgString.substr(0, 18) + '...';\n                /*\n                    wenn selbst geschrieben, steht Du: davor\n                 */\n                if(this.uid === chatSocket.userSelf.uid)\n                    return`Du: ${msgString}`;\n\n                else if (this.chat.type === 'normalchat')\n                    return this.content.text;\n\n                else\n                    return `${chatSocket.users.get(this.uid).username}: ${msgString}`;\n            }\n            case globalData.messageTypes.statusMessage: {\n\n                return getStatusMessageString(\n                    this.getMessageObject(true),\n                    false\n                );\n            }\n        }\n    }\n\n    getMessageViewDateString(){\n        if(this.isDateToday()){\n\n            return this.getTimeString();\n        }\n        else if(this.isDateYesterday()){\n\n            return 'gestern ' + this.getTimeString();\n        }else{\n\n            return this.getDateString() + ' ' + this.getTimeString();\n        }\n    }\n\n    isDateToday(){\n        const dateNow = new Date(Date.now());\n        return this.date.getDate() === dateNow.getDate() &&\n            this.date.getMonth() === dateNow.getMonth() &&\n            this.date.getFullYear() === dateNow.getFullYear();\n    }\n\n    isDateYesterday(){\n        const dateNow = new Date(Date.now());\n        return this.date.getDate() === dateNow.getDate() - 1 &&\n            this.date.getMonth() === dateNow.getMonth() &&\n            this.date.getFullYear() === dateNow.getFullYear();\n    }\n\n    getDateString(){\n        const d = this.date.getDate();\n        let ds;\n        if(d<10)\n            ds = '0'+d;\n        else\n            ds = d;\n        const m = this.date.getMonth();\n        let ms;\n        if(m+1<10)\n            ms = '0'+(m+1);\n        else\n            ms = m+1;\n        const y = this.date.getFullYear();\n\n        return `${ds}.${ms}.${y}`;\n    }\n\n    getTimeString(){\n        const h = this.date.getHours();\n        let hs;\n        if(h<10)\n            hs = '0'+h;\n        else\n            hs = h;\n        const m = this.date.getMinutes();\n        let ms;\n        if(m<10)\n            ms = '0'+m;\n        else\n            ms = m;\n\n        return `${hs}:${ms}`;\n    }\n    /*\n        check if date 2 is on an other day\n     */\n    isDifferentDay(date2){\n        return this.date.getDate() !== date2.getDate()\n            || this.date.getMonth() !== date2.getMonth()\n            || this.date.getFullYear() !== date2.getFullYear();\n    }\n\n    get mid() {\n        return this._mid;\n    }\n\n    set mid(value) {\n        this._mid = value;\n    }\n\n    get uid() {\n        return this._uid;\n    }\n\n    set uid(value) {\n        this._uid = value;\n    }\n\n    get date() {\n        return this._date;\n    }\n\n    set date(value) {\n        this._date = value;\n    }\n\n    get chat() {\n        return this._chat;\n    }\n\n    set chat(value) {\n        this._chat = value;\n    }\n\n    get type() {\n        return this._type;\n    }\n\n    set type(value) {\n        this._type = value;\n    }\n\n    get content() {\n        return this._content;\n    }\n\n    set content(value) {\n        this._content = value;\n    }\n}","export default class EventHandler{\n\n    _events;\n\n    constructor() {\n        this.events = new Map();\n    }\n\n    /*\n        event-handler wird hinzugefügt\n     */\n    on(event,fn){\n        /*\n            wenn event in Map vorhanden, wird event hinzugefügt\n         */\n        if(this.events.has(event))\n            this.events.get(event).push(fn);\n        /*\n            wenn event in map noch nicht vorhanden,\n            wird entry in map hinzugefügt\n         */\n        else\n            this.events.set(event,[fn]);\n    }\n    /*\n        event-handler wird entfernt\n     */\n    rm(event,fn){\n        /*\n            wenn event existiert\n         */\n        if(this.events.has(event)){\n            const e = this.events.get(event)\n            for(let i=0;i<e.length;i++)\n                //wenn element die gesuchte function, wird sie gelöscht\n                if(e[i] === fn)\n                    e.splice(i,1);\n        }\n    }\n    /*\n        alle registrierten functions eines events werden ausgelöst\n     */\n    trigger(event,...rest){\n        /*\n            wenn event existiert\n         */\n        if(this.events.has(event)){\n            /*\n                es werden alle functions aufgerufen\n             */\n            const e = this.events.get(event)\n            for(let i = 0;i < e.length;i++)\n                e[i](...rest);\n        }\n    }\n\n    get events() {\n        return this._events;\n    }\n\n    set events(value) {\n        this._events = value;\n    }\n}","import BinSearchArray from \"../../util/BinSearch\";\nimport Message from \"../message/message\";\nimport EventHandler from \"../../util/Event\";\nimport {getDispatch} from 'reactn';\nimport {loadMessages} from \"../apiCalls\";\nimport chatSocket from \"../chatSocket\";\n\nexport class Chat {\n\n    _type;\n    _id;\n    _chatName;\n    _messages = new BinSearchArray();\n    _event = new EventHandler();\n    _unreadMessages = 0;\n    /*\n        are all messages already loaded?\n     */\n    _reachedTopMessages = false;\n    _latestMsgDate;\n\n    constructor(type, id,chatName) {\n        this.type = type;\n        this.id = id;\n        this.chatName = chatName;\n    }\n    /*\n        the first message of the object is initialized\n     */\n    initFirstMessage(messageData){\n\n        if(messageData.canBeShown === undefined)\n            messageData.canBeShown = true;\n\n        if(!messageData.empty && messageData.canBeShown)\n            this.messages.add(\n                messageData.mid,\n                new Message(\n                    messageData.mid,\n                    messageData.uid,\n                    this,\n                    new Date(messageData.date),\n                    messageData.type,\n                    messageData.content\n                )\n            );\n        else if(messageData.date){\n            this.latestMsgDate = new Date(messageData.date);\n        }\n    }\n    /*\n        reload messages\n     */\n    async reloadMessages(){\n        // override messages with empty array\n        this.messages = new BinSearchArray();\n        this.reachedTopMessages = false;\n        // load messages\n        await this.loadMessages(10);\n    }\n    /*\n        messages are loaded\n     */\n    async loadMessages(num){\n        /*\n            messages are only loaded, if top not already reached\n         */\n        if(!this.reachedTopMessages) {\n\n            const getLastMsgId = () => {\n                const msg = this.getLastMessage();\n                if (msg !== null)\n                    return msg.mid;\n                return -1;\n            };\n            /*\n                messages are loaded from server\n             */\n            const response = await loadMessages({\n                chatType: this.type,\n                chatId: this.id,\n                lastMsgId: getLastMsgId(),\n                num: num\n            });\n\n            if (response.ok) {\n\n                const data = await response.json();\n                /*\n                    is top already reached?\n                 */\n                this.reachedTopMessages = data.status === 'reached top';\n\n                const lMessages = data.messages;\n                /*\n                    the array that will be returned\n                 */\n                const messages = new Array(lMessages.length);\n                const userTopShown = this.showUserInfoMessage();\n\n                for (let i = lMessages.length - 1; i >= 0; i--) {\n\n                    const messageData = lMessages[i];\n                    /*\n                        message is created\n                     */\n                    const message =\n                        new Message(\n                            messageData.mid,\n                            messageData.uid,\n                            this,\n                            new Date(messageData.date),\n                            messageData.type,\n                            messageData.content\n                        );\n                    /*\n                        message is added to chat\n                     */\n                    this.messages.add(\n                        messageData.mid,\n                        message\n                    );\n                    messages[i] = message.getMessageObject(userTopShown);\n                }\n                return messages;\n            }\n            throw new Error();\n        }\n    }\n    /*\n        gibt die Nachricht, die am längsten zurück liegt, zurück\n     */\n    getLastMessage(){\n        if (this.messages.length !== 0)\n            return this.messages[0].value;\n        return null;\n    }\n    /*\n        gibt die neueste Nachricht im chat zurück\n     */\n    getFirstMessage(){\n        if (this.messages.length !== 0)\n            return this.messages[this.messages.length - 1].value;\n        return null;\n    }\n    /*\n        returns all messages in an array\n            userTopShown    should the user at the top be shown?\n     */\n    getMessages(){\n\n        const userTopShown = this.showUserInfoMessage();\n        const rMessages = new Array(this.messages.length);\n\n        for(let i=0;i<this.messages.length;i++){\n\n            const message = this.messages[i].value;\n            rMessages[i] = message.getMessageObject(userTopShown);\n        }\n\n        return rMessages;\n    }\n    /*\n        neue Nachricht wird hinzugefügt\n     */\n    addMessage(uid,mid,type,content){\n        const message =\n            new Message(\n                mid,\n                uid,\n                this,\n                new Date(Date.now()),\n                type,\n                content\n            );\n        this.messages.add(mid,message);\n        getDispatch().newMsg(\n            this,\n            this.unreadMessages,\n            message.getMessageObject(\n                this.showUserInfoMessage()\n            ));\n    }\n    /*\n        should the userInfo at the messages be shown (--> only in groupChats)\n     */\n    showUserInfoMessage(){\n        return(this.type === 'groupChat')\n    }\n    /*\n        an object of this chat is returned\n     */\n    getChatObject(){\n        return {\n            type: this.type,\n            id: this.id,\n            chatName: this.chatName,\n            latestMessage: this.getLatestMessageObject(),\n            unreadMessages: this.unreadMessages,\n            isStillMember: this.type !== 'groupChat' || this.isStillMember,\n            blockedBySelf: this.isBlockedBySelf(),\n            blockedByOther: this.isBlockedByOther()\n        };\n    }\n    isBlockedBySelf = () => {\n        if(this.type !== 'normalChat')\n            return false;\n        return this.blockedBySelf\n    }\n    isBlockedByOther = () => {\n        if(this.type !== 'normalChat')\n            return false;\n        return this.blockedByOther\n    }    /*\n        an object with the latest message is returned\n     */\n    getLatestMessageObject(){\n        // get first message\n        const lm = this.getFirstMessage();\n        // does it return something else than null\n        if(lm) {\n            return {\n                msgString: lm.getChatViewMsgString(),\n                dateString: lm.getChatViewDateString(),\n                date: lm.date\n            };\n        }\n        else if(this.latestMsgDate) {\n            return {\n                msgString: \"\",\n                dateString: \"\",\n                date: this.latestMsgDate\n            };\n        }\n        else return null;\n    }\n    /*\n        reload the messages of the chat\n        // TODO update members\n     */\n    async updateChat(data,isStillMember){\n        // if the chat is the current chat, select none\n        const isCurrentChat = chatSocket.isCurrentChat(data.type,data.id);\n        if(isCurrentChat)\n            await getDispatch().selectNoChat();\n        this.isStillMember = isStillMember;\n        // reload all messages\n        await this.reloadMessages();\n        // select chat again\n        if(isCurrentChat) {\n            await getDispatch().selectChat(this);\n        }\n        const message = this.getFirstMessage();\n        await getDispatch().updateChat(this);\n        await getDispatch().newMsg(this, 1, message.getMessageObject(true));\n    }\n\n    get type() {\n        return this._type;\n    }\n\n    set type(value) {\n        this._type = value;\n    }\n\n    get id() {\n        return this._id;\n    }\n\n    set id(value) {\n        this._id = value;\n    }\n\n    get messages() {\n        return this._messages;\n    }\n\n    set messages(value) {\n        this._messages = value;\n    }\n\n    get chatName() {\n        return this._chatName;\n    }\n\n    set chatName(value) {\n        this._chatName = value;\n    }\n\n    get event() {\n        return this._event;\n    }\n\n    set event(value) {\n        this._event = value;\n    }\n\n    get unreadMessages() {\n        return this._unreadMessages;\n    }\n\n    set unreadMessages(value) {\n        this._unreadMessages = value;\n    }\n\n    get reachedTopMessages() {\n        return this._reachedTopMessages;\n    }\n\n    set reachedTopMessages(value) {\n        this._reachedTopMessages = value;\n    }\n\n    get latestMsgDate() {\n        return this._latestMsgDate;\n    }\n\n    set latestMsgDate(value) {\n        this._latestMsgDate = value;\n    }\n}\n","import chatSocket from \"../chatSocket\";\nimport {Chat} from \"./chat\";\n\nexport class NormalChat extends Chat{\n\n    _otherUser;\n    _isTyping = false;\n    // block info\n    _blockedBySelf;\n    _blockedByOther;\n\n    constructor(id,chatName,uid,unreadMessages = 0,blockedBySelf,blockedByOther) {\n        super('normalChat',id,chatName);\n        this.otherUser = uid;\n        this.unreadMessages = unreadMessages;\n        this.blockedBySelf = blockedBySelf;\n        this.blockedByOther = blockedByOther;\n    }\n\n    getUsersTyping(){\n        if(this.isTyping) {\n            const user = chatSocket.users.get(this.otherUser);\n            return [\n                {\n                    uid: user.uid,\n                    username: user.username\n                }\n            ];\n        }\n        return [];\n    }\n    /*\n        gibt den user zurück, der erst die kürzeste Zeit schreibt\n     */\n    getLatestUserTyping(){\n        if(this.isTyping) {\n            const user = chatSocket.users.get(this.otherUser);\n            return {\n                uid: user.uid,\n                username: user.username\n            };\n        }\n        return null;\n    }\n    /*\n        is called when a user started typing\n     */\n    startedTyping(uid){\n        if(uid === this.otherUser){\n            this.isTyping = true;\n            this.event.trigger(\"typeState changed\");\n        }\n    }\n    /*\n        is called when a user stopped typing\n     */\n    stoppedTyping(uid){\n        if(uid === this.otherUser){\n            this.isTyping = false;\n            this.event.trigger(\"typeState changed\");\n        }\n    }\n\n    get otherUser() {\n        return this._otherUser;\n    }\n\n    set otherUser(value) {\n        this._otherUser = value;\n    }\n\n    get isTyping() {\n        return this._isTyping;\n    }\n\n    set isTyping(value) {\n        this._isTyping = value;\n    }\n\n    get blockedBySelf() {\n        return this._blockedBySelf;\n    }\n\n    set blockedBySelf(value) {\n        this._blockedBySelf = value;\n    }\n\n    get blockedByOther() {\n        return this._blockedByOther;\n    }\n\n    set blockedByOther(value) {\n        this._blockedByOther = value;\n    }\n}","import chatSocket from \"../chatSocket\";\nimport {Chat} from \"./chat\";\n\nexport class GroupChat extends Chat{\n    //array with uids\n    _users = [];\n    //Array mit uids von den usern, die gerade schreibem\n    _usersTyping = [];\n    _isStillMember;\n\n    constructor(id,chatName,uids,unreadMessages = 0,isStillMember) {\n        super('groupChat',id,chatName);\n        this.users = uids;\n        this.unreadMessages = unreadMessages;\n        this.isStillMember = isStillMember;\n    }\n\n    getUsersTyping(){\n        if(this.usersTyping.length > 0) {\n\n            let rc = [];\n            for(let i=0;i<this.usersTyping.length;i++){\n                const user = chatSocket.users.get(this.usersTyping[i]);\n                rc.push({\n                    uid: user.uid,\n                    username: user.username\n                });\n            }\n            return rc;\n        }\n        return [];\n    }\n    /*\n        gibt den user zurück, der am neuestem schriebt\n     */\n    getLatestUserTyping(){\n        if(this.usersTyping.length > 0) {\n            const user = chatSocket.users.get(this.usersTyping[this.usersTyping.length - 1]);\n            return {\n                uid: user.uid,\n                username: user.username\n            };\n        }\n        return null;\n    }\n    /*\n        is called when a user started typing\n     */\n    startedTyping(uid){\n        if(this.isMember(uid)){\n            if(!this.isTyping(uid)){\n                /*\n                    the user is added to the currently typing users\n                 */\n                this.usersTyping.push(uid);\n                this.event.trigger(\"typeState changed\");\n            }\n        }\n    }\n    /*\n        is called when a user stopped typing\n     */\n    stoppedTyping(uid){\n        if(this.isMember(uid)){\n            if(this.isTyping(uid)){\n                /*\n                    user is removed from the array of currently typing users\n                 */\n                this.usersTyping.splice(this.getIndexOfTyping(uid),1);\n                this.event.trigger(\"typeState changed\");\n            }\n        }\n    }\n    /*\n        returns true if the uid is member of the chat and not self\n     */\n    isMember(uid){\n        if(uid === chatSocket.userSelf.uid)\n            return false;\n        return this.users.find(e => e === uid);\n    }\n    /*\n        returns true if the user is currently typing\n     */\n    isTyping(uid){\n        return this.usersTyping.find(e => e === uid);\n    }\n    /*\n        returns the index of a currently typing user\n     */\n    getIndexOfTyping(uid){\n        return this.usersTyping.findIndex(e => e === uid);\n    }\n\n    get users() {\n        return this._users;\n    }\n\n    set users(value) {\n        this._users = value;\n    }\n\n    get usersTyping() {\n        return this._usersTyping;\n    }\n\n    set usersTyping(value) {\n        this._usersTyping = value;\n    }\n\n    get isStillMember() {\n        return this._isStillMember;\n    }\n\n    set isStillMember(value) {\n        this._isStillMember = value;\n    }\n}","import {NormalChat} from \"./chat/normalChat\";\nimport chatSocket from \"./chatSocket\";\nimport User from \"./user\";\nimport Message from \"./message/message\";\nimport {getDispatch} from 'reactn';\nimport {globalData} from \"../global/globalData\";\nimport {createNormalChat} from \"./apiCalls\";\n\nexport default class TempChatLoader{\n\n    _isShown = false;\n    _chatNow;\n    /*\n        a new temporary chat gets created.\n        parameters uid and username required\n     */\n    createNew(uid,username){\n        this.chatNow = new NormalChat(0, username, uid);\n    }\n    /*\n        is the current tempChat already the one with this uid?\n     */\n    doesExist(uid){\n        if(this.chatNow === undefined)\n            return false;\n        return this.chatNow.otherUser === uid;\n    }\n    /*\n        tempChat gets shown\n     */\n    show(){\n        this.isShown = true;\n        getDispatch().showTempChat(this.chatNow);\n    }\n\n    update(){\n        getDispatch().updateTempChat(this.chatNow);\n    }\n\n    hide(){\n        this.isShown = false;\n        getDispatch().hideTempChat();\n    }\n    /*\n        a new normalChat is created out of the current tempChat\n     */\n    async createNewNormalChat(messageContentSelf,messageContentSend){\n\n        /*\n            the request gets sent to the server\n         */\n        const otherUid = this.chatNow.otherUser;\n        const otherUsername = this.chatNow.chatName;\n\n        const response = await createNormalChat({\n            uid: otherUid,\n            username: otherUsername,\n            message: {\n                type: globalData.messageTypes.normalMessage,\n                content: messageContentSend\n            }\n        });\n\n        if(response.ok){\n\n            const data = await response.json();\n\n            if(chatSocket.users.getIndex(otherUid) === -1){\n                chatSocket.users.add(otherUid,new User(otherUid,otherUsername));\n            }\n            const otherUser = chatSocket.users.get(otherUid);\n\n            const newChat = new NormalChat(data.ncid,otherUsername,otherUid);\n            /*\n                chat gets added to user\n             */\n            otherUser.normalChat = newChat.id;\n            /*\n                chat is added in binsearchArray\n             */\n            chatSocket.chats.normal.add(data.ncid,newChat);\n            /*\n                message is added to chat\n             */\n            const message = new Message(\n                data.mid,\n                chatSocket.userSelf.uid,\n                newChat,\n                new Date(Date.now()),\n                globalData.messageTypes.normalMessage,\n                messageContentSelf\n            );\n            newChat.messages.add(message.mid,message);\n\n            //args: chat\n            await getDispatch().addChat(newChat);\n            /*\n                currentChat gets changed\n             */\n            await getDispatch().selectChat(newChat);\n            /*\n                tempChat is hidden\n             */\n            this.hide();\n\n            return true;\n        }\n\n        return false;\n\n    }\n\n    get isShown() {\n        return this._isShown;\n    }\n\n    set isShown(value) {\n        this._isShown = value;\n    }\n\n    get chatNow() {\n        return this._chatNow;\n    }\n\n    set chatNow(value) {\n        this._chatNow = value;\n    }\n}\n\n","import io from 'socket.io-client';\nimport User from \"./user\";\nimport BinSearchArray from \"../util/BinSearch\";\nimport {NormalChat} from './chat/normalChat';\nimport {GroupChat} from \"./chat/groupChat\";\nimport EventHandler from \"../util/Event\";\nimport TempChatLoader from \"./tempChatLoader\";\nimport {getGlobal,getDispatch} from 'reactn';\nimport {selectChats} from \"./apiCalls\";\n\nclass ChatSocket{\n\n    _socket;\n    _userSelf = {\n        uid: 0,\n        username: \"\"\n    };\n    _users = new BinSearchArray();\n    _chats = {\n        normal: new BinSearchArray(),\n        group: new BinSearchArray()\n    };\n    _event = new EventHandler();\n    _finishedLoading = false;\n    /*\n        normalchat not saved in the database\n     */\n    _temporaryChat = new TempChatLoader();\n    _initCalled = false;\n\n    destruct(){\n\n        if(this.socket) {\n            this.socket.removeAllListeners();\n            this.socket.disconnect();\n        }\n        this.initCalled = false;\n    }\n\n    async init(){\n\n        const {uid,username} = getGlobal().userSelf;\n        /*\n            user-Object is created\n         */\n        this.userSelf = new User(uid,username);\n\n        this.userInfo = {\n            uid: uid,\n            username: username\n        };\n\n        this.initCalled = true;\n\n        this.userSelf = new User(uid,username);\n\n        this.userInfo = {\n            uid: uid,\n            username: username\n        };\n\n        this.socket = io.connect('/', {secure: true});\n        /*\n            authTokens are sent to client\n         */\n        this.socket.emit('auth', getGlobal().authTokens);\n        /*\n            is called when user is initialized\n         */\n        this.socket.on('initialized',() => {\n\n            this.initChats();\n        });\n        /*\n            msg-handler\n         */\n        this.socket.on('chat message',data => {\n            /*\n                gets chat of msg\n                adds this message to chat\n            */\n            const chat = this.getChat(\n                data.chat.type,\n                data.chat.id\n            );\n            if(chat !== null) {\n                const isCurrentChat = this.isCurrentChat(\n                    chat.type,\n                    chat.id\n                );\n                chat.addMessage(\n                    data.uid,\n                    data.mid,\n                    data.type,\n                    data.content\n                );\n                /*\n                    hasNewMsg gets updated\n                    if current chat --> false\n                 */\n                chat.hasNewMsg = !isCurrentChat;\n                /*\n                    if chat is not currentChat, unreadMessages gets incremented\n                 */\n                chat.unreadMessages ++;\n                /*\n                    new message event is triggered\n                 */\n                this.event.trigger(\n                    'new message',\n                    data.chat.type,\n                    data.chat.id\n                );\n            }\n        });\n        /*\n            started typing\n         */\n        this.socket.on('started typing',data => {\n            /*\n                chat is searched\n             */\n            const chat = this.getChat(\n                data.chat.type,\n                data.chat.id\n            );\n            chat.startedTyping(data.uid);\n        });\n        /*\n            stopped typing\n         */\n        this.socket.on('stopped typing',data => {\n            /*\n                chat is searched\n             */\n            const chat = this.getChat(\n                data.chat.type,\n                data.chat.id\n            );\n            chat.stoppedTyping(data.uid);\n        });\n        /*\n            the user has been added to a new chat\n         */\n        this.socket.on('new chat',async data => {\n            await this.addNewChat({\n                // isStillMember is always true\n                isStillMember: true,\n                ...data\n            });\n            this.event.trigger('new chat',data);\n        });\n        /*\n            user has been removed from groupChat\n         */\n        this.socket.on('removed chat',async data => {\n            await this.removedGroupChat(data);\n        });\n        /*\n            groupChat has been updated\n         */\n        this.socket.on('groupChat updated',data => {\n\n            const chat = this.chats.group.get(data.id);\n            if(chat) {\n                chat.chatName = data.chatName;\n                /*\n                    update the members of the chat\n                 */\n                const uids = [];\n                for(const member of data.members){\n                    const user = this.users.get(member.uid);\n                    if(!user)\n                        this.users.add(new User(member.uid,member.username),member.uid)\n                    uids.push(member.uid)\n                }\n                chat.users = uids;\n                // update chat\n                getDispatch().updateChat(chat);\n                this.event.trigger('groupChat updated');\n            }\n        });\n        /*\n            Bei disconnect wird Seite neu geladen\n         */\n        this.socket.on('disconnect',() => {\n            setTimeout(function() {\n\n                alert('Verbindung verloren! Seite wird neu geladen');\n                // eslint-disable-next-line no-restricted-globals\n                location.reload();\n            },1000);\n        });\n    }\n\n    async initChats(){\n        // select all chats of the user\n        const response = await selectChats();\n\n        if(response.status === 200) {\n\n            const data = await response.json();\n            for (let i = 0; i < data.length; i++) {\n                if (data[i].type === 'normalChat') {\n                    /*\n                        normalChat is added\n                     */\n                    this.addNewNormalChat(data[i]);\n                } else if (data[i].type === 'groupChat') {\n                    /*\n                        groupChat is added\n                     */\n                    this.addNewGroupChat(data[i]);\n                }\n            }\n        }\n        this.finishedLoading = true;\n        this.event.trigger('chats loaded',this.getChatArraySortedByDate());\n    }\n\n    getChatArraySortedByDate(){\n\n        function getMessageTime (chat) {\n            const c = chat.latestMessage;\n            if(c !== null)\n                return c.date.getTime();\n            return new Date(0).getTime();\n        }\n\n        function getMaxDate (chats,iFrom) {\n            let max = iFrom;\n            for(let i = iFrom+1;i<chats.length;i++){\n                if(getMessageTime(chats[max]) < getMessageTime(chats[i]))\n                    max = i;\n            }\n            return max;\n        }\n        function swap (items, firstIndex, secondIndex) {\n            let temp = items[firstIndex];\n            items[firstIndex] = items[secondIndex];\n            items[secondIndex] = temp;\n        }\n        /*\n            Array is cloned\n         */\n        function cloneArr (arr) {\n            const clone = new Array(arr.length);\n            for(let i=0;i<arr.length;i++){\n                const chat = arr[i].value;\n                clone[i] = chat.getChatObject();\n            }\n            return clone;\n        }\n        /*\n            es wird ein sortiertes Array zurückgegeben\n         */\n        function getSorted (chats) {\n            //Array wird erzeugt\n            const sorted = cloneArr(chats);\n            /*\n                es wird immer das höchste eingefügt, um Array zu sortieren\n             */\n            for(let i=0;i<sorted.length-1;i++){\n                let max = getMaxDate(sorted,i);\n                swap(sorted,i,max);\n            }\n            return sorted;\n        }\n        /*\n            Arrays werden gemerged\n         */\n        function mergeArr (arr1,arr2) {\n\n            const merged = new Array(arr1.length + arr2.length);\n            let p1 = 0;\n            let p2 = 0;\n            for(let i=0;i<merged.length;i++){\n                if(! (p2 < arr2.length)){\n                    merged[i] = arr1[p1];\n                    p1++;\n                }else if (! (p1 < arr1.length)){\n                    merged[i] = arr2[p2];\n                    p2++;\n                }else if(getMessageTime(arr1[p1]) > getMessageTime(arr2[p2])){\n                    merged[i] = arr1[p1];\n                    p1++;\n                }else{\n                    merged[i] = arr2[p2];\n                    p2++;\n                }\n            }\n            return merged;\n        }\n        const ncSorted = getSorted(this.chats.normal);\n        const gcSorted = getSorted(this.chats.group);\n\n        return mergeArr(ncSorted, gcSorted);\n    }\n\n    isCurrentChat(type,id){\n        const currentChat = getGlobal().currentChat;\n        return currentChat.type === type && currentChat.id === id;\n    };\n\n    getChat(type,id){\n        /*\n            type can be:\n                normalChat\n                tempChat\n                groupChat\n         */\n        if(type === 'normalChat')\n            return this.chats.normal.get(id);\n        else if(type === 'tempChat') {\n            return this.temporaryChat.chatNow;\n        }\n        else if(type === 'groupChat')\n            return this.chats.group.get(id);\n    }\n    /*\n        a new chat gets added\n     */\n    async addNewChat(data){\n\n        let newChat;\n\n        if(data.type === 'normalChat'){\n            /*\n                new normalChat gets created\n             */\n            newChat = this.addNewNormalChat(data);\n\n        }else if(data.type === 'groupChat'){\n            /*\n                does group already exist?\n                    --> member has been added again\n             */\n            if(this.chats.group.getIndex(data.id) === -1) {\n                newChat = this.addNewGroupChat((data));\n            }else {\n                newChat = this.chats.group.get(data.id);\n                // update chat\n                await newChat.updateChat(data,true);\n                return;\n            }\n        }\n        newChat.unreadMessages = 1;\n        /*\n            event gets triggered\n         */\n        await getDispatch().addChat(newChat);\n    }\n    /*\n        groupChat has been removed\n     */\n    async removedGroupChat(data){\n        if(this.chats.group.getIndex(data.id) !== -1) {\n            const chat = this.chats.group.get(data.id);\n            await chat.updateChat(data,false);\n        }\n    }\n    /*\n        a new normalChat gets added\n     */\n    addNewNormalChat(data){\n        /*\n            check if the other user does already exist\n                if not --> gets created\n         */\n        let otherUser;\n        if(this.users.getIndex(data.members[0].uid) === -1){\n            otherUser = new User(\n                data.members[0].uid,\n                data.members[0].username\n            );\n            this.users.add(otherUser.uid,otherUser);\n        }else{\n            otherUser = this.users.get(data.members[0].uid);\n        }\n        /*\n            new chat gets created\n         */\n        const newChat = new NormalChat(\n            data.id,\n            data.chatName,\n            otherUser.uid,\n            data.unreadMessages,\n            data.blockedBySelf,\n            data.blockedByOther\n        );\n        /*\n            normalChat is set at other user\n         */\n        otherUser.normalChat = newChat.id;\n        /*\n            first message is initialized\n         */\n        newChat.initFirstMessage(data.firstMessage);\n        /*\n            new chat gets added to binSearchArray\n         */\n        this.chats.normal.add(data.id,newChat);\n\n        return newChat;\n    }\n    /*\n        a new groupChat gets added\n     */\n    addNewGroupChat(data){\n        /*\n            check which do not exist already --> get added\n         */\n        const members = [];\n\n            for (let i = 0; i < data.members.length; i++) {\n\n            const member = data.members[i];\n            /*\n                does the user already exist?\n             */\n            let user;\n            if (this.users.getIndex(member.uid) === -1) {\n                user = new User(\n                    member.uid,\n                    member.username\n                );\n                this.users.add(user.uid, user);\n            } else {\n                user = this.users.get(member.uid);\n            }\n            /*\n                member gets added\n             */\n            members.push(user.uid);\n            /*\n                chat is added at user\n             */\n            user.addGroupChat(data.id);\n        }\n        /*\n            new chat gets created\n         */\n        const newChat =\n            new GroupChat(\n                data.id,\n                data.chatName,\n                members,\n                data.unreadMessages,\n                data.isStillMember\n            );\n        /*\n            first message is initialized\n         */\n        newChat.initFirstMessage(data.firstMessage);\n        /*\n            new chat gets added to binSearchArray\n         */\n        this.chats.group.add(data.id,newChat);\n\n        return newChat;\n    }\n\n    get socket() {\n        return this._socket;\n    }\n\n    set socket(value) {\n        this._socket = value;\n    }\n\n    get userSelf() {\n        return this._userSelf;\n    }\n\n    set userSelf(value) {\n        this._userSelf = value;\n    }\n\n    get users() {\n        return this._users;\n    }\n\n    set users(value) {\n        this._users = value;\n    }\n\n    get chats() {\n        return this._chats;\n    }\n\n    set chats(value) {\n        this._chats = value;\n    }\n\n    get event() {\n        return this._event;\n    }\n\n    set event(value) {\n        this._event = value;\n    }\n\n    get finishedLoading() {\n        return this._finishedLoading;\n    }\n\n    set finishedLoading(value) {\n        this._finishedLoading = value;\n    }\n\n    get temporaryChat() {\n        return this._temporaryChat;\n    }\n\n    set temporaryChat(value) {\n        this._temporaryChat = value;\n    }\n\n    get initCalled() {\n        return this._initCalled;\n    }\n\n    set initCalled(value) {\n        this._initCalled = value;\n    }\n}\n\nlet chatSocket = new ChatSocket();\n\nexport function resetChatSocket(){\n    chatSocket.destruct();\n    chatSocket = new ChatSocket();\n}\n\nexport default chatSocket;\n","import React,{Component} from \"reactn\";\nimport {Link} from \"react-router-dom\";\nimport chatSocket from \"../../chatData/chatSocket\";\n\nexport default class ChatItem extends Component{\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            lastMsg: undefined,\n            typeMsg: ''\n        }\n    }\n    /*\n        is this chat selected?\n     */\n    isSelected = () => {\n        return this.props.id === this.global.currentChat.id && this.props.type === this.global.currentChat.type;\n    };\n    /*\n        wenn ein user anfängt, oder aufhört zu schreiben, wird diese Methode aufgerufen,\n        um die typeMsg zu aktualisieren\n     */\n    typeStateChanged = () => {\n\n        const chat = chatSocket.getChat(this.props.type,this.props.id);\n        let typeMsg = '';\n        /*\n            wenn latestuserTyping = null, schreibt gerade keiner\n         */\n        const userTyping = chat.getLatestUserTyping();\n        if(userTyping !== null){\n            typeMsg = userTyping.username + \" schreibt...\";\n        }\n        //state wird aktualisiert\n        this.setState({\n            typeMsg: typeMsg\n        });\n    };\n\n    render() {\n\n        const renderUnreadMsg = () => {\n            if(this.props.unreadMessages === 0 || !this.props.isStillMember)\n                return null;\n            else\n                return(\n                    <div className=\"newMsg-number\">\n                        {this.props.unreadMessages}\n                    </div>\n                );\n        };\n        /*\n            in der unteren Hälfte wird angezeigt wer schreibt\n            schreibt keiner, wird letzte Nachricht angezeigt\n         */\n        const renderLowerHalf = () => {\n            if(this.state.typeMsg === '')\n                return (\n                    <div className=\"w-100 lastMsg\">\n                        {renderMsg()}\n                        {renderDate()}\n                    </div>\n                );\n            else{\n                return (\n                    <div className=\"w-100 typeMsg\">\n                        {this.state.typeMsg}\n                    </div>\n                );\n            }\n        };\n\n        const renderMsg = () => {\n            if(!this.props.isStillMember)\n                return(\n                    <span>\n                        Du bist nicht mehr Mitglied\n                    </span>\n                );\n            else if(this.props.blockedByOther)\n                return (\n                    <span>\n                        Du wurdest von {this.props.name} blockiert\n                    </span>\n                );\n            else if(this.props.blockedBySelf)\n                return (\n                    <span>\n                        Du hast {this.props.name} blockiert\n                    </span>\n                );\n            else if(this.props.latestMessage)\n                return(\n                    <span>\n                        {this.props.latestMessage.msgString}\n                    </span>\n                );\n            else\n                return(\n                    <span>\n                        Noch keine Nachrichten vorhanden\n                    </span>\n                );\n        };\n\n        const renderDate = () => {\n            if(!this.props.isStillMember)\n                return null;\n            else if(this.props.latestMessage)\n                return(\n                    <div className=\"lastMsg-date\">\n                        {this.props.latestMessage.dateString}\n                    </div>\n                );\n            else\n                return null;\n        };\n\n        const getLink = () => {\n            if(this.props.type === 'normalChat'){\n                return '/chat/user/' + chatSocket.getChat('normalChat',this.props.id).otherUser;\n            }else if(this.props.type === 'groupChat'){\n                return '/chat/group/' + this.props.id;\n            }else if(this.props.type === 'tempChat'){\n                return '/chat/user/' + chatSocket.temporaryChat.chatNow.otherUser;\n            }\n        };\n\n        return(\n            <li className={\"chat-item\" + (this.isSelected() ? \" selected \" : \"\")}>\n                <Link to={getLink()}>\n                    <div className=\"w-100\">\n                        <strong className=\"chatItem-username\">\n                            {this.props.name}\n                        </strong>\n                        {renderUnreadMsg()}\n                    </div>\n                    {renderLowerHalf()}\n                </Link>\n            </li>\n        )\n    }\n\n    componentDidMount() {\n        const chat = chatSocket.getChat(this.props.type,this.props.id);\n        /*\n            event listener werden angelegt\n         */\n        //if(chat)\n        chat.event.on(\"typeState changed\",this.typeStateChanged);\n        /*else{\n            console.log('error',chatSocket.chats.group,this.props.type,this.props.id)\n        }*/\n    }\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        /*\n            did component update?\n         */\n        if(prevProps.type !== this.props.type || prevProps.id !== this.props.id) {\n            //Listeners get replaced\n            const prevChat = chatSocket.getChat(prevProps.type,prevProps.id);\n            prevChat.event.rm(\"typeState changed\",this.typeStateChanged);\n\n            const newChat = chatSocket.getChat(this.props.type,this.props.id);\n            newChat.event.on(\"typeState changed\",this.typeStateChanged);\n\n            //typeMsg gets deleted\n            this.setState({\n                typeMsg: ''\n            });\n        }\n\n    }\n    componentWillUnmount() {\n        const chat = chatSocket.getChat(this.props.type,this.props.id);\n        /*\n            event listener werden entfernt\n         */\n        chat.event.rm(\"typeState changed\",this.typeStateChanged);\n    }\n}","import React,{Component} from \"reactn\";\nimport ChatSearchBox from \"./ChatSearchBox\";\nimport ChatItem from \"./ChatItem\";\nimport Dummy from \"../../utilComp/Dummy\";\n\nimport './chatList.scss';\n\nexport default class ChatList extends Component{\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            //the current searchValue at the chatlist\n            searchValue: ''\n        };\n    }\n\n    render() {\n\n        let found = 0;\n\n        const showNothingFoundMsg = () => {\n            if(found === 0)\n                return(\n                    <span>\n                        Nichts gefunden\n                    </span>\n                );\n            return null;\n        };\n\n        const renderTempChat = () => {\n            /*\n                is tempChat not null?\n             */\n            //TODO block info\n            if(this.global.tempChat){\n                return(\n                    <ChatItem\n                        key={-1}\n                        id={0}\n                        type={'tempChat'}\n                        name={this.global.tempChat.chatName}\n                        unreadMessages={0}\n                        isStillMember={true}\n                        latestMessage={null}\n                    />\n                );\n            }\n            return null;\n        };\n\n        return(\n                <Dummy>\n                    <ChatSearchBox\n                        onSearch={searchValue => {\n                            this.setState({\n                                searchValue: searchValue\n                            })\n                        }}\n                    />\n\n                    <ul className=\"chat-list\">\n                        {renderTempChat()}\n                        {this.global.chats.map((chat,i) => {\n                            if(chat.chatName.includes(this.state.searchValue)) {\n                                found++;\n                                return (\n                                    <ChatItem\n                                        key={i}\n                                        id={chat.id}\n                                        type={chat.type}\n                                        name={chat.chatName}\n                                        unreadMessages={chat.unreadMessages}\n                                        latestMessage={chat.latestMessage}\n                                        isStillMember={chat.isStillMember}\n                                        blockedBySelf={chat.blockedBySelf}\n                                        blockedByOther={chat.blockedByOther}\n                                    />\n                                );\n                            }\n                            return null;\n                        })}\n                    </ul>\n                    {showNothingFoundMsg()}\n                </Dummy>\n        )\n    }\n}","import React from \"react\";\n\nimport './chatViewLoader.scss';\n\nexport default function ChatViewLoader (props){\n    return(\n        <div className=\"loader-init\">\n            <div className=\"col-sm-12 my-auto\">\n                <div className=\"init-container border rounded\">\n                    <div className=\"spinner-border text-secondary\"\n                         style={{\n                             width: '15rem',\n                             height: '15rem',\n                             borderWidth: '0.5rem'\n                         }}\n                         role=\"status\">\n                        <span className=\"sr-only\">Loading...</span>\n                    </div>\n                    <div className=\"loader-text\">{props.msg}</div>\n                </div>\n            </div>\n        </div>\n    )\n}","import {makeRequest} from \"../../global/requests\";\n\nexport async function loadGroupChat(gcid){\n    const config = {\n        method: 'GET',\n        headers: {\n            'Accept': 'application/json'\n        }\n    };\n    return await makeRequest('/group/' + gcid + '/', config);\n}\nexport async function sendMessage(body){\n    const config = {\n        method: 'PUT',\n        headers: {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(body)\n    };\n    return  await makeRequest('/message', config);\n}\nexport async function joinGroupChat(gcid){\n    const config = {\n        method: 'POST',\n        headers: {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json',\n        }\n    };\n    return  await makeRequest('/group/' + gcid + '/join/',config);\n}","import React,{Component} from \"react\";\nimport {makeRequest} from \"../../../../global/requests\";\n\nimport './fileList.scss'\n\nexport default class FileChooser extends Component {\n\n    files;\n\n    constructor(props) {\n        super(props);\n        this.assignFilesRef = this.assignFilesRef.bind(this);\n    }\n\n    assignFilesRef = target => {\n        this.files = target\n    }\n\n    uploadFiles = async () => {\n        const files =  this.files.files;\n        const fileArray = []\n        for(const file of files){\n            try {\n                const response = await makeRequest('/message/file/' + file.name, {\n                    body: file,\n                    method: 'PUT',// or 'PUT',\n                    headers: {\n                        'Content-type': file.type // likely there for common types\n                    }\n                })\n                if (response.ok) {\n                    const data = await response.json()\n                    fileArray.push({\n                        fid: data.fid,\n                        mimeType: file.type,\n                        fileName: file.name\n                    })\n                }\n            }catch (err) {\n                console.log(err)\n            }\n        }\n        this.props.onFileUpload(fileArray)\n    }\n\n    render() {\n        return(\n            <i className=\"fas fa-paperclip fa-2x file-chooser\"\n               onClick={() => this.files.click()}>\n                <input\n                    type=\"file\"\n                    className=\"fileInput\"\n                    name=\"files\"\n                    multiple\n                    ref={this.assignFilesRef}\n                    onChange={this.uploadFiles}\n                />\n            </i>\n        )\n    }\n}","import React,{Component} from \"react\";\n\nexport class FileList extends Component {\n\n    deleteFile = file => {\n        this.props.deleteFile(file)\n    }\n\n    render() {\n        return(\n            <div className={\"file-list\"}>\n                {this.props.files.map((item) => (\n                    <div className=\"file\">\n                        <i className=\"far fa-file\"/>\n                        &nbsp;{item.fileName}\n                        <span className=\"close\"\n                              onClick={() => this.deleteFile(item)}>\n                            x\n                        </span>\n                    </div>\n                ))}\n            </div>\n        )\n    }\n}","import React,{Component} from \"react\";\nimport chatSocket from \"../../../../chatData/chatSocket\";\nimport 'emoji-mart/css/emoji-mart.css';\nimport { Picker } from 'emoji-mart';\nimport {withRouter} from \"react-router-dom\";\nimport Dummy from \"../../../../utilComp/Dummy\";\nimport {globalData} from \"../../../../global/globalData\";\nimport {sendMessage} from \"../../apiCalls\";\nimport Responsive from \"../../../../responsive/Responsive\";\nimport FileChooser from \"./FileChooser\";\nimport {FileList} from \"./FileList\";\n\nimport './messageForm.scss';\n\nclass MessageForm extends Component{\n\n    _userTyping = false;\n    _typeEventEmitted = false;\n    _typeTimeout;\n    /*\n        if the MessageFrom belongs to a tempChat, it has some other actions to do\n     */\n    _isTempChat;\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            message: '',\n            files: [],\n            //TODO: error message, e.g. react-alert\n            tooManyFiles: false,\n            showEmoji: false\n        }\n    }\n\n    onTyping = event => {\n\n        this.setState({\n           message: event.target.value\n        });\n\n        this.handleTypeMessage();\n    };\n\n    handleTypeMessage = () => {\n        /*\n            type message get only handled if the chat is not temporary\n         */\n        if(!this.isTempChat) {\n\n            if (this.userTyping) {\n                clearTimeout(this.typeTimeout);\n            }\n            this.userTyping = true;\n            if (!this.typeEventEmitted) {\n                this.typeEventEmitted = true;\n                chatSocket.socket.emit('started typing');\n            }\n            this.typeTimeout = setTimeout(() => {\n                this.userTyping = false;\n                if (this.typeEventEmitted) {\n                    this.typeEventEmitted = false;\n                    chatSocket.socket.emit('stopped typing');\n                }\n            }, 1000);\n        }\n    };\n\n    onSubmit = event => {\n        event.preventDefault();\n        /*\n            es kann keine leere Nachricht geschickt werden\n         */\n        if(this.state.message !== '' || this.state.files.length > 0){\n            // is held at the client\n            const messageContentSelf = {\n                text: this.state.message,\n                files: this.state.files\n            };\n            // gets send to the server\n            const messageContentSend = {\n                text: this.state.message,\n                files: this.getFileIds()\n            };\n            /*\n                input wird geleert\n             */\n            this.setState({\n                message: ''\n            });\n            if(this.isTempChat) {\n\n                const {pathname} = this.props.location;\n                /*\n                    the chat is created\n                 */\n                chatSocket.temporaryChat.createNewNormalChat(messageContentSelf,messageContentSend)\n                    .then(redirect => {\n                        if(redirect) {\n                            this.props.history.replace(\"/chat\");\n                            this.props.history.replace(pathname);\n                        }\n                    });\n            }else{\n\n                this.sendMessage(messageContentSend)\n                    .then(mid => {\n                        // reset file array\n                        this.setState({\n                            files: []\n                        })\n                        /*\n                            message is added to chat\n                         */\n                        const chat = chatSocket.getChat(this.props.chatType, this.props.chatId);\n                        chat.addMessage(\n                            chatSocket.userSelf.uid,\n                            mid,\n                            globalData.messageTypes.normalMessage,\n                            messageContentSelf\n                        );\n                    })\n                    .catch(err => {});\n            }\n        }\n    };\n\n    sendMessage = async msgContent => {\n        /*\n            message is sent to server\n         */\n        const response = await sendMessage({\n            type: globalData.messageTypes.normalMessage,\n            content: msgContent\n        });\n\n        if (response.ok) {\n\n            const data = await response.json();\n            /*\n                mid is returned\n             */\n            return data.mid;\n        }\n        throw new Error();\n    };\n\n    onEmojiInput = emoji => {\n\n        this.setState({\n            message: this.state.message + emoji.native\n        });\n        this.handleTypeMessage();\n    };\n\n    toggleEmoji = event => {\n        this.setState(state => ({\n            showEmoji: !state.showEmoji\n        }))\n    };\n\n    addFiles = files => {\n        this.setState(state => {{\n            if(state.files.length + files.length <= 10)\n                return {\n                    files: [...state.files, ...files],\n                    tooManyFiles: false\n                }\n            else\n                return {\n                    tooManyFiles: true\n                }\n        }})\n    }\n\n    deleteFile = file => {\n        this.setState(state => {\n            let filesClone = state.files.slice()\n            let i = 0\n            for(const stateFile of filesClone){\n                if(stateFile.fid === file.fid) {\n                    filesClone.splice(i, 1)\n                    break\n                }\n                i++\n            }\n            return {\n                files: filesClone\n            }\n        })\n    }\n\n    getFileIds = () => {\n        const fileIds = []\n        for(const file of this.state.files)\n            fileIds.push(file.fid)\n        return fileIds\n    }\n\n    render() {\n        return(\n            <Dummy>\n                <FileList\n                    files={this.state.files}\n                    deleteFile={this.deleteFile}\n                />\n                <form onSubmit={this.onSubmit}\n                      className=\"msg-form\">\n                    <div className=\"message-input\">\n                        <input autoComplete=\"off\"\n                               placeholder=\"Nachricht:\"\n                               name=\"message-input-text\"\n                               value={this.state.message}\n                               onChange={this.onTyping}\n                        />\n                        <Responsive displayIn={[\"Laptop\",\"Tablet\"]}>\n                            <i className=\"far fa-smile fa-2x emoji-toggle\"\n                               onClick={this.toggleEmoji}\n                            />\n                        </Responsive>\n                        <FileChooser\n                            onFileUpload={this.addFiles}\n                        />\n                    </div>\n                    <button className=\"btn-submit\" type=\"submit\">\n                        <i className=\"far fa-paper-plane fa-2x\"\n                           data-toggle=\"tooltip\"\n                           title=\"send message\" />\n                    </button>\n                </form>\n                {this.state.showEmoji ?\n                    <div style={{\n                        position: 'absolute',\n                        bottom: '60px',\n                        right: '50px',\n                        width: '350px',\n                        height: '425px'\n                    }}>\n                        <Picker\n                            onSelect={this.onEmojiInput}\n                            native={true}\n                        />\n                    </div>\n                : null}\n            </Dummy>\n        )\n    }\n\n    componentDidMount() {\n        /*\n            isTempChat gets set\n         */\n        this.isTempChat = this.props.chatType === 'tempChat';\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        /*\n            isTempChat gets updated\n         */\n        this.isTempChat = this.props.chatType === 'tempChat';\n    }\n\n    get userTyping() {\n        return this._userTyping;\n    }\n\n    set userTyping(value) {\n        this._userTyping = value;\n    }\n\n    get typeEventEmitted() {\n        return this._typeEventEmitted;\n    }\n\n    set typeEventEmitted(value) {\n        this._typeEventEmitted = value;\n    }\n\n    get typeTimeout() {\n        return this._typeTimeout;\n    }\n\n    set typeTimeout(value) {\n        this._typeTimeout = value;\n    }\n\n    get isTempChat() {\n        return this._isTempChat;\n    }\n\n    set isTempChat(value) {\n        this._isTempChat = value;\n    }\n}\n\nexport default withRouter(MessageForm);","import React,{Component} from \"reactn\";\nimport ReactDOM from 'react-dom';\nimport MessageForm from \"./messageForm/MessageForm\";\nimport chatSocket from \"../../../chatData/chatSocket\";\nimport Message from \"./message/Message\";\nimport {isDifferentDay} from '../../../chatData/message/message'\n\nimport './chatContainer.scss';\nimport Dummy from \"../../../utilComp/Dummy\";\n\nexport default class ChatContainer extends Component{\n\n    _isMounted = false;\n    _messages;\n    _messagesNode;\n\n    constructor(props) {\n        super(props);\n        this.assignMessagesRef = this.assignMessagesRef.bind(this);\n        this.state = {\n            msgLoading: false,\n            scrollToBottom: 0\n        };\n    }\n    //scroll: https://jsfiddle.net/jwm6k66c/2480/\n    scrollHandler = event => {\n        this.setState({\n            scrollToBottom: this.getScrollToBottom()\n        });\n        /*\n            wenn oben angelangt, werden Nachrichten geladen\n         */\n        if (this.messagesNode.scrollTop === 0 && this.isChatSelected())\n            this.loadMessages();\n    };\n\n    setScrollToBottom = val => {\n        this.messagesNode.scrollTop = this.messagesNode.scrollHeight - this.messagesNode.offsetHeight - val;\n    };\n\n    getScrollToBottom  = () => {\n        return this.messagesNode.scrollHeight - this.messagesNode.offsetHeight - this.messagesNode.scrollTop;\n    };\n\n    assignMessagesRef = target => {\n        this.messages = target;\n    };\n\n    loadMessages = () => {\n\n        const chat = chatSocket.getChat(this.global.currentChat.type,this.global.currentChat.id);\n        /*\n            loader is only shown, if top not reached\n         */\n        if(!chat.reachedTopMessages)\n            this.setState({\n                msgLoading: true\n            });\n        /*\n            messages are loaded\n         */\n        chat.loadMessages(10)\n            .then(messages => {\n                /*\n                    loader is hidden\n                    messages are added\n                 */\n                this.dispatch.addLoadedMessages(messages);\n                this.setState(state => ({\n                    msgLoading: false\n                }));\n                this.setScrollToBottom(this.state.scrollToBottom);\n            })\n            .catch(err => this.setState({\n                msgLoading: false\n            }));\n    };\n    /*\n        is called when the selected chat changed\n     */\n    chatChanged = () => {\n        /*\n            if scrollToBottom is 0, the messages are loaded\n         */\n        if (this.messagesNode.scrollTop === 0 && this.isChatSelected())\n            this.loadMessages();\n    };\n\n    isChatSelected = () => {\n        return !(this.global.currentChat.type === '' && this.global.currentChat.id === 0);\n    }\n\n    componentDidMount() {\n        this.messagesNode = ReactDOM.findDOMNode(this.messages);\n\n        this.chatChanged();\n\n        this.isMounted = true;\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        /*\n            es wird überprüft, ob sich der chat geändert hat\n            wenn das der Fall ist:\n                wird messages loaded listener auf neuen chat angewandt\n                scrollToBottom wird auf 0 gesetzt\n                scrolltop wird überprüft\n         */\n        if(prevProps.chatType !== this.props.chatType || prevProps.chatId !== this.props.chatId) {\n\n            //scrollToBottom wird auf 0 gesetzt\n            this.setScrollToBottom(0);\n\n            this.chatChanged();\n        }\n        /*\n            wenn scrollToBottom 0 wird zu bottom gescrollt\n         */\n        if(this.state.scrollToBottom === 0) {\n            this.setScrollToBottom(0);\n            /*\n                newMessages is set to 0\n             */\n            if(this.global.currentChat.newMessages > 0)\n                this.setGlobal(global => ({\n                   currentChat: {\n                       ...global.currentChat,\n                       newMessages: 0\n                   }\n                }));\n        }\n\n    }\n\n    render() {\n\n        const showLoaderTop = () => {\n            if(this.state.msgLoading)\n                return(\n                    <div className=\"messageLoader-top\">\n                        <div className=\"spinner-border text-secondary\" role=\"status\">\n                            <span className=\"sr-only\">Loading...</span>\n                        </div>\n                    </div>\n                );\n            return null;\n        };\n\n        const renderNewMessages = () => {\n\n            if(this.global.currentChat.newMessages > 0)\n                return(\n                    <div id=\"scroll-down-number\" className=\"number\">\n                        {this.global.currentChat.newMessages}\n                    </div>\n                );\n            return null;\n        };\n\n        const renderBtnToBottom = () => {\n            if(this.isMounted) {\n                if (this.getScrollToBottom() > 10) {\n                    return (\n                        <div id=\"messages-bottom\"\n                             className=\"messages-bottom\"\n                             onClick={() => {\n                                 this.setState({\n                                     scrollToBottom: 0\n                                 })\n                             }}\n                        >\n                            <div id=\"btnToBottom\" className=\"chevron-down\">\n                                <i className=\"fas fa-chevron-down fa-2x\"/>\n                            </div>\n                            {renderNewMessages()}\n                        </div>\n                    )\n                }\n            }\n            return null;\n        };\n\n        let lastDate = new Date(0);\n        /*\n            wenn der Tag der letzten Nachrichten ein anderer wie der von dieser ist,\n            wird ein Container mit Datum gerendert\n         */\n        const renderDateContainer = msg => {\n            if(isDifferentDay(msg.date,lastDate)){\n                lastDate = msg.date;\n                return(\n                    <div className = \"date-container\">\n                        <div>\n                            {msg.dateString}\n                        </div>\n                    </div>\n                )\n            }\n            lastDate = msg.date;\n            return null;\n        };\n\n        const renderAlertNoMessages = () => {\n            if(this.global.currentChat.messages.length === 0)\n                return(\n                    <div className=\"alert alert-primary\" role=\"alert\">\n                        Noch keine Nachrichten vorhanden\n                    </div>\n                );\n            return null;\n        };\n\n        const renderAlertNotInChat = () => {\n            if(!this.global.currentChat.isStillMember)\n                return(\n                    <div className=\"error-container\">\n                        <div>\n                            Du bist nicht mehr im chat\n                        </div>\n                    </div>\n                );\n            return null;\n        };\n\n        const renderAlertBlockedBySelf = () => {\n            if(this.global.currentChat.blockedBySelf)\n                return(\n                    <div className=\"error-container\">\n                        <div>\n                            Du hast {this.global.currentChat.chatName} blockiert\n                        </div>\n                    </div>\n                );\n            return null;\n        };\n\n        const renderAlertBlockedByOther = () => {\n            if(this.global.currentChat.blockedByOther)\n                return(\n                    <div className=\"error-container\">\n                        <div>\n                            Du wurdest von {this.global.currentChat.chatName} blockiert\n                        </div>\n                    </div>\n                );\n            return null;\n        };\n\n        const renderMessageForm = () => {\n            /*\n                render MessageForm only if:\n                    member is still in chat\n                    user is not blocked\n                    user did not bliock other user\n             */\n            if(this.global.currentChat.isStillMember\n                && !this.global.currentChat.blockedBySelf\n                && !this.global.currentChat.blockedByOther\n            )\n                return(\n                    <MessageForm\n                        chatType={this.props.chatType}\n                        chatId={this.props.chatId}\n                    />\n                )\n            return null;\n        }\n\n        return(\n            <div className=\"chat-container\">\n                <div className=\"messages\"\n                     onScroll={this.scrollHandler}\n                     ref={this.assignMessagesRef}\n                >\n                    {showLoaderTop()}\n                    {this.global.currentChat.messages.map((msg,i) => {\n                        return (\n                            <Dummy key={i}>\n                                {renderDateContainer(msg)}\n                                <Message\n                                    msg={msg}\n                                />\n                            </Dummy>\n                        );\n                    })}\n                    {renderAlertNoMessages()}\n                    {renderAlertNotInChat()}\n                    {renderAlertBlockedByOther()}\n                    {renderAlertBlockedBySelf()}\n                    {renderBtnToBottom()}\n                </div>\n                {renderMessageForm()}\n            </div>\n        )\n    }\n\n    componentWillUnmount() {\n        this.isMounted = false;\n    }\n\n    get isMounted() {\n        return this._isMounted;\n    }\n\n    set isMounted(value) {\n        this._isMounted = value;\n    }\n\n    get messages() {\n        return this._messages;\n    }\n\n    set messages(value) {\n        this._messages = value;\n    }\n\n    get messagesNode() {\n        return this._messagesNode;\n    }\n\n    set messagesNode(value) {\n        this._messagesNode = value;\n    }\n}","import React,{Component} from \"react\";\nimport MessageForm from \"./chatContainer/messageForm/MessageForm\";\nimport chatSocket from \"../../chatData/chatSocket\";\n\nexport default class TempChatContainer extends Component{\n\n    render() {\n        return(\n            <div className=\"chat-container\">\n                <div className=\"messages\">\n                    <div className=\"alert alert-primary\" role=\"alert\">\n                        Noch keine Nachrichten vorhanden\n                    </div>\n                </div>\n                <MessageForm\n                    chatType={'tempChat'}\n                    chatId={0}\n                />\n            </div>\n        );\n    }\n    componentDidMount() {\n        chatSocket.temporaryChat.show();\n    }\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        if(prevProps.uid !== this.props.uid)\n            chatSocket.temporaryChat.update();\n    }\n    componentWillUnmount() {\n        chatSocket.temporaryChat.hide();\n    }\n}","import React from \"react\";\n\nimport './chatViewErrors.scss';\nimport {joinGroupChat} from \"./apiCalls\";\n\nexport function AddressNotValid() {\n    return(\n        <div>\n            <h2>ungültige Addresse</h2>\n        </div>\n    );\n}\nexport function CannotWriteYourself(){\n    return(\n        <div>\n            <h2>Du kannst dir selbst nicht schreiben</h2>\n        </div>\n    );\n}\nexport function BlockedByThisUser(){\n    return(\n        <div>\n            <h2>Dieser User hat dich blockiert</h2>\n        </div>\n    );\n}\nexport function UserNotExisting(){\n    return(\n        <div>\n            <h2>Dieser User existiert nicht</h2>\n        </div>\n    );\n}\nexport function NoMemberInPublicChat(props){\n\n    function joinChat(){\n        joinGroupChat(props.gcid)\n            .then(() => {\n                props.onJoined()\n            })\n            .catch(() => {})\n    }\n\n    return (\n        <div className={\"notMemberPublicChat\"}>\n            <h3>Du bist nicht Mitglied in diesem chat</h3>\n            <button onClick={joinChat}>\n                jetzt beitreten\n            </button>\n        </div>\n    );\n}\nexport function NoAuthorization(){\n    return (\n        <div>\n            <h2>Du bist nicht dazu berechtigt diesen chat anzusehen</h2>\n        </div>\n    );\n}\nexport function ChatNotExisting(){\n    return (\n        <div>\n            <h2>Dieser Chat existiert nicht</h2>\n        </div>\n    );\n}\nexport function GeneralError(){\n    return (\n        <div>\n            <h2>Fehler</h2>\n        </div>\n    );\n}","import React, {Component} from \"reactn\";\nimport chatSocket from \"../../chatData/chatSocket\";\nimport ChatViewLoader from \"./ChatViewLoader\";\nimport ChatContainer from \"./chatContainer/ChatContainer\";\nimport TempChatContainer from \"./TempChatContainer\";\nimport {infoHeaderCenter} from \"../Header/HeaderLeft\";\nimport {UserErrorCode,getUserNormalChat} from \"../../chatData/user\";\nimport {\n    AddressNotValid,\n    BlockedByThisUser,\n    CannotWriteYourself,\n    UserNotExisting\n} from \"./chatViewErrorMessages\";\n\nexport default class NormalChatView extends Component{\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            uid: 0,\n            loaded: false,\n            error: UserErrorCode.none\n        }\n    }\n\n    render() {\n        const renderLoader = () => {\n            if(!this.state.loaded){\n                return(\n                    <ChatViewLoader\n                        msg=\"Chat wird geladen\"\n                    />\n                )\n            }\n        };\n\n        const renderChat = () => {\n            /*\n                es wird überprüft, ob uid number ist\n                --> wenn nicht, ungültige Addresse\n             */\n            if(this.state.error === UserErrorCode.nan){\n                return(\n                    <AddressNotValid/>\n                );\n            }\n            else if(this.state.error === UserErrorCode.isSelf){\n                return(\n                    <CannotWriteYourself/>\n                );\n            }\n            /*\n                chat wird nur gerendert, wenn geladen\n             */\n            else if(this.state.loaded){\n\n                if(this.state.error === UserErrorCode.none){\n\n                    return(\n                        <ChatContainer\n                            chatType={this.global.currentChat.type}\n                            chatId={this.global.currentChat.id}\n                        />\n                    )\n                }else if(this.state.error === UserErrorCode.tempChat){\n                    return(\n                        <TempChatContainer uid={this.state.uid}/>\n                    )\n                }else if(this.state.error === UserErrorCode.blocked){\n                    return(\n                        <BlockedByThisUser/>\n                    )\n                }else{\n                    return(\n                        <UserNotExisting/>\n                    )\n                }\n            }\n        };\n\n        return <div className=\"h-100\">\n            {renderLoader()}\n            {renderChat()}\n        </div>;\n    }\n\n    componentDidMount() {\n        this.userChanged();\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        /*\n            did uid change?\n         */\n        if(prevProps.uid !== this.props.uid){\n            /*\n                is props.uid a number?\n             */\n            if(isNaN(this.props.uid)){\n                this.setState({\n                    error: UserErrorCode.nan\n                });\n            }\n            else{\n                this.userChanged();\n            }\n\n        }\n    }\n    /*\n        is called when the user changed and when the component mounted\n            this is checked after each update\n     */\n    userChanged = () => {\n\n        const uid = parseInt(this.props.uid);\n\n        /*\n            is the user self?\n         */\n        if(this.global.userSelf.uid === uid){\n            this.setState({\n                error: UserErrorCode.isSelf,\n                loaded: true\n            });\n        }else {\n\n            const userExists = () => {\n\n                getUserNormalChat(uid)\n                    .then(res => {\n                        /*\n                            no error\n                                checks if existing or tempChat\n                         */\n                        if (res === UserErrorCode.none) {\n                            this.setState({\n                                error: res\n                            });\n                            this.setGlobal({\n                                infoHeaderCenter: infoHeaderCenter.normalChat,\n                                ihcData: {\n                                    name: chatSocket.users.get(uid).username,\n                                    uid: uid\n                                }\n                            }).then();\n                            /*\n                                normalChat is selected\n                             */\n                            this.selectNormalChat(uid);\n                            /*\n                                tempChat\n                             */\n                        } else if (res === UserErrorCode.tempChat) {\n                            this.setState({\n                                error: res\n                            });\n                            this.setGlobal({\n                                infoHeaderCenter: infoHeaderCenter.normalChat,\n                                ihcData: {\n                                    name: chatSocket.temporaryChat.chatNow.chatName,\n                                    uid: uid\n                                }\n                            }).then();\n                            /*\n                                the temporary chat is selected\n                             */\n                            this.selectTempChat();\n                        }\n                        /*\n                            some error has occured, state is set\n                         */\n                        else{\n                           this.setState({\n                               error: UserErrorCode.error\n                           })\n                        }\n                        this.setState({\n                            loaded: true\n                        });\n\n                    })\n                    .catch(err => this.setState({\n                        error: UserErrorCode.error\n                    }));\n            };\n\n            if (chatSocket.finishedLoading) {\n                userExists();\n            } else {\n                chatSocket.event.on('chats loaded', () => {\n                    userExists();\n                });\n            }\n\n            this.setState({\n                uid: parseInt(this.props.uid)\n            });\n        }\n    };\n    /*\n        the tempChat is selected\n     */\n    selectTempChat(){\n        this.dispatch.showTempChat();\n    }\n    /*\n        a normalCHat is selected\n     */\n    selectNormalChat(uid){\n        /*\n            does the user exist?\n         */\n        if (chatSocket.users.getIndex(uid) === -1) {\n\n            this.setState({\n                error: UserErrorCode.userNotExisting\n            });\n        }else {\n            /*\n                chat is pulled from chatSocket\n             */\n            const id = chatSocket.users.get(uid).normalChat;\n            const chat = chatSocket.getChat('normalChat', id);\n\n            this.dispatch.selectChat(chat);\n        }\n    }\n    /*\n        property- display normalChat is removed from global\n     */\n    componentWillUnmount() {\n        this.setGlobal({\n            infoHeaderCenter: infoHeaderCenter.none,\n            ihcData: null\n        }).then();\n    }\n\n}","import React,{Component} from \"react\";\nimport {withRouter} from 'react-router-dom';\n\nimport './modal.scss';\n\nclass Modal extends Component{\n\n    render() {\n        const clickedOutside = () => {\n            this.props.history.goBack();\n        };\n        return(\n            <div\n                className=\"modal-outer\"\n                onClick={clickedOutside}>\n                <div className=\"h-100\" style={{display: \"flex\"}}>\n\n                        <div\n                            className=\"modal-inner\"\n                            onClick={event => {event.stopPropagation()}}>\n                            <div\n                                className=\"btn-close\"\n                                onClick={() => {this.props.history.goBack()}}>\n                                &times;\n                            </div>\n                            {this.props.children}\n                        </div>\n\n                </div>\n            </div>\n        )\n    }\n}\nexport default withRouter(Modal);\n\nexport function ModalHeader(props){\n    return(\n        <div className=\"m-header\">\n            {props.children}\n        </div>\n    )\n}\n\nexport function ModalMain(props){\n    return(\n        <div className=\"m-main\">\n            {props.children}\n        </div>\n    )\n}","import React,{Component} from \"react\";\n\nexport default class UserItem extends Component{\n\n    clicked = event => {\n        if(this.props.isSelected){\n            this.props.deselectUser(this.props.index);\n        }else\n            this.props.selectUser(this.props.index);\n    };\n\n    render() {\n        return(\n            <li key={this.props.index}\n                onClick={this.clicked}\n            >\n                <div className=\"username\">\n                    {this.props.username}\n                </div>\n                <div className={\"user-select fa-lg\" + (this.props.isSelected ? \" selected\" : \"\")}>\n                    <i className=\"fas fa-check\" />\n                </div>\n            </li>\n        );\n    }\n}","import React,{Component} from \"react\";\nimport UserItem from \"./UserItem\";\nimport Dummy from \"../../utilComp/Dummy\";\nimport InfiniteScroll from 'react-infinite-scroller';\n\nconst errorCode={\n    none: 0,\n    error: 1\n};\n\nexport default class extends Component {\n\n    scrollParentRef;\n    lastRequest = {};\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            /*\n                the value of the search input\n             */\n            searchValue: '',\n            /*\n                the last search result received from the server\n             */\n            searchResult: [],\n            error: errorCode.none,\n            /*\n                are there items left?\n             */\n            hasMore: true\n        }\n    }\n\n    searchChanged = event => {\n        this.setState({\n            searchValue: event.target.value,\n            searchResult: [],\n            hasMore: true\n        });\n    };\n    /*\n        more users are loaded\n     */\n    loadUsers = async () => {\n\n        const searchValue = this.state.searchValue;\n        const length = this.state.searchResult.length;\n\n        if(\n            this.lastRequest.searchValue !== searchValue\n            || this.lastRequest.length !== length\n        ) {\n\n            this.lastRequest = {\n                searchValue: searchValue,\n                length: length\n            };\n\n            try {\n\n                const data = await this.props.loadUsers(\n                    searchValue,\n                    length\n                );\n\n                if (data.length === 0) {\n                    this.setState({\n                        hasMore: false,\n                        error: errorCode.none\n                    })\n                } else {\n                    this.setState(state => ({\n                        searchResult: state.searchResult.concat(data),\n                        error: errorCode.none\n                    }));\n                }\n\n            } catch (error) {\n                this.setState({\n                    error: errorCode.error\n                });\n            }\n        }\n    };\n    /*\n        is called when an user is selected\n     */\n    selectUser = index => {\n        const user = this.state.searchResult[index];\n        this.props.selectUser(user.uid,user.username);\n    };\n\n    deselectUser = index => {\n        const user = this.state.searchResult[index];\n        this.props.deselectUser(user.uid);\n    };\n\n    render() {\n        return(\n            <Dummy>\n                <form className=\"form-group\" style={{width: '90%',maxWidth: '650px'}}>\n                    <input type=\"text\"\n                           className=\"form-control p-2 m-2\"\n                           placeholder=\"Benutzer suchen\"\n                           value={this.state.searchValue}\n                           onChange={this.searchChanged}\n                    />\n                </form>\n                <div\n                    className=\"selectUsers\"\n                    ref={ref => this.scrollParentRef = ref}\n                >\n                    <InfiniteScroll\n                        pageStart={0}\n                        loadMore={this.loadUsers}\n                        hasMore={this.state.hasMore}\n                        loader={\n                            <div className=\"loader\" key={-1}>\n                                <div\n                                    className=\"spinner-border text-secondary\"\n                                    role=\"status\"\n                                >\n                                    <span className=\"sr-only\">\n                                        Loading...\n                                    </span>\n                                </div>\n                            </div>\n                        }\n                        useWindow={false}\n                        getScrollParent={() => this.scrollParentRef}\n                    >\n                        <ul className=\"selectUsers\">\n                            {this.state.searchResult.map((item, index) => (\n                                <UserItem\n                                    key={index}\n                                    index={index}\n                                    uid={item.uid}\n                                    username={item.username}\n                                    selectUser={this.selectUser}\n                                    deselectUser={this.deselectUser}\n                                    isSelected={this.props.isUserSelected(item.uid)}\n                                />\n                            ))}\n                            {this.state.searchResult.length === 0 ?\n                                <div key={-1} className=\"nothingFound\">\n                                    Nichts gefunden!\n                                </div>\n                                :\n                                null\n                            }\n                        </ul>\n                    </InfiniteScroll>\n                </div>\n            </Dummy>\n        )\n    }\n}","import React,{Component} from \"react\";\nimport UserList from \"./UserList\";\nimport UserItem from \"./UserItem\";\nimport Dummy from \"../../utilComp/Dummy\";\n\nimport './selectUsers.scss';\n\nexport default class SelectUsers extends Component{\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            /*\n                the users already selected\n             */\n            selectedUsers: [],\n            showOnlySelected: false\n        }\n    }\n    /*\n        gets called when a user gets selected\n     */\n    selectUser = (uid,username) => {\n        this.setState(state => ({\n            selectedUsers: state.selectedUsers.concat({uid: uid,username: username})\n        }));\n    };\n\n    deselectUser = (uid) => {\n        this.setState(state => {\n            const arrClone = [...state.selectedUsers];\n            const index = arrClone.findIndex(item => {\n                return item.uid === uid;\n            });\n            arrClone.splice(index,1);\n            return {\n                selectedUsers: arrClone\n            }\n        });\n    };\n\n    deselectIndex = index => {\n        this.deselectUser(this.state.selectedUsers[index].uid);\n    };\n\n    isUserSelected = (uid) => {\n        return this.state.selectedUsers.find(item => {\n            return item.uid === uid;\n        });\n    };\n    /*\n        an Array with the uids of the users gets returned to the parent component\n     */\n    btnNextClicked = event => {\n\n        this.props.onNext(this.state.selectedUsers);\n    };\n\n    render() {\n\n        const renderSelectedUsers = () => {\n            if(this.state.selectedUsers.length === 0){\n                return (\n                    <h4>\n                        Noch niemand ausgewählt\n                    </h4>);\n            }else{\n                return(\n                    <h4 className=\"w-100\">\n                        <span className={\"selected-num\" + (this.state.showOnlySelected ? \" selected\" : \"\")}\n                              onClick={event => {\n                                  this.setState(state => ({\n                                      showOnlySelected: !state.showOnlySelected\n                                  }));\n                              }}\n                        >\n                            {this.state.selectedUsers.length}&nbsp;Benutzer\n                        </span>\n                        &nbsp;ausgewählt\n                        <i className=\"fas fa-arrow-right fa-lg float-right btn-next\"\n                           onClick={this.btnNextClicked}\n                        />\n                    </h4>\n                )\n            }\n        };\n        /*\n            selected users cannot be shown if there is no one selected.\n                --> showOnlySelected = false\n         */\n        if(this.state.selectedUsers.length === 0 && this.state.showOnlySelected)\n            this.setState({\n                showOnlySelected: false\n            });\n\n        return(\n            <Dummy>\n                <div className=\"select-users\">\n                    {renderSelectedUsers()}\n                </div>\n                    {!this.state.showOnlySelected ?\n                        <UserList selectUser={this.selectUser}\n                                  deselectUser={this.deselectUser}\n                                  isUserSelected={this.isUserSelected}\n                                  loadUsers={this.props.loadUsers}\n                        />\n                        :\n                        <div className=\"selectUsers\">\n                            <ul className=\"selectUsers only-selected\">\n                                {this.state.selectedUsers.map((item,index) => (\n                                    <UserItem\n                                        key={index}\n                                        index={index}\n                                        uid={item.uid}\n                                        username={item.username}\n                                        selectUser={() => {}}\n                                        deselectUser={this.deselectIndex}\n                                        isSelected={true}\n                                    />\n                                ))}\n                            </ul>\n                        </div>\n                    }\n            </Dummy>\n        )\n    }\n}","import {makeRequest} from \"../../../global/requests\";\n\n/*\n    the specified members will be added to the chat\n        gcid: groupChat -  id\n        users: the users\n            [\n                {uid:(num),username:(str)}\n                {uid:(num),username:(str)}\n            ]\n */\nexport const addMembers = async(gcid,users) => {\n\n    const config = {\n        method: 'PUT',\n        headers: {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n            users: users\n        })\n    };\n\n    const response =\n        await makeRequest(\n            '/group/' + gcid + '/members',\n            config\n        );\n    if(!response.ok){\n        throw new Error(\"Error adding members\");\n    }\n}\n/*\n    all users who are not in the group\n        gcid: groupChat -  id\n        body: the body of the request\n            {\n                search: a search can be specified,\n                limit: 10,\n                start: the number of users who are already loaded\n            }\n */\nexport const fetchUsersNotInGroup = async(gcid,body) => {\n\n    const config = {\n        method: 'POST',\n        headers: {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(body)\n    };\n    const response = await makeRequest(\n        '/user/notInGroup/' + gcid,\n        config\n    );\n    if(response.ok){\n        return await response.json();\n    }else{\n        throw new Error(\"Error fetching users\");\n    }\n}\n/*\n    the user leaves the chat\n        gcid: groupChat -  id\n    throws error if the user is the only admin\n */\nexport const leaveChat = async(gcid) => {\n\n    const config = {\n        method: 'POST',\n        headers: {\n            'Accept': 'application/json'\n        }\n    };\n    const response =\n        await makeRequest(\n            '/group/' + gcid + '/leave',\n            config\n        );\n    if(response.ok) {\n\n        const data = await response.json();\n\n        if(data.error){\n            throw new Error(\"Error leaving chat\");\n        }\n    }else{\n        throw new Error(\"Error leaving chat\");\n    }\n}\n/*\n    the admin status of the user is removed\n        gcid: groupChat -  id\n    throws error if the user is the only admin\n */\nexport const removeSelfAdmin = async(gcid) => {\n\n    const config = {\n        method: 'POST',\n        headers: {\n            'Accept': 'application/json'\n        }\n    };\n\n    const response =\n        await makeRequest(\n            '/group/' + gcid + '/removeAdmin',\n            config\n        );\n\n    if(response.ok) {\n\n        const data = await response.json();\n\n        if(data.error){\n            throw new Error(\"Error removing admin\");\n        }\n    }else{\n        throw new Error(\"Error removing admin\");\n    }\n}","import React from \"react\";\nimport {useHistory} from \"react-router-dom\";\nimport SelectUsers from \"../../selectUsers/SelectUsers\";\nimport {ModalHeader, ModalMain} from \"../../../utilComp/Modal\";\nimport Dummy from \"../../../utilComp/Dummy\";\nimport {addMembers, fetchUsersNotInGroup} from \"./apiCalls\";\n/*\n    props:\n        gcid: id of the groupChat\n */\nexport default function AddUsers(props){\n\n    let history = useHistory();\n\n    const submitUsers = async (selectedUsers) => {\n        /*\n            addMembers call returns nothing\n         */\n        try{\n            await addMembers(props.gcid,selectedUsers);\n            /*\n                if ok, modal is closed\n             */\n            history.goBack();\n        }catch (e){\n            //TODO: error message\n        }\n    };\n\n    const loadUsers = async (\n        searchValue,\n        numAlreadyLoaded\n    ) => {\n\n        return await fetchUsersNotInGroup(\n            props.gcid,{\n                search: searchValue,\n                limit: 10,\n                start: numAlreadyLoaded\n            }\n        )\n    };\n\n    return(\n        <Dummy>\n            <ModalHeader>\n                <h2>\n                    Benutzer hinzufügen\n                </h2>\n            </ModalHeader>\n            <ModalMain>\n                <div className={\"addMembers\"}>\n                    <SelectUsers\n                        onNext={submitUsers}\n                        loadUsers={loadUsers}\n                    />\n                </div>\n            </ModalMain>\n        </Dummy>\n    )\n}","import React,{Component} from \"reactn\";\nimport {Link, withRouter} from \"react-router-dom\";\nimport Dummy from \"../../../utilComp/Dummy\";\nimport {makeRequest} from \"../../../global/requests\";\n\nclass UserOptions extends Component {\n\n    isSelfAdmin = () => {\n        return this.props.memberSelf.isAdmin;\n    };\n\n    isMemberSelf(){\n        return this.props.member.uid === this.global.userSelf.uid;\n    };\n\n    removeMemberFromChat = async () => {\n        if(this.isSelfAdmin()) {\n\n            const config = {\n                method: 'DELETE',\n                headers: {\n                    'Accept': 'application/json'\n                }\n            };\n\n            const response =\n                await makeRequest(\n                    '/group/' + this.props.gcid + '/member/' + this.props.member.uid,\n                    config\n                );\n        }\n    };\n\n    makeMemberAdmin = async () => {\n        if(this.isSelfAdmin()) {\n\n            const config = {\n                method: 'POST',\n                headers: {\n                    'Accept': 'application/json'\n                }\n            };\n\n            const response =\n                await makeRequest(\n                    '/group/' + this.props.gcid + '/member/' + this.props.member.uid + '/giveAdmin',\n                    config\n                );\n\n        }\n    };\n\n    removeMemberAdmin = async () => {\n        if(this.isSelfAdmin()) {\n\n            const config = {\n                method: 'POST',\n                headers: {\n                    'Accept': 'application/json'\n                }\n            };\n\n            const response =\n                await makeRequest(\n                    '/group/' + this.props.gcid + '/member/' + this.props.member.uid + '/removeAdmin',\n                    config\n                );\n        }\n    };\n\n    render(){\n\n        const {pathname} = this.props.location;\n\n        return (\n            <ul className=\"userOptions\">\n                <li key={0}>\n                    <Link to={pathname + \"/userInfo/\" + this.props.member.uid}>\n                        zeige {this.props.member.username} an\n                    </Link>\n                </li>\n                <li key={1}>\n                    <Link to={\"/chat/user/\" + this.props.member.uid}>\n                        Nachricht an {this.props.member.username}\n                    </Link>\n                </li>\n                {/*\n                    if the member is admin, he has more options\n                    */\n                    this.isSelfAdmin() && ! this.isMemberSelf() ?\n                        <Dummy>\n                            <li\n                                key={2}\n                                className=\"noLink\"\n                                onClick={this.removeMemberFromChat}\n                            >\n                                aus chat entfernen\n                            </li>\n                            {this.props.member.isAdmin ?\n                                <li\n                                    key={3}\n                                    className=\"noLink\"\n                                    onClick={this.removeMemberAdmin}\n                                >\n                                    admin status entfernen\n                                </li>\n                                :\n                                <li\n                                    key={4}\n                                    className=\"noLink\"\n                                    onClick={this.makeMemberAdmin}\n                                >\n                                    zu admin machen\n                                </li>\n                            }\n                        </Dummy>\n                        : null\n                }\n            </ul>\n        )\n    }\n}\n\nexport default withRouter(UserOptions);","import React from \"react\";\nimport {Link,useLocation} from \"react-router-dom\";\nimport Dummy from \"../../../utilComp/Dummy\";\nimport {leaveChat, removeSelfAdmin} from \"./apiCalls\";\n\nexport default function ChatOptions(props) {\n\n    const {pathname} = useLocation();\n\n    const isSelfAdmin = () => {\n        return props.memberSelf.isAdmin;\n    };\n\n    return(\n        <ul className=\"chatOptions\">\n            {isSelfAdmin() ?\n                <Dummy>\n                    <li key={0} className=\"addUsers\">\n                        <Link to={pathname + \"/addUsers\"}>\n                            Benutzer hinzufügen\n                        </Link>\n                    </li>\n                    <li\n                        key={1}\n                        className=\"removeSelfAdmin noLink\"\n                        onClick={() => {\n                            removeSelfAdmin(props.gcid)\n                                .then(() => {})\n                                .catch(err => {console.log(err)})\n                        }}\n                    >\n                        admin status entfernen\n                    </li>\n                </Dummy>\n                : null}\n            <li\n                key={2}\n                className=\"leaveChat noLink\"\n                onClick={() => {\n                    leaveChat(props.gcid)\n                        .then(() => {})\n                        .catch(err => {console.log(err)})\n                }}\n            >\n                Chat verlassen\n            </li>\n        </ul>\n    )\n}","import React,{Component} from \"react\";\nimport \"./editableLabel.scss\";\n\nexport default class EditableLabel extends Component{\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            isEditing: false,\n            value: this.props.value\n        }\n    }\n\n    startEdit = () => {\n        this.setState({\n            isEditing: true\n        });\n    }\n\n    cancelEdit = () => {\n        this.setState({\n            isEditing: false,\n            value: this.props.value\n        });\n    }\n\n    submitEdit = event => {\n        event.preventDefault();\n        this.setState({\n            isEditing: false\n        });\n        // did really something change?\n        if(this.props.value !== this.state.value)\n            if(typeof this.props.onChange === \"function\")\n                this.props.onChange(this.state.value)\n    }\n\n    render() {\n        return (\n            <span className={\"label-edit \" + this.props.className}>\n                {this.state.isEditing ?\n                    <form\n                        onSubmit={this.submitEdit}\n                    >\n                        <input\n                            type=\"text\"\n                            value={this.state.value}\n                            style={{width: this.state.value.length + \"ch\"}}\n                            onChange={(event) => {\n                                this.setState({\n                                    value: event.target.value\n                                })\n                            }}\n                        />\n                        &nbsp;&nbsp;\n                        <i\n                            className=\"fas fa-check fa-lg edit-submit\"\n                            onClick={this.submitEdit}\n                        />\n                        &nbsp;&nbsp;\n                        <i\n                            className=\"fas fa-times fa-lg edit-cancel\"\n                            onClick={this.cancelEdit}\n                        />\n                    </form>\n                    :\n\n                    <span\n                        onDoubleClick={this.startEdit}\n                        className={\"value-noEdit\"}\n                    >\n                        {this.props.children != null ?\n                            this.props.children\n                            :\n                            this.state.value\n                        }\n                        &nbsp;\n                        <i\n                            className=\"fas fa-pen edit-start\"\n                            onClick={this.startEdit}\n                        />\n                    </span>\n                }\n            </span>\n        )\n    }\n}","import React,{Component} from \"react\";\nimport {makeRequest} from \"../../../../global/requests\";\nimport EditableLabel from \"../../../../utilComp/EditableLabel\";\n\nexport default class DescriptionEdit extends Component{\n\n    onSubmit = async value => {\n        const config = {\n            method: 'PUT',\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify({\n                description: value\n            })\n        };\n\n        await makeRequest(\n            \"/group/\" + this.props.gcid + \"/description\",\n            config\n        );\n    };\n\n    render () {\n        return (\n            <EditableLabel\n                className={\"description\"}\n                value={this.props.description}\n                onChange={this.onSubmit}\n            />\n        )\n    }\n}","import React,{Component} from \"react\";\nimport {makeRequest} from \"../../../../global/requests\";\nimport EditableLabel from \"../../../../utilComp/EditableLabel\";\n\nexport default class ChatNameEdit extends Component{\n\n    onSubmit = async value => {\n        const config = {\n            method: 'PUT',\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify({\n                chatName: value\n            })\n        };\n\n        await makeRequest(\n            \"/group/\" + this.props.gcid + \"/chatName\",\n            config\n        );\n    };\n\n    render () {\n        return (\n            <EditableLabel\n                className={\"chatName\"}\n                value={this.props.chatName}\n                onChange={this.onSubmit}\n            />\n        )\n    }\n}","import React,{Component} from \"react\";\nimport {withRouter} from 'react-router-dom';\nimport chatSocket from \"../../../chatData/chatSocket\";\nimport Dropdown from \"rc-dropdown\";\nimport UserOptions from \"./UserOptions\";\nimport ChatOptions from \"./ChatOptions\";\nimport DescriptionEdit from \"./edit/editDescription\";\nimport ChatNameEdit from \"./edit/editChatName\";\n\nimport'./groupChatInfo.scss';\n\nclass GroupChatInfo extends Component{\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            error: false\n        }\n    }\n\n    render() {\n\n        if(this.state.error)\n            return(\n                <div className=\"alert alert-danger\" role=\"alert\">\n                    Ein Fehler ist aufgetreten!\n                </div>\n            );\n        const uidSelf = chatSocket.userSelf.uid;\n\n        return(\n            <div className=\"groupChatInfo\">\n                {this.props.data.memberSelf.isAdmin ?\n                    <h1 className=\"chatName\">\n                        <ChatNameEdit\n                            gcid={this.props.gcid}\n                            chatName={this.props.data.chatName}\n                        />\n                    </h1>\n                    :\n                    <div className=\"chatName\">\n                        <h1>\n                            {this.props.data.chatName}\n                        </h1>\n                    </div>\n                }\n                {this.props.data.memberSelf.isAdmin ?\n                    <DescriptionEdit\n                        gcid={this.props.gcid}\n                        description={this.props.data.description}\n                    />\n                    :\n                    <div className=\"description\">\n                        {this.props.data.description}\n                    </div>\n                }\n                <Dropdown\n                    trigger={['click']}\n                    overlay={\n                        <ChatOptions\n                            gcid={this.props.gcid}\n                            memberSelf={this.props.data.memberSelf}\n                        />\n                    }\n                    >\n                    <i\n                        className=\"fas fa-ellipsis-v fa-lg chat-options-btn fa-2x\"\n                        role=\"button\"\n                    />\n                </Dropdown>\n                {this.props.data.memberSelf.isStillMember ?\n                    null\n                    :\n                    <div className={\"error\"}>\n                        Du bist nicht mehr im chat\n                    </div>\n                }\n                <h4>\n                    {this.props.data.members.length}\n                    &nbsp;Mitglieder:\n                </h4>\n                <ul className=\"userList\">\n                    {this.props.data.members.map((item,index) => (\n                        <li key={index}>\n                            <div className=\"userItem\">\n                            {uidSelf === item.uid ?\n                                <span>Du</span>\n                            :\n                                item.username\n                            }\n                            <div className=\"right\">\n                                {item.isAdmin ?\n                                    <span className=\"user-admin\">\n                                        Admin&nbsp;&nbsp;\n                                    </span>\n                                : null}\n                                <Dropdown\n                                    trigger={['click']}\n                                    overlay={\n                                        <UserOptions\n                                            gcid={this.props.gcid}\n                                            memberSelf={this.props.data.memberSelf}\n                                            member={item}\n                                        />\n                                    }\n                                    animation=\"slide-up\"\n                                    alignPoint\n                                >\n                                    <i\n                                        className=\"fas fa-ellipsis-v fa-lg\"\n                                        role=\"button\"\n                                    />\n                                </Dropdown>\n                            </div>\n                            </div>\n                        </li>\n                    ))}\n                </ul>\n            </div>\n        );\n    }\n}\nexport default withRouter(GroupChatInfo);","import React from \"react\";\nimport {Route, Switch, useRouteMatch} from \"react-router-dom\";\nimport Modal from \"../../../utilComp/Modal\";\nimport AddUsers from \"./AddUsers\";\nimport GroupChatInfo from \"./GroupChatInfo\";\nimport Responsive from \"../../../responsive/Responsive\";\nimport Dummy from \"../../../utilComp/Dummy\";\n\nexport default function ModalRouterGroupChatInfo(props){\n\n    let { path } = useRouteMatch();\n\n    const groupChatInfo = (\n        <GroupChatInfo\n            gcid={props.gcid}\n            data={props.data}\n        />\n    );\n\n    return(\n        <Dummy>\n            <Responsive displayIn={[\"Mobile\"]}>\n                <Switch>\n                    <Route path={`${path}/addUsers`}>\n                        <AddUsers\n                            gcid={props.gcid}\n                        />\n                    </Route>\n                    <Route path={\"*\"}>\n                        {groupChatInfo}\n                    </Route>\n                </Switch>\n            </Responsive>\n            <Responsive displayIn={[\"Laptop\",\"Tablet\"]}>\n                <Switch>\n                    <Route path={`${path}/addUsers`}>\n                        <Modal>\n                                <AddUsers\n                                    gcid={props.gcid}\n                                />\n                        </Modal>\n                    </Route>\n                </Switch>\n                {groupChatInfo}\n            </Responsive>\n        </Dummy>\n    )\n}","import React,{Component} from \"reactn\";\nimport ChatViewLoader from \"./ChatViewLoader\";\nimport ChatContainer from \"./chatContainer/ChatContainer\";\nimport chatSocket from \"../../chatData/chatSocket\";\nimport {infoHeaderCenter} from \"../Header/HeaderLeft\";\nimport ModalRouterGroupChatInfo from \"./groupChatInfo/ModalRouterGroupChatInfo\";\nimport {\n    AddressNotValid,\n    ChatNotExisting,\n    NoAuthorization,\n    NoMemberInPublicChat,\n    GeneralError\n} from \"./chatViewErrorMessages\";\nimport {loadGroupChat} from \"./apiCalls\";\n\nexport const groupChatErrorCode = {\n    none: 0,\n    nan: 1,\n    chatNotExisting: 2,\n    notPartOfChat: 3,\n    private: 4,\n    general: 5\n};\n\nexport const groupChatTabs = {\n    chat: 0,\n    info: 1\n};\n\nexport default class GroupChatView extends Component{\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            gcid: 0,\n            loaded: false,\n            chatData: null,\n            error: groupChatErrorCode.none\n        }\n    }\n\n    loadGroupChatInfo = async(gcid) => {\n\n        try {\n            const response = await loadGroupChat(this.props.gcid);\n\n            if(response.status === 403)\n                return groupChatErrorCode.private;\n\n            else if(response.status === 404)\n                return groupChatErrorCode.chatNotExisting;\n\n            else if (response.ok) {\n\n                let data = await response.json();\n\n                this.setState({\n                    chatData: data\n                });\n\n                if(data.error) {\n                    return groupChatErrorCode.general\n\n                }else if(chatSocket.chats.group.getIndex(gcid) !== -1){\n\n                    return groupChatErrorCode.none;\n                }else if(data.public){\n                    return groupChatErrorCode.notPartOfChat\n                }\n            }\n            else {\n                return groupChatErrorCode.general\n            }\n        } catch (err) {\n            return groupChatErrorCode.general\n        }\n    };\n    /*\n        is called after the chatId changed\n     */\n    chatChanged = () => {\n        /*\n            is props.gcid a number?\n         */\n        if(isNaN(this.props.gcid)){\n            this.setState({\n                error: groupChatErrorCode.nan,\n                loaded: true\n            });\n        }else{\n\n            const chatExists = () => {\n\n                const gcid = parseInt(this.props.gcid);\n\n                this.loadGroupChatInfo(gcid)\n                    .then(r => {\n                        if (r === groupChatErrorCode.none) {\n\n                            this.selectGroupChat(gcid);\n                            this.setState({\n                                loaded: true,\n                                error: groupChatErrorCode.none,\n                                gcid: gcid\n                            });\n                            this.setGlobal({\n                                infoHeaderCenter: infoHeaderCenter.groupChat,\n                                ihcData: {\n                                    name: chatSocket.chats.group.get(gcid).chatName,\n                                    gcid: gcid\n                                }\n                            }).then();\n                        } else if(r === groupChatErrorCode.notPartOfChat){\n                            this.setState({\n                                loaded: true,\n                                error: r,\n                                gcid: gcid\n                            });\n                        } else {\n                            this.setState({\n                                loaded: true,\n                                error: r\n                            });\n                        }\n                    })\n                    .catch();\n            };\n\n            if (chatSocket.finishedLoading) {\n                chatExists();\n            } else {\n                chatSocket.event.on('chats loaded', () => {\n                    chatExists();\n                });\n            }\n        }\n    };\n    /*\n        groupChat is selected\n     */\n    selectGroupChat(gcid){\n        /*\n            does the chat exist?\n         */\n        if (chatSocket.chats.group.getIndex(gcid) === -1) {\n\n            this.setState({\n                error: groupChatErrorCode.chatNotExisting\n            })\n        } else {\n\n            const chat = chatSocket.chats.group.get(gcid)\n            this.dispatch.selectChat(chat);\n        }\n    }\n    reloadChatInfo = () => {\n        if(this.state.error === groupChatErrorCode.none) {\n            const gcid = parseInt(this.props.gcid);\n            this.loadGroupChatInfo(gcid).then(() => {\n            });\n        }\n    }\n    /*\n        set socket listener for groupChat updated\n     */\n    setChatUpdated = () => {\n        chatSocket.event.on('groupChat updated',this.reloadChatInfo);\n    }\n    // remove socket listener\n    removeChatUpdated = () => {\n        chatSocket.event.rm('groupChat updated',this.reloadChatInfo)\n    }\n\n    componentDidMount = () => {\n        this.chatChanged();\n        this.setChatUpdated();\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        /*\n            did gcid change?\n         */\n        if(prevProps.gcid !== this.props.gcid){\n            this.chatChanged();\n        }\n    }\n\n    componentWillUnmount() {\n        this.removeChatUpdated();\n        this.setGlobal({\n            infoHeaderCenter: infoHeaderCenter.none,\n            ihcData: null\n        }).then();\n    }\n\n    render() {\n        const renderLoader = () => {\n            if(!this.state.loaded){\n                return(\n                    <ChatViewLoader\n                        msg=\"Chat wird geladen\"\n                    />\n                )\n            }\n        };\n\n        const renderChat = () => {\n            /*\n                es wird überprüft, ob uid number ist\n                --> wenn nicht, ungültige Addresse\n             */\n            if (this.state.error === groupChatErrorCode.nan) {\n                return (\n                    <AddressNotValid/>\n                );\n            }\n            /*\n                chat wird nur gerendert, wenn geladen\n             */\n            else if (this.state.loaded) {\n\n                switch(this.state.error){\n\n                    case groupChatErrorCode.none:\n\n                        switch(this.props.tab){\n                            case(groupChatTabs.chat):\n                                return (\n                                    <ChatContainer\n                                        chatType={this.global.currentChat.type}\n                                        chatId={this.global.currentChat.id}\n                                    />\n                                );\n\n                            case(groupChatTabs.info):\n                                return(\n                                    <ModalRouterGroupChatInfo\n                                        gcid={this.state.gcid}\n                                        data={this.state.chatData}\n                                    />\n                                );\n\n                            default:\n                                return null;\n                        }\n\n                    case groupChatErrorCode.notPartOfChat:\n                        return (\n                            <NoMemberInPublicChat\n                                gcid={this.state.gcid}\n                                onJoined={this.chatChanged}\n                            />\n                        );\n\n                    case groupChatErrorCode.private:\n                        return (\n                            <NoAuthorization/>\n                        );\n\n                    case groupChatErrorCode.chatNotExisting:\n                        return (\n                            <ChatNotExisting/>\n                        );\n\n                    case groupChatErrorCode.general:\n                        return(\n                            <GeneralError/>\n                        );\n\n                    default:\n                        return null;\n                }\n            }\n        };\n\n        return (\n            <div className=\"h-100\">\n                {renderLoader()}\n                {renderChat()}\n            </div>\n        );\n    }\n}","import React,{Component} from \"react\";\nimport Dummy from \"../../utilComp/Dummy\";\nimport InfiniteScroll from 'react-infinite-scroller';\n\nimport './selectChat.scss';\n\nconst errorCode={\n    none: 0,\n    error: 1\n};\n/*\n    props:\n        showSearchBar: boolean\n            if false: searchValue comes as prop\n        searchValue\n        loadChats: function(searchValue,numAlreadyLoaded)\n */\nexport default class SelectChat extends Component{\n\n    scrollParentRef;\n    lastRequest = {};\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            error: errorCode.none,\n            showOptions: false,\n            /*\n                the value of the search input\n             */\n            searchValue: '',\n            /*\n                the last search result received from the server\n             */\n            searchResult: [],\n            /*\n                are there items left?\n             */\n            hasMore: true\n        };\n    }\n    /*\n        gets called when the search of the user changed. the new result gets requested\n     */\n    searchChanged = (searchValue) => {\n\n        this.setState({\n            searchValue: searchValue,\n            searchResult: [],\n            hasMore: true\n        });\n    };\n    /*\n        more chats are loaded\n     */\n    loadChats = async () => {\n\n        const searchValue = this.state.searchValue;\n        const length = this.state.searchResult.length;\n\n        if(\n            this.lastRequest.searchValue !== searchValue\n            || this.lastRequest.length !== length\n        ) {\n\n            this.lastRequest = {\n                searchValue: searchValue,\n                length: length\n            };\n\n            try {\n\n                const response = await this.props.loadChats(\n                    searchValue,\n                    length\n                );\n\n                if (response.ok) {\n                    //return json\n                    let data = await response.json();\n\n                    if (data.length === 0) {\n                        this.setState({\n                            hasMore: false\n                        })\n                    } else {\n                        this.setState(state => ({\n                            searchResult: state.searchResult.concat(data)\n                        }));\n                    }\n                    this.setState({\n                        error: errorCode.none\n                    });\n                } else {\n                    this.setState({\n                        error: errorCode.error\n                    });\n                }\n            } catch (error) {\n                this.setState({\n                    error: errorCode.error\n                });\n            }\n        }\n    };\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        /*\n            is searchBar is not shown,\n                it is checked if searchValue has changed\n         */\n        if(!this.props.showSearchBar){\n            if(this.props.searchValue !== prevProps.searchValue){\n                this.searchChanged(this.props.searchValue);\n            }\n        }\n    }\n\n    render() {\n\n        if(this.state.error === errorCode.error){\n            return(\n                <div className=\"alert alert-danger\" role=\"alert\" key={0}>\n                    Ein Fehler ist aufgetreten!\n                </div>\n            )\n        }\n            return (\n                <Dummy>\n                    {/*\n                        if showSearchBar is true, it gets shown\n                         */\n                        this.props.showSearchBar ?\n                            <div className=\"user-top\">\n                                <div className=\"searchUser\">\n                                    <input type=\"text\"\n                                           name=\"newChat-searchUser\"\n                                           className=\"form-control\"\n                                           placeholder=\"Benutzer suchen\"\n                                           onChange={(event) => {\n                                               this.searchChanged()\n                                           }}\n                                    />\n                                </div>\n                            </div>\n                            : null\n                    }\n                    <div\n                        className=\"selectChat\"\n                        ref={ref => this.scrollParentRef = ref}\n                    >\n                        <InfiniteScroll\n                            pageStart={0}\n                            loadMore={this.loadChats}\n                            hasMore={this.state.hasMore}\n                            loader={\n                                <div className=\"loader\" key={-1}>\n                                    <div\n                                        className=\"spinner-border text-secondary\"\n                                        role=\"status\"\n                                    >\n                                        <span className=\"sr-only\">\n                                            Loading...\n                                        </span>\n                                    </div>\n                                </div>\n                            }\n                            useWindow={false}\n                            getScrollParent={() => this.scrollParentRef}\n                            >\n                            <ul\n                                className=\"selectChat\">\n                                {this.state.searchResult.map((item, index) => (\n                                    this.props.renderItem(item,index)\n                                ))}\n                                {this.state.searchResult.length === 0 ?\n                                    <div key={-1} className=\"nothingFound\">\n                                        Nichts gefunden!\n                                    </div>\n                                    :\n                                    null\n                                }\n                            </ul>\n                        </InfiniteScroll>\n                    </div>\n                </Dummy>\n            );\n    }\n}","import {makeRequest} from \"../../global/requests\";\n\nexport async function requestUsersNoChat(body){\n    const config = {\n        method: 'POST',\n        headers: {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(body)\n    };\n    /*\n        response is returned\n     */\n    return await makeRequest('/user/noChat', config);\n}\nexport async function createGroupChat(body){\n    const config = {\n        method: 'PUT',\n        headers: {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(body)\n    };\n    return await makeRequest('/group/', config);\n}\nexport async function fetchUsers(body){\n    const config = {\n        method: 'POST',\n        headers: {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(body)\n    };\n    const response = await makeRequest('/user/', config);\n\n    if(response.ok){\n        return await response.json();\n    }else{\n        throw new Error(\"Error fetching users\");\n    }\n}\nexport async function fetchPublicGroups(body){\n    const config = {\n        method: 'POST',\n        headers: {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(body)\n    };\n    return  await makeRequest('/group/public/', config);\n}","import React, {Component} from \"react\";\nimport {Link,withRouter} from \"react-router-dom\";\nimport chatSocket from \"../../../chatData/chatSocket\";\n\nclass UserItem extends Component{\n\n    elementClicked = event => {\n\n        chatSocket.temporaryChat.createNew(this.props.uid,this.props.username);\n    };\n\n    render() {\n        return(\n            <li>\n                <Link to={\"/chat/user/\" + this.props.uid}\n                      onClick={this.elementClicked}\n                      replace={true}\n                >\n                {this.props.username}\n                </Link>\n            </li>\n        )\n    }\n}\nexport default withRouter(UserItem);","import React,{Component} from \"react\";\nimport {tabs} from \"../NewChat\";\nimport Dummy from \"../../../utilComp/Dummy\";\nimport SelectChat from \"../../selectChat/SelectChat\";\nimport Dropdown from 'rc-dropdown';\nimport {requestUsersNoChat} from \"../apiCalls\";\nimport UserItem from \"./UserItem\";\n\nimport 'rc-dropdown/assets/index.css';\n\nimport './chooseUser.scss';\n\nconst errorCode={\n    none: 0,\n    error: 1\n};\n\nexport default class ChooseUser extends Component{\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            error: errorCode.none,\n            /*\n                the value of the search input\n             */\n            searchValue: ''\n        };\n    }\n    /*\n        when new group gets clicked\n     */\n    newGroupClick = event => {\n        event.stopPropagation();\n        this.props.setCurrentTab(tabs.newGroup);\n    };\n    /*\n        when join group is clicked\n     */\n    joinGroupClick = event => {\n        event.stopPropagation();\n        this.props.setCurrentTab(tabs.chooseGroup);\n    };\n    /*\n        gets called when the search of the user changed. the new result gets requested\n     */\n    searchChanged = event => {\n        const searchValue = event.target.value;\n\n        const searchValid = true;\n\n        this.setState({\n            searchValue: searchValue,\n            searchValid: searchValid\n        });\n    };\n\n    loadChats = async (\n        searchValue,\n        numAlreadyLoaded\n    ) => {\n\n        /*\n            response is returned\n         */\n        return await requestUsersNoChat({\n            search: searchValue,\n            limit: 10,\n            start: numAlreadyLoaded\n        });\n    };\n\n    render() {\n\n        const options = (\n            <div className=\"options\">\n                <ul>\n                    <li onClick={this.newGroupClick}>\n                        neue Gruppe\n                    </li>\n                    <li onClick={this.joinGroupClick}>\n                        einer Gruppe beitreten\n                    </li>\n                </ul>\n            </div>\n        );\n\n        return(\n            <Dummy>\n                <div className=\"user-top\">\n                    <div className=\"searchUser\">\n                        <input type=\"text\"\n                               name=\"newChat-searchUser\"\n                               className=\"form-control\"\n                               placeholder=\"Benutzer suchen\"\n                               onChange={this.searchChanged}\n                        />\n                    </div>\n                    <div className=\"user-more\">\n                        <Dropdown\n                            trigger={['click']}\n                            overlay={options}\n                            animation=\"slide-up\"\n                            alignPoint\n                        >\n                            <i className=\"fas fa-ellipsis-h fa-2x\"\n                               role=\"button\"\n                            />\n                        </Dropdown>\n                    </div>\n                </div>\n                <SelectChat\n                    showSearchBar={false}\n                    searchValue={this.state.searchValue}\n                    loadChats={this.loadChats}\n                    renderItem={(item,index) => (\n                        <UserItem\n                            key={index}\n                            uid={item.uid}\n                            username={item.username}\n                        />\n                    )}\n                />\n            </Dummy>\n        );\n    }\n}","import React, {Component} from \"reactn\";\nimport {withRouter} from \"react-router-dom\";\nimport {joinGroupChat} from \"../../chatView/apiCalls\";\nimport chatSocket from \"../../../chatData/chatSocket\";\n\nclass ChatItem extends Component{\n\n    newChat = data => {\n        if(data.id === this.props.id){\n            // select chat\n            const chat = chatSocket.getChat('groupChat',this.props.id);\n            this.dispatch.selectChat(chat).then(() => {\n                this.props.history.push('/chat/group/' + this.props.id);\n                chatSocket.event.rm('new chat',this.newChat);\n            });\n        }\n    };\n\n    elementClicked = event => {\n\n        chatSocket.event.on('new chat',this.newChat);\n        joinGroupChat(this.props.id)\n            .then(() => {\n            })\n            .catch(() => {})\n    };\n\n    render() {\n        return(\n            <li>\n                <span\n                    className={\"item\"}\n                    onClick={this.elementClicked}\n                >\n                    {this.props.name}\n                </span>\n            </li>\n        )\n    }\n}\nexport default withRouter(ChatItem);","import React,{Component} from \"react\";\nimport Dummy from \"../../../utilComp/Dummy\";\nimport SelectChat from \"../../selectChat/SelectChat\";\nimport 'rc-dropdown/assets/index.css';\nimport {fetchPublicGroups} from \"../apiCalls\";\nimport ChatItem from \"./ChatItem\";\n\nimport './chooseGroup.scss';\n\nconst errorCode={\n    none: 0,\n    error: 1\n};\n\nexport default class ChooseGroup extends Component{\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            error: errorCode.none,\n            /*\n                the value of the search input\n             */\n            searchValue: ''\n        };\n    }\n    /*\n        gets called when the search of the user changed. the new result gets requested\n     */\n    searchChanged = event => {\n        const searchValue = event.target.value;\n\n        const searchValid = true;\n\n        this.setState({\n            searchValue: searchValue,\n            searchValid: searchValid\n        });\n    };\n\n    loadChats = async (\n        searchValue,\n        numAlreadyLoaded\n    ) => {\n\n        /*\n            response is returned\n         */\n        return await fetchPublicGroups({\n            search: searchValue,\n            limit: 10,\n            start: numAlreadyLoaded,\n            isNotPart: true\n        });\n    };\n\n    render() {\n\n        return(\n            <Dummy>\n                <div className=\"chooseGroup-top\">\n                    <div className=\"searchGroup\">\n                        <input type=\"text\"\n                               name=\"newChat-searchGroup\"\n                               className=\"form-control\"\n                               placeholder=\"Gruppe suchen\"\n                               onChange={this.searchChanged}\n                        />\n                    </div>\n                </div>\n                <SelectChat\n                    showSearchBar={false}\n                    searchValue={this.state.searchValue}\n                    loadChats={this.loadChats}\n                    renderItem={(item,index) => (\n                        <ChatItem\n                            key={index}\n                            id={item.id}\n                            name={item.name}\n                        />\n                    )}\n                />\n            </Dummy>\n        );\n    }\n}","export default __webpack_public_path__ + \"static/media/placeholder.3c40b139.png\";","import React,{Component} from \"react\";\n\nimport './groupInfoForm.scss';\nimport placeholder from '../../../img/placeholder.png';\n\nexport default class GroupInfoForm extends Component{\n\n    constructor(props) {\n        super(props);\n        this.state={\n            groupName: '',\n            description: '',\n            isPublic: false\n        }\n    }\n\n    groupNameChanged = event => {\n        this.setState({\n            groupName: event.target.value\n        })\n    };\n\n    descriptionChanged = event => {\n        this.setState({\n            description: event.target.value\n        })\n    };\n\n    isPublicChanged = () => {\n        this.setState(state => ({\n           isPublic: !state.isPublic\n        }));\n    };\n\n    formSubmitted = event => {\n\n        event.preventDefault();\n\n        if(this.state.groupName !== '')\n            this.props.submitGroup({\n                name: this.state.groupName,\n                description: this.state.description,\n                isPublic: this.state.isPublic\n            });\n    };\n\n    render() {\n\n        return(\n            <div className=\"groupInfoForm\">\n                <form onSubmit={this.formSubmitted}>\n                    <img\n                        style={{\n                            display: 'none'\n                        }}\n                        id=\"groupImgInput1\"\n                        src={placeholder}\n                        alt=\"Placeholder\"\n                    />\n                    <div className=\"form-group\">\n                        <label htmlFor=\"exampleFormControlInput1\">\n                            Gruppenname\n                        </label>\n                        <input type=\"text\"\n                               name=\"groupName\"\n                               className=\"form-control\"\n                               id=\"input-groupName\"\n                               placeholder=\"Gruppenname\"\n                               value={this.state.name}\n                               onChange={this.groupNameChanged}\n                               minLength={1}\n                        />\n                    </div>\n                    <div className=\"form-group\">\n                        <label\n                            htmlFor=\"description1\"\n                        >\n                            Beschreibung\n                        </label>\n                        <textarea\n                            className=\"form-control\"\n                            id=\"description1\"\n                            rows=\"3\"\n                            value={this.state.description}\n                            onChange={this.descriptionChanged}\n                        />\n                    </div>\n                    <div className=\"form-group\">\n                        <label className=\"check-container\">\n                            öffentlicher chat\n                            <input\n                                type=\"checkbox\"\n                                checked={this.state.isPublic}\n                                onChange={this.isPublicChanged}\n                            />\n                            <span className=\"checkmark\">\n                                <i className=\"fas fa-check\" />\n                            </span>\n                        </label>\n                    </div>\n                    <div className=\"form-group\">\n                        <button\n                            type=\"submit\"\n                            className=\"float-right btn btn-primary m-3\"\n                        >\n                            Gruppe erstellen\n                        </button>\n                    </div>\n                </form>\n            </div>\n        )\n    }\n}","import React,{Component} from \"react\";\nimport {withRouter} from \"react-router-dom\";\nimport SelectUsers from \"../../selectUsers/SelectUsers\";\nimport GroupInfoForm from \"./GroupInfoForm\";\nimport {createGroupChat, fetchUsers} from \"../apiCalls\";\n\nconst tabs = {\n    selectUsers: 0,\n    enterChatInfo: 1\n};\n\nclass NewGroup extends Component{\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            currentTab: tabs.selectUsers,\n            selectedUsers: []\n        }\n    }\n\n    showEnterChatInfo = selectedUsers => {\n\n        this.setState({\n            currentTab: tabs.enterChatInfo,\n            selectedUsers: selectedUsers\n        });\n    };\n\n    submitGroup = data => {\n\n        const users = new Array(this.state.selectedUsers.length);\n        for(let i=0;i<this.state.selectedUsers.length;i++){\n            users[i] = {\n                uid: this.state.selectedUsers[i].uid,\n                username: this.state.selectedUsers[i].username,\n                isAdmin: false\n            };\n        }\n\n        this.createGroupChat(data,users).then(r => {});\n    };\n\n    createGroupChat = async (data,users) => {\n        try {\n            const response = await createGroupChat({\n                data: data,\n                users: users\n            });\n            /*\n                if ok, modal is closed\n             */\n            if(response.ok)\n                this.props.history.goBack();\n\n        }catch(error){\n\n        }\n    };\n\n    loadUsers = async (\n        searchValue,\n        numAlreadyLoaded\n    ) => {\n        /*\n            response is returned\n         */\n        return await fetchUsers({\n            search: searchValue,\n            limit: 10,\n            start: numAlreadyLoaded\n        })\n    };\n\n    render() {\n\n        switch(this.state.currentTab){\n\n            case tabs.selectUsers:\n                return (\n                    <SelectUsers\n                        onNext={this.showEnterChatInfo}\n                        loadUsers={this.loadUsers}\n                    />\n                );\n\n            case tabs.enterChatInfo:\n                return(\n                    <GroupInfoForm\n                        submitGroup={this.submitGroup}\n                    />\n                );\n\n            default:\n                return null;\n        }\n    }\n}\nexport default withRouter(NewGroup);","import React,{Component} from \"react\";\nimport ChooseUser from \"./chooseUser/ChooseUser\";\nimport ChooseGroup from \"./chooseGroup/ChooseGroup\";\nimport NewGroup from \"./newGroup/NewGroup\";\nimport Dummy from \"../../utilComp/Dummy\";\nimport {ModalHeader,ModalMain} from \"../../utilComp/Modal\";\n\nimport './newChat.scss';\n\nexport const tabs = {\n    chooseUser: 0,\n    newGroup: 1,\n    chooseGroup: 2\n};\n\nexport default class NewChat extends Component{\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            currentTab: tabs.chooseUser\n        }\n    }\n\n    setCurrentTab = newTab => {\n        this.setState({\n            currentTab: newTab\n        });\n    };\n\n    render() {\n\n        const router = () => {\n\n            switch (this.state.currentTab) {\n\n                case tabs.chooseUser:{\n                    return(\n                        <ChooseUser\n                            setCurrentTab={this.setCurrentTab}\n                            hide={this.props.hide}\n                        />\n                    );\n\n                }\n\n                case tabs.newGroup:{\n                    return(\n                        <NewGroup />\n                    );\n                }\n\n                case tabs.chooseGroup:{\n                    return(\n                        <ChooseGroup/>\n                    );\n                }\n\n\n                default: {\n                    return(\n                        <ChooseUser\n                            setCurrentTab={this.setCurrentTab}\n                            hide={this.props.hide}\n                        />\n                    );\n                }\n            }\n        };\n\n        const getHeader = () => {\n\n            switch(this.state.currentTab){\n\n                case tabs.chooseUser:\n                    return 'Neuer Chat';\n\n                case tabs.newGroup:\n                    return 'Neue Gruppe';\n\n                case tabs.chooseGroup:\n                    return 'Gruppe auswählen';\n\n                default:\n                    return 'Neuer Chat';\n\n            }\n        };\n\n        return(\n            <Dummy>\n                <ModalHeader>\n                    <h1>{getHeader()}</h1>\n                </ModalHeader>\n                <ModalMain>\n                    <div className=\"newChat\">\n                        {router()}\n                    </div>\n                </ModalMain>\n            </Dummy>\n        )\n    }\n}","import {makeRequest} from \"../../global/requests\";\n\nexport const fetchUserInfo = async (uid) => {\n    const config = {\n        method: 'GET',\n        headers: {\n            'Accept': 'application/json'\n        }\n    };\n    const response = await makeRequest('/user/' + uid, config);\n\n    if(response.ok){\n        return await response.json();\n    }else{\n        throw new Error(\"Error fetching UserInfo\");\n    }\n}\nexport const blockUser = async (uid) => {\n    const config = {\n        method: 'GET',\n        headers: {\n            'Accept': 'application/json'\n        }\n    };\n    return await makeRequest('/user/block/' + uid, config);\n}\nexport const unblockUser = async (uid) => {\n    const config = {\n        method: 'GET',\n        headers: {\n            'Accept': 'application/json'\n        }\n    };\n    return await makeRequest('/user/unblock/' + uid, config);\n}","import React,{Component} from 'react';\nimport {blockUser,unblockUser} from \"./userInfoApiCalls\";\n\nexport default class UserOptions extends Component {\n\n    blockUser = () => {\n        blockUser(this.props.uid)\n            .then(response => {\n                if(response.ok)\n                    this.props.onBlockedBySelfChanged(true);\n            })\n            .catch(() => {});\n    }\n\n    unblockUser = () => {\n        unblockUser(this.props.uid)\n            .then(response => {\n                if(response.ok)\n                    this.props.onBlockedBySelfChanged(false);\n            })\n            .catch(() => {});\n    }\n\n    render() {\n        return(\n            <ul className={\"userOptions\"}>\n                {!this.props.userInfo.blockedBySelf ?\n                    <li\n                        className={\"noLink\"}\n                        onClick={this.blockUser}\n                    >\n                        blockieren\n                    </li>\n                    :\n                    <li\n                        className={\"noLink\"}\n                        onClick={this.unblockUser}\n                    >\n                        nicht mehr blockieren\n                    </li>\n                }\n            </ul>\n        )\n    }\n}","import React, {Component} from \"react\";\nimport {Link} from 'react-router-dom';\nimport {ModalHeader, ModalMain} from \"../../utilComp/Modal\";\nimport Dummy from \"../../utilComp/Dummy\";\nimport {fetchUserInfo} from \"./userInfoApiCalls\";\nimport chatSocket from \"../../chatData/chatSocket\";\nimport Dropdown from \"rc-dropdown\";\nimport UserOptions from \"./UserOptions\";\n\nimport './userInfo.scss'\n\nexport const errorCode = {\n    none: 0,\n    isSelf: 1,\n    //not a number\n    nan: 2,\n    notExisting: 3,\n    defaultError: 4\n};\n\nexport default class UserInfo extends Component{\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            uid: 0,\n            loaded: false,\n            error: errorCode.none,\n            // the loaded data\n            userInfo: null\n        }\n    }\n\n    render() {\n        /*\n            if not already loaded, show nothing\n         */\n        if(!this.state.loaded){\n            return null;\n        }\n        /*\n            if the user self is requested\n         */\n        else if(this.state.error === errorCode.isSelf){\n            return(\n                <Dummy>\n                    <ModalHeader>\n                        <h1>\n                            Du\n                        </h1>\n                    </ModalHeader>\n                    <ModalMain>\n                        xx\n                    </ModalMain>\n                </Dummy>\n            )\n        /*\n            if there is a error, show a generic error message\n         */\n        }else if(this.state.error !== errorCode.none){\n            return(\n                <div>Error!</div>\n            )\n        /*\n            no error, show the userInfo\n         */\n        }else{\n            return(\n                <Dummy>\n                    <ModalHeader>\n                        <h1>\n                            {this.state.userInfo.username}\n                            &nbsp;\n                            <Link to={\"/chat/user/\" + this.state.uid}>\n                                <i className=\"far fa-comment-alt\" />\n                            </Link>\n                            &nbsp;&nbsp;\n                            <Dropdown\n                                trigger={['hover','click']}\n                                overlay={\n                                    <UserOptions\n                                        uid={this.state.uid}\n                                        userInfo={this.state.userInfo}\n                                        onBlockedBySelfChanged={blockedBySelf => {\n                                            this.setState(state => ({\n                                                userInfo: {\n                                                    ...state.userInfo,\n                                                    blockedBySelf: blockedBySelf\n                                                }\n                                            }))\n                                            this.updateChat();\n                                        }}\n                                    />\n                                }\n                            >\n                                <i\n                                    className=\"fas fa-ellipsis-v user-options-btn \"\n                                    role=\"button\"\n                                />\n                            </Dropdown>\n                        </h1>\n                    </ModalHeader>\n                    <ModalMain>\n                        <div className=\"userInfo\">\n                            {this.state.userInfo.blockedByOther ?\n                                <div className={\"error\"}>\n                                    Du wurdest von {this.state.userInfo.username} blockiert\n                                </div>\n                                :\n                                null\n                            }\n                            {this.state.userInfo.blockedBySelf ?\n                                <div className={\"error\"}>\n                                    Du hast {this.state.userInfo.username} blockiert\n                                </div>\n                                :\n                                null\n                            }\n                            {!this.isBlocked() ?\n                                this.state.userInfo.groups.length > 0 ?\n                                    <Dummy>\n                                        <h3>{this.state.userInfo.groups.length} gemeinsame Gruppen:</h3>\n                                        <ul className={\"groupList\"}>\n                                            {this.state.userInfo.groups.map((item,index) => (\n                                                <li key={index}>\n                                                    <Link to={\"/chat/group/\" + item.id}>\n                                                        {item.chatName}\n                                                    </Link>\n                                                </li>\n                                            ))}\n                                        </ul>\n                                    </Dummy>\n                                    :\n                                    <h3>\n                                        keine gemeinsamen Gruppen\n                                    </h3>\n                            :\n                                null}\n                        </div>\n                    </ModalMain>\n                </Dummy>\n            )\n        }\n    }\n\n    isBlocked = () => {\n        return this.state.userInfo.blockedBySelf || this.state.userInfo.blockedByOther;\n    }\n\n    updateChat = () => {\n        // update the chat in global\n        if(chatSocket.users.getIndex(this.state.uid) !== -1)\n            chatSocket.users.get(this.state.uid).updateChatBlockInfo(this.state.userInfo);\n    }\n\n    setUser = async() => {\n\n        if(isNaN(this.props.uid)){\n            this.setState({\n                error: errorCode.nan\n            });\n        }else{\n            const uid = parseInt(this.props.uid);\n            this.setState({\n                uid: uid,\n                error: errorCode.none,\n                loaded: false\n            });\n            try {\n                const data = await fetchUserInfo(uid)\n                const uidSelf = chatSocket.userSelf.uid;\n\n                if (uidSelf === uid) {\n                    this.setState({\n                        error: errorCode.isSelf,\n                        loaded: true\n                    });\n                }else if(!data.userExists){\n                    this.setState({\n                        error: errorCode.notExisting,\n                        loaded: true\n                    });\n                }else {\n                    this.setState({\n                        userInfo: data,\n                        loaded: true\n                    });\n                }\n            }catch(err){\n                this.setState({\n                    error: errorCode.defaultError,\n                    loaded: true\n                });\n            }\n        }\n    };\n\n    async componentDidMount() {\n        try {\n            await this.setUser();\n        }catch(err){\n            this.setState({\n                error: 4,\n                loaded: true\n            });\n        }\n    }\n\n    async componentDidUpdate(prevProps, prevState, snapshot) {\n        try{\n            /*\n                check if uid changed\n             */\n            if(prevProps.uid !== this.props.uid){\n                await this.setUser();\n            }\n        }catch(err){\n            this.setState({\n                error: 4,\n                loaded: true\n            });\n        }\n    }\n}","import {makeRequest} from \"../../global/requests\";\n\nexport const getUserSelf = async () => {\n\n    const config = {\n        method: 'GET',\n        headers: {\n            'Accept': 'application/json',\n        }\n    };\n\n    const response =\n        await makeRequest(\n            '/user/self',\n            config\n        );\n    if(response.ok){\n        return await response.json();\n    }else{\n        throw new Error(\"Error requesting user info!\");\n    }\n}\n\nexport const setEmail = async (body) => {\n\n    const config = {\n        method: 'POST',\n        headers: {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(body)\n    };\n\n    return await makeRequest(\n        '/user/setEmail',\n        config\n    );\n}","import {makeRequest} from \"./requests\";\n\nexport async function subscribePush(tokens) {\n    // Get the server's public key\n    const response = await makeRequest('/push/vapidPublicKey', {method: 'get'}, tokens);\n    const vapidPublicKey = await response.text();\n    // Chrome doesn't accept the base64-encoded (string) vapidPublicKey yet\n    const convertedVapidKey = urlBase64ToUint8Array(vapidPublicKey);\n\n    await navigator.serviceWorker.register('/push-service-worker.js');\n\n    navigator.serviceWorker.ready.then(registration => {\n        if (!registration.pushManager) {\n            console.log(\"Push Unsupported\")\n            return\n        }\n\n        registration.pushManager\n            .subscribe({\n                userVisibleOnly: true, //Always display notifications\n                applicationServerKey: convertedVapidKey\n            })\n            .then(subscription => {\n                return makeRequest('/push/register', {\n                    method: 'post',\n                    headers: {\n                        'Content-type': 'application/json'\n                    },\n                    body: JSON.stringify({\n                        subscription: subscription\n                    }),\n                }, tokens)\n            })\n            .catch(err => console.error(\"Push subscription error: \", err))\n    }).catch(err => {\n        console.error(err.message, err)\n    });\n}\nexport function unsubscribePush() {\n    if(navigator.serviceWorker)\n        navigator.serviceWorker.ready.then(registration => {\n            //Find the registered push subscription in the service worker\n            registration.pushManager\n                .getSubscription()\n                .then(subscription => {\n                    if (!subscription) {\n                        return\n                        //If there isn't a subscription, then there's nothing to do\n                    }\n            subscription\n              .unsubscribe()\n              .then(() => {})\n              .catch(err => console.error(err))\n          })\n          .catch((err) => console.error(err))\n  });\n}\n// This function is needed because Chrome doesn't accept a base64 encoded string\n// as value for applicationServerKey in pushManager.subscribe yet\n// https://bugs.chromium.org/p/chromium/issues/detail?id=802280\nfunction urlBase64ToUint8Array(base64String) {\n    const padding = '='.repeat((4 - base64String.length % 4) % 4);\n    const base64 = (base64String + padding)\n        .replace(/\\-/g, '+')\n        .replace(/_/g, '/');\n\n    const rawData = window.atob(base64);\n    const outputArray = new Uint8Array(rawData.length);\n\n    for (let i = 0; i < rawData.length; ++i) {\n        outputArray[i] = rawData.charCodeAt(i);\n    }\n    return outputArray;\n}","import React,{Component} from \"reactn\";\nimport {subscribePush, unsubscribePush} from \"../../global/push\";\n\nexport default class Permissions extends Component {\n\n    subscribed;\n\n    constructor(props) {\n        super(props);\n\n        const permissionsString = localStorage.getItem('permissions');\n        let permissions;\n        if(permissionsString === null){\n            permissions = {\n                notifications: false\n            }\n            localStorage.setItem('permissions',JSON.stringify(permissions));\n        }else{\n            permissions = JSON.parse(permissionsString);\n        }\n\n        this.state = {\n            permissions: permissions\n        }\n        this.subscribed =  permissions.notifications;\n    }\n\n    setNotifications = () => {\n        this.setState(state => {\n            let res = {\n                permissions: {\n                    ...state.permissions,\n                    notifications: !state.permissions.notifications\n                }\n            }\n            // subscribe / unsubscribe push\n            if(res.permissions.notifications) {\n                Notification.requestPermission().then(permiss => {\n                    if(permiss !== 'granted')\n                        this.setState(state => {\n                            let res = {\n                                permissions: {\n                                    ...state.permissions,\n                                    notifications: false\n                                }\n                            }\n                            this.setPermissions(res.permissions);\n                            return res;\n                        })\n                })\n                if(!this.subscribed) {\n                    subscribePush(this.global.authTokens).then(() => {});\n                    this.subscribed = true;\n                }\n            }else {\n                this.subscribed = false;\n                unsubscribePush()\n            }\n            this.setPermissions(res.permissions);\n            return res;\n        })\n    }\n\n    setPermissions = (permissions) => {\n        localStorage.setItem('permissions',JSON.stringify(permissions));\n    }\n\n    render() {\n        return(\n            <div>\n                <h4>Berechtigungen</h4>\n\n                <span>Benachrichtigungen</span>\n                &nbsp;\n                <label className=\"switch\">\n                    <input\n                        type=\"checkbox\"\n                        checked={this.state.permissions.notifications}\n                        onChange={this.setNotifications}\n                    />\n                    <span className=\"slider round\"/>\n                </label>\n            </div>\n        )\n    }\n}","import React,{Component} from \"react\";\nimport {ModalHeader, ModalMain} from \"../../utilComp/Modal\";\nimport Dummy from \"../../utilComp/Dummy\";\nimport {Link} from \"react-router-dom\";\n\nimport \"./settings.scss\";\nimport {getUserSelf, setEmail} from \"./apiCalls\";\nimport EditableLabel from \"../../utilComp/EditableLabel\";\nimport Permissions from \"./Permissions\";\n\nexport default class Settings extends Component{\n\n    constructor(props) {\n        super(props);\n        this.state  = {\n            userDataSelf: null,\n            loaded: false,\n            error: false,\n            emailChangeRequested: false,\n            setEmailError: false,\n            setEmailErrorMessage: ''\n        }\n    }\n\n    changeEmail = value => {\n        //did the mail address change?\n        if(this.state.userDataSelf.email !== value)\n            setEmail({\n                email: value\n            }).then(async response => {\n                if(response.status === 200) {\n                    const data = await response.json();\n                    // check email taken\n                    if(data.emailTaken){\n                        this.setState({\n                            emailChangeRequested: false,\n                            setEmailError: true,\n                            setEmailErrorMessage: 'E-Mail wird bereits verwendet!'\n                        });\n                    }else{\n                        this.setState({\n                            setEmailError: false,\n                            emailChangeRequested: true\n                        });\n                    }\n                }else {\n                    this.setState({\n                        setEmailError: true,\n                        setEmailErrorMessage: 'Fehler beim Versenden der E-Mail!',\n                        emailChangeRequested: false\n                    })\n                }\n            }).catch(err => {\n                this.setState({\n                    setEmailError: true,\n                    setEmailErrorMessage: 'Fehler beim Versenden der E-Mail!',\n                    emailChangeRequested: false\n                })\n            });\n    }\n\n    render() {\n        return(\n            <Dummy>\n                <ModalHeader>\n                    <h1>Einstellungen</h1>\n                </ModalHeader>\n                <ModalMain>\n                    {this.state.loaded ?\n                        <div className={\"settings\"}>\n                            <span className=\"settings-header\">\n                                E-Mail Addresse: <br/>\n                            </span>\n                            <EditableLabel\n                                className = \"email\"\n                                value = {this.state.userDataSelf.email}\n                                onChange = {this.changeEmail}\n                            >\n                                {this.state.userDataSelf.email === '' ?\n                                    \"Noch keine E-Mail Addresse!\"\n                                    :\n                                    this.state.userDataSelf.email\n                                }\n                            </EditableLabel>\n                            {this.state.emailChangeRequested ?\n                                <Dummy>\n                                    &nbsp;\n                                    <span className=\"emailChanged\">E-Mail mit Verifizierungslink wurde versendet!</span>\n                                </Dummy>\n                                :\n                                null\n                            }\n                            {this.state.setEmailError ?\n                                <Dummy>\n                                    &nbsp;\n                                    <span className=\"set-email-error\">\n                                        {this.state.setEmailErrorMessage}\n                                    </span>\n                                </Dummy>\n                                :\n                                null\n                            }\n                            <div className={\"settings-about\"}>\n                                <Link to={\"/about\"}>über diese Seite</Link>\n                            </div>\n                            <Permissions/>\n                        </div>\n                    : (!this.state.error ?\n                        <span className=\"loading\">\n                            laden...\n                        </span>\n                    : <span className=\"error\">\n                                ein Fehler ist aufgetreten!\n                    </span>)}\n                </ModalMain>\n            </Dummy>\n        )\n    }\n\n    async componentDidMount() {\n        try {\n            const userDataSelf = await getUserSelf();\n            this.setState({\n                loaded: true,\n                userDataSelf: userDataSelf\n            })\n        }catch (e) {\n            this.setState({error: true})\n        }\n    }\n}","import React from \"react\";\nimport {\n    Switch,\n    Route,\n    useRouteMatch\n} from \"react-router-dom\";\nimport Modal from \"../utilComp/Modal\";\nimport NewChat from \"./newChat/NewChat\";\nimport Dummy from \"../utilComp/Dummy\";\nimport UserInfo from \"./userInfo/UserInfo\";\nimport Settings from \"./settings/Settings\";\n/*\n    modals are always at the end of the url\n */\nexport default function ModalRouterBigScreens(props){\n\n    let { path } = useRouteMatch();\n\n    return(\n        <Switch>\n            <Route path={`${path}/newChat`}>\n                {props.children}\n                <Modal>\n                    <NewChat />\n                </Modal>\n            </Route>\n            <Route path={`${path}/userInfo/:uidInfo`} render={\n                routeProps => (\n                    <Dummy>\n                        {props.children}\n                        <Modal>\n                            <UserInfo uid={routeProps.match.params.uidInfo} />\n                        </Modal>\n                    </Dummy>\n                )\n            } />\n            <Route path={`${path}/settings`}>\n                {props.children}\n                <Modal>\n                    <Settings/>\n                </Modal>\n            </Route>\n            <Route path=\"*\">\n                {props.children}\n            </Route>\n        </Switch>\n    )\n}","import React from \"react\";\nimport {\n    Switch,\n    Route,\n    useRouteMatch\n} from \"react-router-dom\";\nimport ChatList from \"./allChats/ChatList\";\nimport NormalChatView from \"./chatView/NormalChatView\";\nimport GroupChatView,{groupChatTabs} from \"./chatView/GroupChatView\";\nimport ModalRouterBigScreens from \"./ModalRouterBigScreens\";\n\nexport default function GridBigScreens(props){\n\n    const { path } = useRouteMatch();\n\n    return(\n        <div className=\"main-container\">\n            <div className=\"mc-left\">\n\n                <ChatList />\n            </div>\n            <div className=\"mc-right\">\n\n                <Switch>\n                    <Route path={`${path}/user/:uid`} render={\n                        routeProps => (\n                            <ModalRouterBigScreens>\n                                <NormalChatView\n                                    uid={routeProps.match.params.uid}\n                                />\n                            </ModalRouterBigScreens>\n                        )\n                    } />\n                    <Route path={`${path}/group/:gcid`} render={\n                        routeProps => (\n                            <ModalRouterBigScreens>\n                                <GroupChatView\n                                    gcid={routeProps.match.params.gcid}\n                                    tab={groupChatTabs.chat}\n                                />\n                            </ModalRouterBigScreens>\n                        )\n                    } />\n                    <Route path={`${path}/groupInfo/:gcid`} render={\n                        routeProps => (\n                            <ModalRouterBigScreens>\n                                <GroupChatView\n                                    gcid={routeProps.match.params.gcid}\n                                    tab={groupChatTabs.info}\n                                />\n                            </ModalRouterBigScreens>\n                        )\n                    } />\n                    <Route path={path}>\n                        <ModalRouterBigScreens>\n                            <h1>noch kein chat ausgewählt</h1>\n                        </ModalRouterBigScreens>\n                    </Route>\n                </Switch>\n            </div>\n        </div>\n    )\n}\n","import React,{Component} from \"react\";\nimport chatSocket from \"../../chatData/chatSocket\";\n\nimport './typeMessageContainer.scss';\n\nexport default class TypeMsgContainer extends Component{\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            usersTyping: []\n        };\n    }\n    typeStateChanged = () => {\n\n        const chat = chatSocket.getChat(this.props.chatType,this.props.chatId);\n        this.setState({\n            usersTyping: chat.getUsersTyping()\n        });\n    };\n\n    render() {\n\n        return(\n            <div className=\"typeMsg-container\">\n                {this.state.usersTyping.map((user,index) => (\n                    <div key={index} className=\"typeMsg\">\n                        {user.username + \" schreibt...\"}\n                    </div>\n                ))}\n            </div>\n        );\n    }\n\n    componentDidMount() {\n\n        const chat = chatSocket.getChat(this.props.chatType,this.props.chatId);\n        chat.event.on(\"typeState changed\",this.typeStateChanged);\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        /*\n            es wird überprüft, ob sich der chat geändert hat\n            wenn ja, werden events neu initialisiert\n         */\n        if(prevProps.chatType !== this.props.chatType || prevProps.chatId !== this.props.chatId) {\n\n            const prevChat = chatSocket.getChat(prevProps.chatType,prevProps.chatId);\n            prevChat.event.rm(\"typeState changed\",this.typeStateChanged);\n\n            const newChat = chatSocket.getChat(this.props.chatType,this.props.chatId);\n            newChat.event.on(\"typeState changed\",this.typeStateChanged);\n        }\n    }\n\n    componentWillUnmount() {\n\n        const chat = chatSocket.getChat(this.props.chatType,this.props.chatId);\n        chat.event.rm(\"typeState changed\",this.typeStateChanged);\n    }\n}","import React from \"react\";\nimport {\n    Switch,\n    Route,\n    useRouteMatch\n} from \"react-router-dom\";\nimport NewChat from \"./newChat/NewChat\";\nimport UserInfo from \"./userInfo/UserInfo\";\nimport Settings from \"./settings/Settings\";\n/*\n    modals are always at the end of the url\n */\nexport default function ModalRouterSmallScreens(props){\n\n    let { path } = useRouteMatch();\n\n    return(\n        <Switch>\n            <Route path={`${path}/newChat`}>\n                <NewChat />\n            </Route>\n            <Route path={`${path}/userInfo/:uidInfo`} render={\n                routeProps => (\n                    <UserInfo uid={routeProps.match.params.uidInfo} />\n                )\n            } />\n            <Route path={`${path}/settings`}>\n                <Settings/>\n            </Route>\n            <Route path=\"*\">\n                {props.children}\n            </Route>\n        </Switch>\n    )\n}","import React,{useGlobal} from \"reactn\";\nimport {\n    Switch,\n    Route,\n    useRouteMatch\n} from \"react-router-dom\";\nimport ChatList from \"./allChats/ChatList\";\nimport NormalChatView from \"./chatView/NormalChatView\";\nimport GroupChatView,{groupChatTabs} from \"./chatView/GroupChatView\";\nimport TypeMsgContainer from \"./chatView/TypeMsgContainer\";\nimport ModalRouterSmallScreens from \"./ModalRouterSmallScreens\";\n\nexport default function RouterSmallScreens(props){\n\n    let { path } = useRouteMatch();\n    const [global,setGlobal] = useGlobal();\n\n    const renderTypeMsgContainer = () => {\n        if(global.currentChat.type !== '' && global.currentChat.id !== 0){\n            return(\n                <TypeMsgContainer\n                    chatType={global.currentChat.type}\n                    chatId={global.currentChat.id}\n                />\n            )\n        }\n        return null;\n    };\n\n    return(\n            <Switch>\n                <Route path={`${path}/user/:uid`} render={\n                    routeProps => (\n                        <ModalRouterSmallScreens>\n                            <div className=\"main-container\">\n                                <NormalChatView\n                                    uid={routeProps.match.params.uid}\n                                />\n                            </div>\n                            {renderTypeMsgContainer()}\n                        </ModalRouterSmallScreens>\n                    )\n                }>\n                </Route>\n                <Route path={`${path}/group/:gcid`} render={\n                    routeProps => (\n                        <ModalRouterSmallScreens>\n                            <div className=\"main-container\">\n                                <GroupChatView\n                                    gcid={routeProps.match.params.gcid}\n                                    tab={groupChatTabs.chat}\n                                />\n                            </div>\n                            {renderTypeMsgContainer()}\n                        </ModalRouterSmallScreens>\n                    )\n                } />\n                <Route path={`${path}/groupInfo/:gcid`} render={\n                    routeProps => (\n                        <ModalRouterSmallScreens>\n                            <GroupChatView\n                                gcid={routeProps.match.params.gcid}\n                                tab={groupChatTabs.info}\n                            />\n                        </ModalRouterSmallScreens>\n                    )\n                } />\n                <Route path={path}>\n                    <ModalRouterSmallScreens>\n                        <div className=\"chat-list-outer-small\">\n                            <ChatList/>\n                        </div>\n                    </ModalRouterSmallScreens>\n                </Route>\n                <Route path = \"*\">\n                    <h3>Not found!</h3>\n                </Route>\n            </Switch>\n    )\n\n}","import React,{Component} from \"react\";\nimport Header from \"./Header/Header\";\nimport Responsive from \"../responsive/Responsive\";\nimport GridBigScreens from \"./GridBigScreens\";\nimport RouterSmallScreens from \"./RouterSmallScreens\";\nimport chatSocket from \"../chatData/chatSocket\";\n\nimport './Grid.scss';\n\nexport default class Chat extends Component{\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            /*\n                which modal is currently open\n                    0: none\n             */\n            modal: 0,\n            /*\n                info about the currently open modal\n             */\n            modalInfo: null,\n            /*\n                is shown at the user-icon\n             */\n            notifications: 0\n        };\n    }\n\n    componentDidMount() {\n        /*\n            if chatsocket is undefined, it gets initialized\n         */\n        if (!chatSocket.initCalled) {\n            chatSocket.init().then(r => {});\n        }\n    }\n\n    render() {\n\n        return (\n            <div className=\"h-100\">\n\n                <Header/>\n\n                <Responsive displayIn={[\"Mobile\"]}>\n\n                    <RouterSmallScreens />\n                </Responsive>\n\n                <Responsive displayIn={[\"Laptop\",\"Tablet\"]}>\n\n                    <GridBigScreens/>\n                </Responsive>\n\n            </div>\n        );\n    }\n}","import React from \"react\";\n\nimport \"./About.scss\";\n\nexport default function About(){\n    return(\n        <div className={\"about\"}>\n            <h2>Über diese Seite</h2>\n            <h4>Erstellt von:</h4>\n            Stefan Schlaghuber<br/>\n            2002 Großmugl<br/>\n            stefan.schlaghuber@gmail.com<br/>\n        </div>\n    )\n}","import {makeRequest} from \"./requests\";\n\nexport async function reqUserSelf(tokens){\n    const config = {\n        method: 'GET',\n        headers: {\n            'Accept': 'application/json'\n        }\n    };\n    return await makeRequest(\n        '/user/self',\n        config,\n        tokens\n    );\n}","import {addReducer} from 'reactn';\nimport {fetchData} from \"./globalData\";\nimport {resetChatSocket} from \"../chatData/chatSocket\";\nimport {reqUserSelf} from \"./apiCalls\";\nimport {subscribePush, unsubscribePush} from \"./push\";\n\nexport function authTokens(){\n\n    addReducer('deleteAuthTokens',(global,dispatch) => {\n\n        localStorage.removeItem(\"authTokens\");\n        /*\n            TODO: without reload\n         */\n        unsubscribePush();\n        // eslint-disable-next-line no-restricted-globals\n        location.reload();\n        dispatch.deleteUserSelf();\n        dispatch.resetGlobal();\n        resetChatSocket();\n\n        return {\n            loaded: true,\n            authTokens: undefined\n        };\n    });\n\n    addReducer('initAuthTokens',async(global,dispatch,existingTokens) => {\n\n        try {\n            /*\n                util data is fetched from the server\n             */\n            await fetchData();\n\n            const response = await reqUserSelf(existingTokens);\n            /*\n                not authenticated\n                    --> token is deleted\n                    --> login page\n             */\n            if (response.status === 403) {\n                localStorage.removeItem(\"authTokens\");\n                return {\n                    loaded: true,\n                    authTokens: undefined\n                };\n            }\n            /*\n                userSelf is updated\n             */\n            else {\n                // get permissions\n                const permissions = JSON.parse(localStorage.getItem('permissions'));\n                if(permissions !== null && permissions.notifications)\n                    await subscribePush(existingTokens);\n                else\n                    unsubscribePush();\n\n                const data = await response.json();\n\n                const {uid, username} = data;\n                dispatch.setUserSelf(uid, username);\n\n                return ({\n                    loaded: true,\n                    authTokens: existingTokens\n                });\n            }\n        } catch (error) {\n            console.error(error);\n            return({\n                loaded: false\n            })\n        }\n    });\n\n    addReducer('setAuthTokens',async (global,dispatch,tokens) => {\n\n        localStorage.setItem(\"authTokens\", JSON.stringify(tokens));\n\n        await subscribePush(tokens);\n\n        return({\n            loaded: true,\n            authTokens: tokens\n        });\n    });\n}","import React,{Component} from \"reactn\";\nimport validate from \"validate.js\";\nimport {isVerificationCodeValid, setPassword} from \"./apiCalls\";\nimport {ErrorMsg, SuccessMsg} from \"./MsgBox\";\nimport TogglePassword from \"./TogglePassword\";\nimport BackToLogin from \"./BackToLogin\";\n\nexport default class ResetPassword extends Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            linkValid: true,\n            error: false,\n            errorMessage: '',\n            password: '',\n            passwordRepeat: '',\n            passwordResetSuccess: false\n        };\n    }\n    changeHandler = event => {\n        let nam = event.target.name;\n        let val = event.target.value;\n        this.setState({[nam]: val});\n    };\n    submitHandler = event => {\n        event.preventDefault();\n        /*\n            constraints für validation\n         */\n        const valConstraints = {\n            password: {\n                presence: true,\n                length: {\n                    minimum: 8,\n                    tooShort: 'Passwort muss mindestens 8 Zeichen lang sein',\n                    maximum: 50,\n                    tooLong: 'Passwort darf höchstens 50 Zeichen lang sein'\n                }\n            },\n            passwordRepeat: {\n                presence: true,\n                equality: \"password\",\n                length: {\n                    minimum: 8,\n                    tooShort: 'Passwort muss mindestens 8 Zeichen lang sein',\n                    maximum: 50,\n                    tooLong: 'Passwort darf höchstens 50 Zeichen lang sein'\n                }\n            }\n        };\n        /*\n            validate\n         */\n        const valResult = validate({\n            password: this.state.password,\n            passwordRepeat: this.state.passwordRepeat\n        },valConstraints);\n\n        if(typeof(valResult) != \"undefined\") {\n\n            let errorMessage;\n\n            if (typeof (valResult.password) != \"undefined\")\n                errorMessage = valResult.password[0];\n            else if (typeof (valResult.passwordRepeat) != \"undefined\")\n                errorMessage = \"Passwörter stimmen nicht überein!\"\n            errorMessage = errorMessage.replace(\"Username \",\"\").replace(\"Password \",\"\");\n\n            this.setState({\n                error: true,\n                errorMessage: errorMessage\n            });\n        }else {\n\n            const {password} = this.state;\n\n            setPassword(this.props.verificationCode, password)\n                .then(response => {\n                    if (response.status === 200)\n                        this.setState({\n                            error: false,\n                            passwordResetSuccess: true\n                        });\n                    else if(response.status === 403)\n                        this.setState({\n                            error: true,\n                            errorMessage: 'Fehler: Dieser Link ist ungültig!'\n                        })\n                    else\n                        this.setState({\n                            error: true,\n                            errorMessage: 'ein Fehler ist aufgetreten'\n                        });\n                })\n                .catch(err => {\n                    this.setState({\n                        error: true,\n                        errorMessage: 'ein Fehler ist aufgetreten'\n                    });\n                });\n        }\n    }\n    errorMessage = () => {\n        if(this.state.error)\n            return (\n                <ErrorMsg>\n                    {this.state.errorMessage}\n                </ErrorMsg>\n            )\n    };\n    successMessage = () => {\n        if(this.state.passwordResetSuccess)\n            return (\n                <SuccessMsg>\n                    Passwort erfolgreich zurückgesetzt!\n                </SuccessMsg>\n            )\n    }\n    componentDidMount = () => {\n        isVerificationCodeValid(this.props.verificationCode)\n            .then(response => {\n                if(response.status !== 200)\n                    this.setState({\n                        linkValid: false\n                    })\n            })\n            .catch(err => {\n                this.setState({\n                    linkValid: false\n                })\n            });\n    }\n    render() {\n        if(this.state.linkValid)\n            return (\n                <div className=\"h-100\" style={{display: \"flex\",overflowY: \"auto\"}}>\n                    <div className=\"col-sm-12 my-auto\">\n                        <div className=\"container border rounded p-3\" style={{maxWidth: \"800px\"}}>\n                            <BackToLogin/>\n                            <h1>neues Passwort eingeben</h1>\n                            {this.errorMessage()}\n                            <form onSubmit={this.submitHandler}>\n                                <div className=\"form-group\">\n                                    <label htmlFor=\"password\">Passwort:</label>\n                                    <TogglePassword\n                                        name=\"password\"\n                                        className=\"form-control\"\n                                        placeholder=\"Passwort eingeben\"\n                                        onChange={this.changeHandler}\n                                    />\n                                </div>\n                                <div className=\"form-group\">\n                                    <label htmlFor=\"passwordRepeat\">Passwort wiederholen:</label>\n                                    <TogglePassword\n                                        name=\"passwordRepeat\"\n                                        className=\"form-control\"\n                                        placeholder=\"Passwort eingeben\"\n                                        onChange={this.changeHandler}\n                                    />\n                                </div>\n                                {this.successMessage()}\n                                <input\n                                    type=\"submit\"\n                                    className=\"btn btn-primary\"\n                                    value=\"Passwort zurücksetzen\"\n                                />\n                            </form>\n                        </div>\n                    </div>\n                </div>\n            );\n        else\n            return (\n                <ErrorMsg>\n                    Ungültiger Link!\n                </ErrorMsg>\n            )\n    }\n}","import React, {useDispatch,useEffect} from \"reactn\";\nimport {\n    BrowserRouter as Router,\n    Switch,\n    Route,\n    Redirect,\n    useLocation\n} from \"react-router-dom\";\nimport Login from \"./Auth/Login\";\nimport Register from \"./Auth/Register\";\nimport VerifyEmail from \"./Auth/VerifyEmail\";\nimport ForgotPassword from \"./Auth/ForgotPassword\";\nimport PrivateRoute from \"./utilComp/PrivateRoute\";\nimport Chat from \"./Home/Home\";\nimport About from \"./About/About\";\n\nimport 'bootstrap/dist/css/bootstrap.css';\nimport './App.css';\n\nimport {initGlobal} from \"./global/global\";\nimport ResetPassword from \"./Auth/ResetPassword\";\n\ninitGlobal();\n\nexport default function App() {\n\n    const dispatch = useDispatch();\n\n    useEffect(() => {\n        const existingTokens = JSON.parse(localStorage.getItem(\"authTokens\"));\n        dispatch.initAuthTokens(existingTokens);\n    },[]);\n\n    return (\n        <Router>\n            <Switch>\n                <PrivateRoute path=\"/chat\" component={Chat}/>\n                <Route exact path=\"/login\" component={Login}/>\n                <Route exact path=\"/register\" component={Register}/>\n                <Route path={\"/verifyEmail/:code\"} render={\n                    routeProps => (\n                        <VerifyEmail verificationCode={routeProps.match.params.code}/>\n                    )\n                } />\n                <Route exact path=\"/forgotPassword\" component={ForgotPassword}/>\n                <Route path={\"/resetPassword/:code\"} render={\n                    routeProps => (\n                        <ResetPassword verificationCode={routeProps.match.params.code}/>\n                    )\n                } />\n                <Route path={\"/about\"}>\n                    <About/>\n                </Route>\n                <Route exact path=\"/\">\n                    <Redirect to={\"/chat\"}/>\n                </Route>\n                <Route path=\"*\">\n                    <NoMatch/>\n                </Route>\n            </Switch>\n        </Router>\n    );\n}\n\nfunction NoMatch() {\n  let location = useLocation();\n\n  return (\n      <div>\n        <h3>\n          No match for <code>{location.pathname}</code>\n        </h3>\n      </div>\n  );\n}\n","import {addReducer, setGlobal} from 'reactn';\nimport {infoHeaderCenter} from \"../Home/Header/HeaderLeft\";\nimport {initChats} from \"./initChats\";\nimport {initChatReducers} from \"./chats\";\nimport {authTokens} from \"./authTokens\";\n\nexport function initGlobal(){\n\n    setGlobal({\n        /*\n            is the page ready to be shown?\n         */\n        loaded: false,\n        /*\n            the authentication token\n         */\n        authTokens: undefined,\n        /*\n            info about the user self\n         */\n        userSelf: {},\n        /*\n            what info should be shown at the left center of the header?\n         */\n        infoHeaderCenter: infoHeaderCenter.none,\n        ihcData: null,\n        /*\n            the chat that is currently selected\n         */\n        currentChat: {\n            type: '',\n            id: 0,\n            // the name of the chat\n            chatName: '',\n            /*\n                unread messages inside the currentChat\n             */\n            newMessages: 0,\n            /*\n                the messages in the currentChat, displayed in chatContainer\n             */\n            messages: [],\n            isStillMember: true,\n            blockedBySelf: false,\n            blockedByOther: false\n        },\n        /*\n            the shown tempChat\n         */\n        tempChat: null,\n        /*\n            all chats of the user are stored here\n         */\n        chats: [],\n        /*\n            number of chats with new messages\n         */\n        newMessages: 0\n    });\n\n    initChats();\n\n    /*\n        the userSelf gets set\n     */\n    addReducer('setUserSelf',(global,dispatch,uid,username) => {\n\n        return {\n            userSelf: {\n                uid: uid,\n                username: username\n            }\n        }\n    });\n    /*\n        userSelf is deleted\n     */\n    addReducer('deleteUserSelf',(global,dispatch) => {\n\n       return {\n           userSelf: {}\n       }\n    });\n    /*\n        // eslint-disable-next-line no-unused-vars\n        global gets reseted\n     */\n    addReducer('resetGlobal',(global,dispatch) => ({\n        infoHeaderCenter: infoHeaderCenter.none,\n        ihcData: null,\n        currentChat: {\n            type: '',\n            id: 0,\n            chatName: '',\n            newMessages: 0,\n            messages: [],\n            isStillMember: true,\n            blockedBySelf: false,\n            blockedByOther: false\n        },\n        tempChat: null,\n        chats: [],\n        newMessages: 0\n    }));\n    /*\n        chat reducers are initialized\n     */\n    initChatReducers();\n    /*\n        authTokens reducers are initialized\n     */\n    authTokens();\n}","import chatSocket from \"../chatData/chatSocket\";\nimport {setGlobal} from \"reactn\";\n\nexport function initChats(){\n\n    function chatsLoaded(chats){\n        setGlobal({\n            chats: chats\n        });\n    }\n    /*\n       chats get initialized\n       is loading of chats already finished?\n           --> chatArray gets requested immediately\n    */\n    if(chatSocket.finishedLoading){\n        chatsLoaded(chatSocket.getChatArraySortedByDate());\n        /*\n            otherwise --> event handler that gets triggered when loading finished\n         */\n    }else{\n        chatSocket.event.on('chats loaded',chatsLoaded);\n    }\n}","import {addReducer} from \"reactn\";\nimport chatSocket from \"../chatData/chatSocket\";\nimport {infoHeaderCenter} from \"../Home/Header/HeaderLeft\";\n\nexport function initChatReducers(){\n\n    /*\n        is the chat the current chat?\n     */\n    function isSelected(global,chat){\n\n        const currentChat = global.currentChat;\n        return currentChat.type === chat.type\n            && currentChat.id === chat.id;\n    }\n    /*\n        index of the chat is searched\n     */\n    function findIndex(global,chat){\n\n        return global.chats.findIndex(\n            element => (\n                element.id === chat.id\n                && element.type === chat.type)\n        );\n    }\n    /*\n        is called when there is a new message\n     */\n    addReducer('newMsg',(global,dispatch,chat,unreadMessages,message) => {\n\n        const index = findIndex(global,chat);\n        /*\n            if the index is -1, the chat does not exist\n         */\n        if(index !== -1){\n            /*\n                is the chat selected?\n             */\n            if(isSelected(global,chat)) {\n                /*\n                    chat is selected\n                        latestMessageObject is updated\n                        newMessage counter is set to 0\n                 */\n                const chatsClone = global.chats.splice(0);\n                const chatObject = chatsClone[index];\n                chatObject.latestMessage = chat.getLatestMessageObject();\n                chatObject.unreadMessages = 0;\n                /*\n                    item is deleted from array\n                 */\n                chatsClone.splice(index,1);\n                /*\n                    item is added to start of the array\n                 */\n                chatsClone.unshift(chatObject);\n                /*\n                    message is added to messages in currentChat\n                 */\n                const currentChat = {\n                    ...global.currentChat,\n                    messages: global.currentChat.messages.concat(message),\n                    newMessages: global.currentChat.newMessages + 1\n                };\n                return {\n                    chats: chatsClone,\n                    currentChat: currentChat\n                };\n            }else{\n                /*\n                    chat is not selected\n                        latestMessageObject is updated\n                        newMessage counter gets incremented\n                 */\n                const chatsClone = global.chats.splice(0);\n                const chatObject = chatsClone[index];\n                chatObject.latestMessage = chat.getLatestMessageObject();\n                /*\n                    if the unread messages of the chat have been 0 until now, newMessages is incremented\n                 */\n                let newMessages = global.newMessages;\n                if(chatObject.unreadMessages === 0){\n                    newMessages++;\n                }\n\n                chatObject.unreadMessages = unreadMessages + 1;\n                /*\n                    item is deleted from array\n                 */\n                chatsClone.splice(index,1);\n                /*\n                    item is added to start of the array\n                 */\n                chatsClone.unshift(chatObject);\n\n                return {\n                    chats: chatsClone,\n                    newMessages: newMessages\n                };\n            }\n        }\n    });\n    /*\n        gets called when chat should be updated\n            toTop: should chat be appended at top?\n     */\n    addReducer('updateChat',(global,dispatch,chat) => {\n        const index = findIndex(global,chat);\n        /*\n            if the index is -1, the chat does not exist\n         */\n        if(index !== -1) {\n            /*\n                chat is not selected\n                    latestMessageObject is updated\n                    newMessage counter gets incremented\n             */\n            const chatsClone = global.chats.splice(0);\n            /*\n                item is deleted from array\n             */\n            chatsClone.splice(index, 1);\n            /*\n                get chat object\n             */\n            const chatObject = chat.getChatObject();\n            /*\n                item is added to start of the array\n             */\n            chatsClone.unshift(chatObject);\n\n            if (chatSocket.isCurrentChat(chat.type, chat.id))\n                return {\n                    infoHeaderCenter: infoHeaderCenter.groupChat,\n                    ihcData: {\n                        name: chat.chatName,\n                        gcid: chat.id\n                    },\n                    chats: chatsClone\n                };\n            else\n                return {\n                    chats: chatsClone\n                };\n        }\n    });\n    /*\n        gets called out of changeCurrentChat in chatSocket\n     */\n    addReducer('selectChat',(global,dispatch,chat) => {\n\n        const index = findIndex(global,chat);\n        /*\n            if the index is -1, the chat does not exist\n         */\n        if(index !== -1) {\n            /*\n                chats is cloned\n             */\n            const chatsClone = global.chats.splice(0);\n            const item = chatsClone[index];\n            /*\n                if there where unread messages, newMessages counter is decremented by 1\n             */\n            let newMessages = global.newMessages;\n            if(item.unreadMessages > 0){\n                newMessages--;\n            }\n            /*\n                unreadMessages is set to 0\n             */\n            item.unreadMessages = 0;\n            chat.unreadMessages = 0;\n            chatsClone[index] = item;\n            /*\n                change is emitted to server\n             */\n            chatSocket.socket.emit('change chat', {\n                type: chat.type,\n                id: chat.id\n            });\n\n            return {\n                currentChat: {\n                    type: chat.type,\n                    id: chat.id,\n                    chatName: chat.chatName,\n                    messages: chat.getMessages(),\n                    newMessages: 0,\n                    isStillMember: chat.type !== \"groupChat\" || chat.isStillMember,\n                    blockedBySelf: chat.isBlockedBySelf(),\n                    blockedByOther: chat.isBlockedByOther()\n                },\n                chats: chatsClone,\n                tempChat: null,\n                newMessages: newMessages\n            }\n        }\n    });\n    /*\n        is called when no chat should be selected\n     */\n    addReducer('selectNoChat',(global,dispatch) => {\n        /*\n            change is emitted to server\n         */\n        chatSocket.socket.emit('change chat', null);\n\n        return {\n            currentChat: {\n                type: '',\n                id: 0,\n                chatName: '',\n                messages: [],\n                newMessages: 0,\n                isStillMember: true,\n                blockedBySelf: false,\n                blockedByOther: false\n            },\n        }\n    });\n    /*\n        loaded messages are added\n     */\n    addReducer('addLoadedMessages',(global,dispatch,messages) => {\n\n        return {\n            currentChat: {\n                ...global.currentChat,\n                messages: messages ?\n                    messages.concat(global.currentChat.messages)\n                    : global.currentChat.messages\n            }\n        };\n    });\n    /*\n        new chat is added\n     */\n    addReducer('addChat',(global,dispatch,chat) => {\n\n        function isDateBefore(chat1,chat2){\n            /*\n                do latestMessages exist?\n             */\n            if(!chat1.latestMessage)\n                return true;\n            else if(!chat2.latestMessage)\n                return false;\n            else\n                return chat1.latestMessage.date.getTime() < chat2.latestMessage.date.getTime();\n        }\n        /*\n            place the chat at the right position\n            chats is cloned\n         */\n        const chatsClone = global.chats.splice(0);\n        const chatObject = chat.getChatObject();\n\n        if(chatsClone.length === 0)\n            return {\n                chats: [chatObject]\n            };\n\n        let added = false;\n        for (let i = 0; i < chatsClone.length; i++) {\n            if (isDateBefore(chatsClone[i], chatObject)) {\n                chatsClone.splice(i, 0, chatObject);\n                added = true;\n                break;\n            }\n        }\n        if(!added)\n            chatsClone.push(chatObject);\n\n        return {\n            chats: chatsClone\n        }\n\n    });\n    /*\n        chat is removed\n     */\n    addReducer('removeChat',(global,dispatch,chat) => {\n\n        const index = findIndex(global,chat);\n        /*\n            chats is cloned\n         */\n        const chatsClone = this.state.chats.splice(0);\n        /*\n            item is deleted from array\n         */\n        chatsClone.splice(index,1);\n\n        return {\n            chats: chatsClone\n        }\n    });\n    /*\n        tempChat is shown\n     */\n    addReducer('showTempChat',(global,dispatch) => {\n\n        const chat = chatSocket.temporaryChat.chatNow;\n        /*\n            change is emitted to server\n         */\n        chatSocket.socket.emit('change chat', null);\n\n        return {\n            tempChat: chat.getChatObject(),\n            currentChat: {\n                type: 'tempChat',\n                id: 0,\n                chatName: '',\n                messages: [],\n                isStillMember: true,\n                // TODO get blockInfo\n                blockedBySelf: false,\n                blockedByOther: false\n            }\n        }\n    });\n    /*\n        tempChat is updated\n     */\n    addReducer('updateTempChat',(global,dispatch,chat) => ({\n        tempChat: chat.getChatObject(),\n        currentChat: {\n            type: 'tempChat',\n            id: 0,\n            chatName: '',\n            messages: [],\n            isStillMember: true,\n            blockedBySelf: false,\n            blockedByOther: false\n        }\n    }));\n    /*\n        tempChat is hidden\n     */\n    addReducer('hideTempChat',(global,dispatch) => ({\n        tempChat: null\n    }));\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n//import * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n    <React.StrictMode>\n        <App />\n    </React.StrictMode>,\n    document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n//serviceWorker.unregister();\n"],"sourceRoot":""}